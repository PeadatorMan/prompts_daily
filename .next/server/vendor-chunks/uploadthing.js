"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/uploadthing";
exports.ids = ["vendor-chunks/uploadthing"];
exports.modules = {

/***/ "(ssr)/./node_modules/uploadthing/client/index.js":
/*!**************************************************!*\
  !*** ./node_modules/uploadthing/client/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UploadAbortedError: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadAbortedError),\n/* harmony export */   genUploader: () => (/* binding */ genUploader),\n/* harmony export */   generateClientDropzoneAccept: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateClientDropzoneAccept),\n/* harmony export */   generateMimeTypes: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateMimeTypes),\n/* harmony export */   generatePermittedFileTypes: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generatePermittedFileTypes),\n/* harmony export */   isValidFileSize: () => (/* binding */ isValidFileSize),\n/* harmony export */   isValidFileType: () => (/* binding */ isValidFileType),\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n/* harmony import */ var effect_Array__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! effect/Array */ \"(ssr)/./node_modules/effect/dist/esm/Array.js\");\n/* harmony import */ var effect_Function__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Function */ \"(ssr)/./node_modules/effect/dist/esm/Function.js\");\n/* harmony import */ var effect_Micro__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Micro */ \"(ssr)/./node_modules/effect/dist/esm/Micro.js\");\n/* harmony import */ var effect_Option__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Option */ \"(ssr)/./node_modules/effect/dist/esm/Option.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/shared */ \"(ssr)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var std_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! std-env */ \"(ssr)/./node_modules/std-env/dist/index.mjs\");\n\n\n\n\n\n\n\nvar version$1 = \"6.13.3\";\nconst uploadMultipartWithProgress = (file, presigned, opts)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.gen(function*() {\n        let uploadedBytes = 0;\n        const etags = yield* effect_Micro__WEBPACK_IMPORTED_MODULE_1__.forEach(presigned.urls, (url, index)=>{\n            const offset = presigned.chunkSize * index;\n            const end = Math.min(offset + presigned.chunkSize, file.size);\n            const chunk = file.slice(offset, end);\n            return uploadPart({\n                url,\n                chunk: chunk,\n                contentDisposition: presigned.contentDisposition,\n                fileType: file.type,\n                fileName: file.name,\n                onProgress: (delta)=>{\n                    uploadedBytes += delta;\n                    const percent = uploadedBytes / file.size * 100;\n                    opts.onUploadProgress?.({\n                        file: file.name,\n                        progress: percent\n                    });\n                }\n            }).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.map((tag)=>({\n                    tag,\n                    partNumber: index + 1\n                })), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.retry({\n                while: (error)=>error instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError,\n                times: std_env__WEBPACK_IMPORTED_MODULE_2__.isTest ? 3 : 10,\n                schedule: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.exponentialDelay)()\n            }));\n        }, {\n            concurrency: \"inherit\"\n        }).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.tapError((error)=>opts.reportEventToUT(\"failure\", {\n                fileKey: presigned.key,\n                uploadId: presigned.uploadId,\n                fileName: file.name,\n                storageProviderError: String(error)\n            })));\n        // Tell the server that the upload is complete\n        yield* opts.reportEventToUT(\"multipart-complete\", {\n            uploadId: presigned.uploadId,\n            fileKey: presigned.key,\n            etags\n        });\n    });\nconst uploadPart = (opts)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.async((resume)=>{\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"PUT\", opts.url, true);\n        xhr.setRequestHeader(\"Content-Type\", opts.fileType);\n        xhr.setRequestHeader(\"Content-Disposition\", (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.contentDisposition)(opts.contentDisposition, opts.fileName));\n        xhr.addEventListener(\"load\", ()=>{\n            const etag = xhr.getResponseHeader(\"Etag\");\n            if (xhr.status >= 200 && xhr.status <= 299 && etag) {\n                return resume(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.succeed(etag));\n            }\n            return resume(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError()));\n        });\n        xhr.addEventListener(\"error\", ()=>resume(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError())));\n        let lastProgress = 0;\n        xhr.upload.addEventListener(\"progress\", (e)=>{\n            const delta = e.loaded - lastProgress;\n            lastProgress += delta;\n            opts.onProgress(delta);\n        });\n        xhr.send(opts.chunk);\n        // Cleanup function that runs on interruption\n        return effect_Micro__WEBPACK_IMPORTED_MODULE_1__.sync(()=>xhr.abort());\n    });\nconst uploadPresignedPostWithProgress = (file, presigned, opts)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.async((resume)=>{\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", presigned.url);\n        xhr.setRequestHeader(\"Accept\", \"application/xml\");\n        xhr.upload.addEventListener(\"progress\", ({ loaded, total })=>{\n            opts.onUploadProgress?.({\n                file: file.name,\n                progress: loaded / total * 100\n            });\n        });\n        xhr.addEventListener(\"load\", ()=>resume(xhr.status >= 200 && xhr.status < 300 ? effect_Micro__WEBPACK_IMPORTED_MODULE_1__.succeed(null) : opts.reportEventToUT(\"failure\", {\n                fileKey: presigned.key,\n                uploadId: null,\n                fileName: file.name,\n                storageProviderError: xhr.responseText\n            })));\n        xhr.addEventListener(\"error\", ()=>resume(opts.reportEventToUT(\"failure\", {\n                fileKey: presigned.key,\n                uploadId: null,\n                fileName: file.name\n            })));\n        const formData = new FormData();\n        Object.entries(presigned.fields).forEach(([k, v])=>formData.append(k, v));\n        formData.append(\"file\", file); // File data **MUST GO LAST**\n        xhr.send(formData);\n        return effect_Micro__WEBPACK_IMPORTED_MODULE_1__.sync(()=>{\n            xhr.abort();\n        });\n    });\nconst maybeParseResponseXML = (maybeXml)=>{\n    const codeMatch = maybeXml.match(/<Code>(.*?)<\\/Code>/s);\n    const messageMatch = maybeXml.match(/<Message>(.*?)<\\/Message>/s);\n    const code = codeMatch?.[1];\n    const message = messageMatch?.[1];\n    if (!code || !message) return null;\n    return {\n        code: s3CodeToUploadThingCode[code] ?? DEFAULT_ERROR_CODE,\n        message\n    };\n};\n/**\n * Map S3 error codes to UploadThing error codes\n *\n * This is a subset of the S3 error codes, based on what seemed most likely to\n * occur in uploadthing. For a full list of S3 error codes, see:\n * https://docs.aws.amazon.com/AmazonS3/latest/API/ErrorResponses.html\n */ const DEFAULT_ERROR_CODE = \"UPLOAD_FAILED\";\nconst s3CodeToUploadThingCode = {\n    AccessDenied: \"FORBIDDEN\",\n    EntityTooSmall: \"TOO_SMALL\",\n    EntityTooLarge: \"TOO_LARGE\",\n    ExpiredToken: \"FORBIDDEN\",\n    IncorrectNumberOfFilesInPostRequest: \"TOO_MANY_FILES\",\n    InternalError: \"INTERNAL_SERVER_ERROR\",\n    KeyTooLongError: \"KEY_TOO_LONG\",\n    MaxMessageLengthExceeded: \"TOO_LARGE\"\n};\nconst createAPIRequestUrl = (config)=>{\n    const url = new URL(config.url);\n    const queryParams = new URLSearchParams(url.search);\n    queryParams.set(\"actionType\", config.actionType);\n    queryParams.set(\"slug\", config.slug);\n    url.search = queryParams.toString();\n    return url;\n};\n/**\n * Creates a \"client\" for reporting events to the UploadThing server via the user's API endpoint.\n * Events are handled in \"./handler.ts starting at L112\"\n */ const createUTReporter = (cfg)=>(type, payload)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.gen(function*() {\n            const url = createAPIRequestUrl({\n                url: cfg.url,\n                slug: cfg.endpoint,\n                actionType: type\n            });\n            let headers = typeof cfg.headers === \"function\" ? cfg.headers() : cfg.headers;\n            if (headers instanceof Promise) {\n                headers = yield* effect_Micro__WEBPACK_IMPORTED_MODULE_1__.promise(()=>headers);\n            }\n            const response = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)(url, {\n                method: \"POST\",\n                body: JSON.stringify(payload),\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"x-uploadthing-package\": cfg.package,\n                    \"x-uploadthing-version\": version$1,\n                    ...headers\n                }\n            }).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.andThen(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseResponseJson), /**\n         * We don't _need_ to validate the response here, just cast it for now.\n         * As of now, @effect/schema includes quite a few bytes we cut out by this...\n         * We have \"strong typing\" on the backend that ensures the shape should match.\n         */ effect_Micro__WEBPACK_IMPORTED_MODULE_1__.map(effect_Function__WEBPACK_IMPORTED_MODULE_3__.unsafeCoerce), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"FetchError\", (e)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INTERNAL_CLIENT_ERROR\",\n                    message: `Failed to report event \"${type}\" to UploadThing server`,\n                    cause: e\n                }))), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"BadRequestError\", (e)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.getErrorTypeFromStatusCode)(e.status),\n                    message: e.getMessage(),\n                    cause: e.json\n                }))), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"InvalidJson\", (e)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INTERNAL_CLIENT_ERROR\",\n                    message: \"Failed to parse response from UploadThing server\",\n                    cause: e\n                }))));\n            switch(type){\n                case \"failure\":\n                    {\n                        // why isn't this narrowed automatically?\n                        const p = payload;\n                        const parsed = maybeParseResponseXML(p.storageProviderError ?? \"\");\n                        if (parsed?.message) {\n                            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                                code: parsed.code,\n                                message: parsed.message\n                            });\n                        } else {\n                            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                                code: \"UPLOAD_FAILED\",\n                                message: `Failed to upload file ${p.fileName} to S3`,\n                                cause: p.storageProviderError\n                            });\n                        }\n                    }\n            }\n            return response;\n        });\nconst version = version$1;\n/**\n * Validate that a file is of a valid type given a route config\n * @public\n */ const isValidFileType = (file, routeConfig)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.runSync((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.getTypeFromFileName)(file.name, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.objectKeys)(routeConfig)).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.map((type)=>file.type.includes(type)), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.orElseSucceed(()=>false)));\n/**\n * Validate that a file is of a valid size given a route config\n * @public\n */ const isValidFileSize = (file, routeConfig)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.runSync((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.getTypeFromFileName)(file.name, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.objectKeys)(routeConfig)).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.flatMap((type)=>(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fileSizeToBytes)(routeConfig[type].maxFileSize)), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.map((maxFileSize)=>file.size <= maxFileSize), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.orElseSucceed(()=>false)));\n/**\n * Generate a typed uploader for a given FileRouter\n * @public\n */ const genUploader = (initOpts)=>{\n    return (endpoint, opts)=>uploadFilesInternal(endpoint, {\n            ...opts,\n            url: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.resolveMaybeUrlArg)(initOpts?.url),\n            package: initOpts.package,\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            input: opts.input\n        }).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.provideService(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.FetchContext, {\n            fetch: globalThis.fetch.bind(globalThis),\n            baseHeaders: {\n                \"x-uploadthing-version\": version$1,\n                \"x-uploadthing-api-key\": undefined,\n                \"x-uploadthing-fe-package\": initOpts.package,\n                \"x-uploadthing-be-adapter\": undefined\n            }\n        }), (e)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.runPromiseExit(e, opts.signal ? {\n                signal: opts.signal\n            } : {})).then((exit)=>{\n            if (exit._tag === \"Right\") {\n                return exit.right;\n            } else if (exit.left._tag === \"Interrupt\") {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadAbortedError();\n            }\n            throw effect_Micro__WEBPACK_IMPORTED_MODULE_1__.causeSquash(exit.left);\n        });\n};\nconst uploadFilesInternal = (endpoint, opts)=>{\n    // classic service right here\n    const reportEventToUT = createUTReporter({\n        endpoint: String(endpoint),\n        package: opts.package,\n        url: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.resolveMaybeUrlArg)(opts.url),\n        headers: opts.headers\n    });\n    return reportEventToUT(\"upload\", {\n        input: \"input\" in opts ? opts.input : null,\n        files: opts.files.map((f)=>({\n                name: f.name,\n                size: f.size,\n                type: f.type\n            }))\n    }).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.flatMap((responses)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.forEach(responses, (presigned)=>uploadFile(String(endpoint), {\n                ...opts,\n                reportEventToUT\n            }, presigned).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.onInterrupt(reportEventToUT(\"failure\", {\n                fileKey: presigned.key,\n                uploadId: \"uploadId\" in presigned ? presigned.uploadId : null,\n                fileName: presigned.fileName\n            }).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.ignore))), {\n            concurrency: 6\n        })));\n};\nconst isPollingResponse = (input)=>{\n    if (!(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.isObject)(input)) return false;\n    if (input.status === \"done\") return \"callbackData\" in input;\n    return input.status === \"still waiting\";\n};\nconst isPollingDone = (input)=>{\n    return input.status === \"done\";\n};\nconst uploadFile = (slug, opts, presigned)=>effect_Array__WEBPACK_IMPORTED_MODULE_4__.findFirst(opts.files, (file)=>file.name === presigned.fileName).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.fromOption, effect_Micro__WEBPACK_IMPORTED_MODULE_1__.mapError(()=>{\n        // eslint-disable-next-line no-console\n        console.error(\"No file found for presigned URL\", presigned);\n        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"NOT_FOUND\",\n            message: \"No file found for presigned URL\",\n            cause: `Expected file with name ${presigned.fileName} but got '${opts.files.join(\",\")}'`\n        });\n    }), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.tap((file)=>opts.onUploadBegin?.({\n            file: file.name\n        })), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.tap((file)=>\"urls\" in presigned ? uploadMultipartWithProgress(file, presigned, opts) : uploadPresignedPostWithProgress(file, presigned, opts)), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.zip((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)(presigned.pollingUrl, {\n        headers: {\n            authorization: presigned.pollingJwt\n        }\n    }).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_1__.flatMap(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseResponseJson), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"BadRequestError\", (e)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.getErrorTypeFromStatusCode)(e.status),\n            message: e.message,\n            cause: e\n        }))), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.filterOrFailCause(isPollingResponse, (_)=>effect_Micro__WEBPACK_IMPORTED_MODULE_1__.causeDie(\"received a non PollingResponse from the polling endpoint\")), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.filterOrFail(isPollingDone, ()=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError()), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.map(({ callbackData })=>callbackData), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.retry({\n        while: (res)=>res._tag === \"RetryError\",\n        schedule: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.exponentialDelay)()\n    }), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.when(()=>!opts.skipPolling), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.map(effect_Option__WEBPACK_IMPORTED_MODULE_5__.getOrNull), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.map(effect_Function__WEBPACK_IMPORTED_MODULE_3__.unsafeCoerce))), effect_Micro__WEBPACK_IMPORTED_MODULE_1__.map(([file, serverData])=>({\n            name: file.name,\n            size: file.size,\n            key: presigned.key,\n            serverData,\n            url: presigned.fileUrl,\n            appUrl: presigned.appUrl,\n            customId: presigned.customId,\n            type: file.type\n        })));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvY2xpZW50L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9DO0FBQ1c7QUFDVDtBQUNFO0FBQzRPO0FBQzlJO0FBQ3JHO0FBRWpDLElBQUlzQixZQUFZO0FBRWhCLE1BQU1DLDhCQUE4QixDQUFDQyxNQUFNQyxXQUFXQyxPQUFPeEIsNkNBQVMsQ0FBQztRQUMvRCxJQUFJMEIsZ0JBQWdCO1FBQ3BCLE1BQU1DLFFBQVEsT0FBTzNCLGlEQUFhLENBQUN1QixVQUFVTSxJQUFJLEVBQUUsQ0FBQ0MsS0FBS0M7WUFDckQsTUFBTUMsU0FBU1QsVUFBVVUsU0FBUyxHQUFHRjtZQUNyQyxNQUFNRyxNQUFNQyxLQUFLQyxHQUFHLENBQUNKLFNBQVNULFVBQVVVLFNBQVMsRUFBRVgsS0FBS2UsSUFBSTtZQUM1RCxNQUFNQyxRQUFRaEIsS0FBS2lCLEtBQUssQ0FBQ1AsUUFBUUU7WUFDakMsT0FBT00sV0FBVztnQkFDZFY7Z0JBQ0FRLE9BQU9BO2dCQUNQbEMsb0JBQW9CbUIsVUFBVW5CLGtCQUFrQjtnQkFDaERxQyxVQUFVbkIsS0FBS29CLElBQUk7Z0JBQ25CQyxVQUFVckIsS0FBS3NCLElBQUk7Z0JBQ25CQyxZQUFZLENBQUNDO29CQUNUcEIsaUJBQWlCb0I7b0JBQ2pCLE1BQU1DLFVBQVVyQixnQkFBZ0JKLEtBQUtlLElBQUksR0FBRztvQkFDNUNiLEtBQUt3QixnQkFBZ0IsR0FBRzt3QkFDcEIxQixNQUFNQSxLQUFLc0IsSUFBSTt3QkFDZkssVUFBVUY7b0JBQ2Q7Z0JBQ0o7WUFDSixHQUFHRyxJQUFJLENBQUNsRCw2Q0FBUyxDQUFDLENBQUNvRCxNQUFPO29CQUNsQkE7b0JBQ0FDLFlBQVl0QixRQUFRO2dCQUN4QixLQUFLL0IsK0NBQVcsQ0FBQztnQkFDakJ1RCxPQUFPLENBQUNDLFFBQVFBLGlCQUFpQnRELDJEQUFVQTtnQkFDM0N1RCxPQUFPdEMsMkNBQU1BLEdBQUcsSUFBSTtn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YyxJQUFJL0wsa0RBQWMsQ0FBQyw4REFBOERBLHNEQUFrQixDQUFDa0wsZUFBZSxJQUFJLElBQUloTCwyREFBVUEsS0FBS0YsNkNBQVMsQ0FBQyxDQUFDLEVBQUVrTSxZQUFZLEVBQUUsR0FBR0EsZUFBZWxNLCtDQUFXLENBQUM7UUFDclB1RCxPQUFPLENBQUM0SSxNQUFNQSxJQUFJNUIsSUFBSSxLQUFLO1FBQzNCN0csVUFBVXZELHFFQUFnQkE7SUFDOUIsSUFBSUgsOENBQVUsQ0FBQyxJQUFJLENBQUN3QixLQUFLNkssV0FBVyxHQUFHck0sNkNBQVMsQ0FBQ0Msb0RBQWdCLEdBQUdELDZDQUFTLENBQUNELHlEQUFZQSxLQUFLQyw2Q0FBUyxDQUFDLENBQUMsQ0FBQ3NCLE1BQU1pTCxXQUFXLEdBQUk7WUFDeEgzSixNQUFNdEIsS0FBS3NCLElBQUk7WUFDZlAsTUFBTWYsS0FBS2UsSUFBSTtZQUNmMEIsS0FBS3hDLFVBQVV3QyxHQUFHO1lBQ2xCd0k7WUFDQXpLLEtBQUtQLFVBQVVpTCxPQUFPO1lBQ3RCQyxRQUFRbEwsVUFBVWtMLE1BQU07WUFDeEJDLFVBQVVuTCxVQUFVbUwsUUFBUTtZQUM1QmhLLE1BQU1wQixLQUFLb0IsSUFBSTtRQUNuQjtBQUUwRCIsInNvdXJjZXMiOlsid2VicGFjazovL2V2ZW50bHkvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvY2xpZW50L2luZGV4LmpzPzZmNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQXJyIGZyb20gJ2VmZmVjdC9BcnJheSc7XG5pbXBvcnQgeyB1bnNhZmVDb2VyY2UgfSBmcm9tICdlZmZlY3QvRnVuY3Rpb24nO1xuaW1wb3J0ICogYXMgTWljcm8gZnJvbSAnZWZmZWN0L01pY3JvJztcbmltcG9ydCAqIGFzIE9wdGlvbiBmcm9tICdlZmZlY3QvT3B0aW9uJztcbmltcG9ydCB7IFJldHJ5RXJyb3IsIGV4cG9uZW50aWFsRGVsYXksIGNvbnRlbnREaXNwb3NpdGlvbiwgZmV0Y2hFZmYsIHBhcnNlUmVzcG9uc2VKc29uLCBVcGxvYWRUaGluZ0Vycm9yLCBnZXRFcnJvclR5cGVGcm9tU3RhdHVzQ29kZSwgZ2V0VHlwZUZyb21GaWxlTmFtZSwgb2JqZWN0S2V5cywgZmlsZVNpemVUb0J5dGVzLCByZXNvbHZlTWF5YmVVcmxBcmcsIEZldGNoQ29udGV4dCwgVXBsb2FkQWJvcnRlZEVycm9yLCBpc09iamVjdCB9IGZyb20gJ0B1cGxvYWR0aGluZy9zaGFyZWQnO1xuZXhwb3J0IHsgVXBsb2FkQWJvcnRlZEVycm9yLCBnZW5lcmF0ZUNsaWVudERyb3B6b25lQWNjZXB0LCBnZW5lcmF0ZU1pbWVUeXBlcywgZ2VuZXJhdGVQZXJtaXR0ZWRGaWxlVHlwZXMgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcbmltcG9ydCB7IGlzVGVzdCB9IGZyb20gJ3N0ZC1lbnYnO1xuXG52YXIgdmVyc2lvbiQxID0gXCI2LjEzLjNcIjtcblxuY29uc3QgdXBsb2FkTXVsdGlwYXJ0V2l0aFByb2dyZXNzID0gKGZpbGUsIHByZXNpZ25lZCwgb3B0cyk9Pk1pY3JvLmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgIGxldCB1cGxvYWRlZEJ5dGVzID0gMDtcbiAgICAgICAgY29uc3QgZXRhZ3MgPSB5aWVsZCogTWljcm8uZm9yRWFjaChwcmVzaWduZWQudXJscywgKHVybCwgaW5kZXgpPT57XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBwcmVzaWduZWQuY2h1bmtTaXplICogaW5kZXg7XG4gICAgICAgICAgICBjb25zdCBlbmQgPSBNYXRoLm1pbihvZmZzZXQgKyBwcmVzaWduZWQuY2h1bmtTaXplLCBmaWxlLnNpemUpO1xuICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBmaWxlLnNsaWNlKG9mZnNldCwgZW5kKTtcbiAgICAgICAgICAgIHJldHVybiB1cGxvYWRQYXJ0KHtcbiAgICAgICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICAgICAgY2h1bms6IGNodW5rLFxuICAgICAgICAgICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbjogcHJlc2lnbmVkLmNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgICAgICAgICBmaWxlVHlwZTogZmlsZS50eXBlLFxuICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgICAgICAgICAgb25Qcm9ncmVzczogKGRlbHRhKT0+e1xuICAgICAgICAgICAgICAgICAgICB1cGxvYWRlZEJ5dGVzICs9IGRlbHRhO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwZXJjZW50ID0gdXBsb2FkZWRCeXRlcyAvIGZpbGUuc2l6ZSAqIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgb3B0cy5vblVwbG9hZFByb2dyZXNzPy4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IHBlcmNlbnRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkucGlwZShNaWNyby5tYXAoKHRhZyk9Pih7XG4gICAgICAgICAgICAgICAgICAgIHRhZyxcbiAgICAgICAgICAgICAgICAgICAgcGFydE51bWJlcjogaW5kZXggKyAxXG4gICAgICAgICAgICAgICAgfSkpLCBNaWNyby5yZXRyeSh7XG4gICAgICAgICAgICAgICAgd2hpbGU6IChlcnJvcik9PmVycm9yIGluc3RhbmNlb2YgUmV0cnlFcnJvcixcbiAgICAgICAgICAgICAgICB0aW1lczogaXNUZXN0ID8gMyA6IDEwLFxuICAgICAgICAgICAgICAgIHNjaGVkdWxlOiBleHBvbmVudGlhbERlbGF5KClcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgY29uY3VycmVuY3k6IFwiaW5oZXJpdFwiXG4gICAgICAgIH0pLnBpcGUoTWljcm8udGFwRXJyb3IoKGVycm9yKT0+b3B0cy5yZXBvcnRFdmVudFRvVVQoXCJmYWlsdXJlXCIsIHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5OiBwcmVzaWduZWQua2V5LFxuICAgICAgICAgICAgICAgIHVwbG9hZElkOiBwcmVzaWduZWQudXBsb2FkSWQsXG4gICAgICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICBzdG9yYWdlUHJvdmlkZXJFcnJvcjogU3RyaW5nKGVycm9yKVxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgLy8gVGVsbCB0aGUgc2VydmVyIHRoYXQgdGhlIHVwbG9hZCBpcyBjb21wbGV0ZVxuICAgICAgICB5aWVsZCogb3B0cy5yZXBvcnRFdmVudFRvVVQoXCJtdWx0aXBhcnQtY29tcGxldGVcIiwge1xuICAgICAgICAgICAgdXBsb2FkSWQ6IHByZXNpZ25lZC51cGxvYWRJZCxcbiAgICAgICAgICAgIGZpbGVLZXk6IHByZXNpZ25lZC5rZXksXG4gICAgICAgICAgICBldGFnc1xuICAgICAgICB9KTtcbiAgICB9KTtcbmNvbnN0IHVwbG9hZFBhcnQgPSAob3B0cyk9Pk1pY3JvLmFzeW5jKChyZXN1bWUpPT57XG4gICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4aHIub3BlbihcIlBVVFwiLCBvcHRzLnVybCwgdHJ1ZSk7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIG9wdHMuZmlsZVR5cGUpO1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtRGlzcG9zaXRpb25cIiwgY29udGVudERpc3Bvc2l0aW9uKG9wdHMuY29udGVudERpc3Bvc2l0aW9uLCBvcHRzLmZpbGVOYW1lKSk7XG4gICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKT0+e1xuICAgICAgICAgICAgY29uc3QgZXRhZyA9IHhoci5nZXRSZXNwb25zZUhlYWRlcihcIkV0YWdcIik7XG4gICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8PSAyOTkgJiYgZXRhZykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bWUoTWljcm8uc3VjY2VlZChldGFnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdW1lKE1pY3JvLmZhaWwobmV3IFJldHJ5RXJyb3IoKSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoKT0+cmVzdW1lKE1pY3JvLmZhaWwobmV3IFJldHJ5RXJyb3IoKSkpKTtcbiAgICAgICAgbGV0IGxhc3RQcm9ncmVzcyA9IDA7XG4gICAgICAgIHhoci51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsIChlKT0+e1xuICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBlLmxvYWRlZCAtIGxhc3RQcm9ncmVzcztcbiAgICAgICAgICAgIGxhc3RQcm9ncmVzcyArPSBkZWx0YTtcbiAgICAgICAgICAgIG9wdHMub25Qcm9ncmVzcyhkZWx0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICB4aHIuc2VuZChvcHRzLmNodW5rKTtcbiAgICAgICAgLy8gQ2xlYW51cCBmdW5jdGlvbiB0aGF0IHJ1bnMgb24gaW50ZXJydXB0aW9uXG4gICAgICAgIHJldHVybiBNaWNyby5zeW5jKCgpPT54aHIuYWJvcnQoKSk7XG4gICAgfSk7XG5cbmNvbnN0IHVwbG9hZFByZXNpZ25lZFBvc3RXaXRoUHJvZ3Jlc3MgPSAoZmlsZSwgcHJlc2lnbmVkLCBvcHRzKT0+TWljcm8uYXN5bmMoKHJlc3VtZSk9PntcbiAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCBwcmVzaWduZWQudXJsKTtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi94bWxcIik7XG4gICAgICAgIHhoci51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsICh7IGxvYWRlZCwgdG90YWwgfSk9PntcbiAgICAgICAgICAgIG9wdHMub25VcGxvYWRQcm9ncmVzcz8uKHtcbiAgICAgICAgICAgICAgICBmaWxlOiBmaWxlLm5hbWUsXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IGxvYWRlZCAvIHRvdGFsICogMTAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKT0+cmVzdW1lKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDAgPyBNaWNyby5zdWNjZWVkKG51bGwpIDogb3B0cy5yZXBvcnRFdmVudFRvVVQoXCJmYWlsdXJlXCIsIHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5OiBwcmVzaWduZWQua2V5LFxuICAgICAgICAgICAgICAgIHVwbG9hZElkOiBudWxsLFxuICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgICAgICAgICAgc3RvcmFnZVByb3ZpZGVyRXJyb3I6IHhoci5yZXNwb25zZVRleHRcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgKCk9PnJlc3VtZShvcHRzLnJlcG9ydEV2ZW50VG9VVChcImZhaWx1cmVcIiwge1xuICAgICAgICAgICAgICAgIGZpbGVLZXk6IHByZXNpZ25lZC5rZXksXG4gICAgICAgICAgICAgICAgdXBsb2FkSWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGUubmFtZVxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgT2JqZWN0LmVudHJpZXMocHJlc2lnbmVkLmZpZWxkcykuZm9yRWFjaCgoW2ssIHZdKT0+Zm9ybURhdGEuYXBwZW5kKGssIHYpKTtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTsgLy8gRmlsZSBkYXRhICoqTVVTVCBHTyBMQVNUKipcbiAgICAgICAgeGhyLnNlbmQoZm9ybURhdGEpO1xuICAgICAgICByZXR1cm4gTWljcm8uc3luYygoKT0+e1xuICAgICAgICAgICAgeGhyLmFib3J0KCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG5jb25zdCBtYXliZVBhcnNlUmVzcG9uc2VYTUwgPSAobWF5YmVYbWwpPT57XG4gICAgY29uc3QgY29kZU1hdGNoID0gbWF5YmVYbWwubWF0Y2goLzxDb2RlPiguKj8pPFxcL0NvZGU+L3MpO1xuICAgIGNvbnN0IG1lc3NhZ2VNYXRjaCA9IG1heWJlWG1sLm1hdGNoKC88TWVzc2FnZT4oLio/KTxcXC9NZXNzYWdlPi9zKTtcbiAgICBjb25zdCBjb2RlID0gY29kZU1hdGNoPy5bMV07XG4gICAgY29uc3QgbWVzc2FnZSA9IG1lc3NhZ2VNYXRjaD8uWzFdO1xuICAgIGlmICghY29kZSB8fCAhbWVzc2FnZSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29kZTogczNDb2RlVG9VcGxvYWRUaGluZ0NvZGVbY29kZV0gPz8gREVGQVVMVF9FUlJPUl9DT0RFLFxuICAgICAgICBtZXNzYWdlXG4gICAgfTtcbn07XG4vKipcbiAqIE1hcCBTMyBlcnJvciBjb2RlcyB0byBVcGxvYWRUaGluZyBlcnJvciBjb2Rlc1xuICpcbiAqIFRoaXMgaXMgYSBzdWJzZXQgb2YgdGhlIFMzIGVycm9yIGNvZGVzLCBiYXNlZCBvbiB3aGF0IHNlZW1lZCBtb3N0IGxpa2VseSB0b1xuICogb2NjdXIgaW4gdXBsb2FkdGhpbmcuIEZvciBhIGZ1bGwgbGlzdCBvZiBTMyBlcnJvciBjb2Rlcywgc2VlOlxuICogaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL0FtYXpvblMzL2xhdGVzdC9BUEkvRXJyb3JSZXNwb25zZXMuaHRtbFxuICovIGNvbnN0IERFRkFVTFRfRVJST1JfQ09ERSA9IFwiVVBMT0FEX0ZBSUxFRFwiO1xuY29uc3QgczNDb2RlVG9VcGxvYWRUaGluZ0NvZGUgPSB7XG4gICAgQWNjZXNzRGVuaWVkOiBcIkZPUkJJRERFTlwiLFxuICAgIEVudGl0eVRvb1NtYWxsOiBcIlRPT19TTUFMTFwiLFxuICAgIEVudGl0eVRvb0xhcmdlOiBcIlRPT19MQVJHRVwiLFxuICAgIEV4cGlyZWRUb2tlbjogXCJGT1JCSURERU5cIixcbiAgICBJbmNvcnJlY3ROdW1iZXJPZkZpbGVzSW5Qb3N0UmVxdWVzdDogXCJUT09fTUFOWV9GSUxFU1wiLFxuICAgIEludGVybmFsRXJyb3I6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG4gICAgS2V5VG9vTG9uZ0Vycm9yOiBcIktFWV9UT09fTE9OR1wiLFxuICAgIE1heE1lc3NhZ2VMZW5ndGhFeGNlZWRlZDogXCJUT09fTEFSR0VcIlxufTtcblxuY29uc3QgY3JlYXRlQVBJUmVxdWVzdFVybCA9IChjb25maWcpPT57XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChjb25maWcudXJsKTtcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXModXJsLnNlYXJjaCk7XG4gICAgcXVlcnlQYXJhbXMuc2V0KFwiYWN0aW9uVHlwZVwiLCBjb25maWcuYWN0aW9uVHlwZSk7XG4gICAgcXVlcnlQYXJhbXMuc2V0KFwic2x1Z1wiLCBjb25maWcuc2x1Zyk7XG4gICAgdXJsLnNlYXJjaCA9IHF1ZXJ5UGFyYW1zLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIHVybDtcbn07XG4vKipcbiAqIENyZWF0ZXMgYSBcImNsaWVudFwiIGZvciByZXBvcnRpbmcgZXZlbnRzIHRvIHRoZSBVcGxvYWRUaGluZyBzZXJ2ZXIgdmlhIHRoZSB1c2VyJ3MgQVBJIGVuZHBvaW50LlxuICogRXZlbnRzIGFyZSBoYW5kbGVkIGluIFwiLi9oYW5kbGVyLnRzIHN0YXJ0aW5nIGF0IEwxMTJcIlxuICovIGNvbnN0IGNyZWF0ZVVUUmVwb3J0ZXIgPSAoY2ZnKT0+KHR5cGUsIHBheWxvYWQpPT5NaWNyby5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgY29uc3QgdXJsID0gY3JlYXRlQVBJUmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgdXJsOiBjZmcudXJsLFxuICAgICAgICAgICAgICAgIHNsdWc6IGNmZy5lbmRwb2ludCxcbiAgICAgICAgICAgICAgICBhY3Rpb25UeXBlOiB0eXBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzID0gdHlwZW9mIGNmZy5oZWFkZXJzID09PSBcImZ1bmN0aW9uXCIgPyBjZmcuaGVhZGVycygpIDogY2ZnLmhlYWRlcnM7XG4gICAgICAgICAgICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzID0geWllbGQqIE1pY3JvLnByb21pc2UoKCk9PmhlYWRlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCogZmV0Y2hFZmYodXJsLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctcGFja2FnZVwiOiBjZmcucGFja2FnZSxcbiAgICAgICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogdmVyc2lvbiQxLFxuICAgICAgICAgICAgICAgICAgICAuLi5oZWFkZXJzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkucGlwZShNaWNyby5hbmRUaGVuKHBhcnNlUmVzcG9uc2VKc29uKSwgLyoqXG4gICAgICAgICAqIFdlIGRvbid0IF9uZWVkXyB0byB2YWxpZGF0ZSB0aGUgcmVzcG9uc2UgaGVyZSwganVzdCBjYXN0IGl0IGZvciBub3cuXG4gICAgICAgICAqIEFzIG9mIG5vdywgQGVmZmVjdC9zY2hlbWEgaW5jbHVkZXMgcXVpdGUgYSBmZXcgYnl0ZXMgd2UgY3V0IG91dCBieSB0aGlzLi4uXG4gICAgICAgICAqIFdlIGhhdmUgXCJzdHJvbmcgdHlwaW5nXCIgb24gdGhlIGJhY2tlbmQgdGhhdCBlbnN1cmVzIHRoZSBzaGFwZSBzaG91bGQgbWF0Y2guXG4gICAgICAgICAqLyBNaWNyby5tYXAodW5zYWZlQ29lcmNlKSwgTWljcm8uY2F0Y2hUYWcoXCJGZXRjaEVycm9yXCIsIChlKT0+TWljcm8uZmFpbChuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiSU5URVJOQUxfQ0xJRU5UX0VSUk9SXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gcmVwb3J0IGV2ZW50IFwiJHt0eXBlfVwiIHRvIFVwbG9hZFRoaW5nIHNlcnZlcmAsXG4gICAgICAgICAgICAgICAgICAgIGNhdXNlOiBlXG4gICAgICAgICAgICAgICAgfSkpKSwgTWljcm8uY2F0Y2hUYWcoXCJCYWRSZXF1ZXN0RXJyb3JcIiwgKGUpPT5NaWNyby5mYWlsKG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogZ2V0RXJyb3JUeXBlRnJvbVN0YXR1c0NvZGUoZS5zdGF0dXMpLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlLmdldE1lc3NhZ2UoKSxcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGUuanNvblxuICAgICAgICAgICAgICAgIH0pKSksIE1pY3JvLmNhdGNoVGFnKFwiSW52YWxpZEpzb25cIiwgKGUpPT5NaWNyby5mYWlsKG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJJTlRFUk5BTF9DTElFTlRfRVJST1JcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcGFyc2UgcmVzcG9uc2UgZnJvbSBVcGxvYWRUaGluZyBzZXJ2ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGVcbiAgICAgICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgICAgIHN3aXRjaCh0eXBlKXtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZmFpbHVyZVwiOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aHkgaXNuJ3QgdGhpcyBuYXJyb3dlZCBhdXRvbWF0aWNhbGx5P1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IHBheWxvYWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBtYXliZVBhcnNlUmVzcG9uc2VYTUwocC5zdG9yYWdlUHJvdmlkZXJFcnJvciA/PyBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQ/Lm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogcGFyc2VkLmNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHBhcnNlZC5tZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEZhaWxlZCB0byB1cGxvYWQgZmlsZSAke3AuZmlsZU5hbWV9IHRvIFMzYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F1c2U6IHAuc3RvcmFnZVByb3ZpZGVyRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9KTtcblxuY29uc3QgdmVyc2lvbiA9IHZlcnNpb24kMTtcbi8qKlxuICogVmFsaWRhdGUgdGhhdCBhIGZpbGUgaXMgb2YgYSB2YWxpZCB0eXBlIGdpdmVuIGEgcm91dGUgY29uZmlnXG4gKiBAcHVibGljXG4gKi8gY29uc3QgaXNWYWxpZEZpbGVUeXBlID0gKGZpbGUsIHJvdXRlQ29uZmlnKT0+TWljcm8ucnVuU3luYyhnZXRUeXBlRnJvbUZpbGVOYW1lKGZpbGUubmFtZSwgb2JqZWN0S2V5cyhyb3V0ZUNvbmZpZykpLnBpcGUoTWljcm8ubWFwKCh0eXBlKT0+ZmlsZS50eXBlLmluY2x1ZGVzKHR5cGUpKSwgTWljcm8ub3JFbHNlU3VjY2VlZCgoKT0+ZmFsc2UpKSk7XG4vKipcbiAqIFZhbGlkYXRlIHRoYXQgYSBmaWxlIGlzIG9mIGEgdmFsaWQgc2l6ZSBnaXZlbiBhIHJvdXRlIGNvbmZpZ1xuICogQHB1YmxpY1xuICovIGNvbnN0IGlzVmFsaWRGaWxlU2l6ZSA9IChmaWxlLCByb3V0ZUNvbmZpZyk9Pk1pY3JvLnJ1blN5bmMoZ2V0VHlwZUZyb21GaWxlTmFtZShmaWxlLm5hbWUsIG9iamVjdEtleXMocm91dGVDb25maWcpKS5waXBlKE1pY3JvLmZsYXRNYXAoKHR5cGUpPT5maWxlU2l6ZVRvQnl0ZXMocm91dGVDb25maWdbdHlwZV0ubWF4RmlsZVNpemUpKSwgTWljcm8ubWFwKChtYXhGaWxlU2l6ZSk9PmZpbGUuc2l6ZSA8PSBtYXhGaWxlU2l6ZSksIE1pY3JvLm9yRWxzZVN1Y2NlZWQoKCk9PmZhbHNlKSkpO1xuLyoqXG4gKiBHZW5lcmF0ZSBhIHR5cGVkIHVwbG9hZGVyIGZvciBhIGdpdmVuIEZpbGVSb3V0ZXJcbiAqIEBwdWJsaWNcbiAqLyBjb25zdCBnZW5VcGxvYWRlciA9IChpbml0T3B0cyk9PntcbiAgICByZXR1cm4gKGVuZHBvaW50LCBvcHRzKT0+dXBsb2FkRmlsZXNJbnRlcm5hbChlbmRwb2ludCwge1xuICAgICAgICAgICAgLi4ub3B0cyxcbiAgICAgICAgICAgIHVybDogcmVzb2x2ZU1heWJlVXJsQXJnKGluaXRPcHRzPy51cmwpLFxuICAgICAgICAgICAgcGFja2FnZTogaW5pdE9wdHMucGFja2FnZSxcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgICAgIGlucHV0OiBvcHRzLmlucHV0XG4gICAgICAgIH0pLnBpcGUoTWljcm8ucHJvdmlkZVNlcnZpY2UoRmV0Y2hDb250ZXh0LCB7XG4gICAgICAgICAgICBmZXRjaDogZ2xvYmFsVGhpcy5mZXRjaC5iaW5kKGdsb2JhbFRoaXMpLFxuICAgICAgICAgICAgYmFzZUhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiB2ZXJzaW9uJDEsXG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWFwaS1rZXlcIjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1mZS1wYWNrYWdlXCI6IGluaXRPcHRzLnBhY2thZ2UsXG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWJlLWFkYXB0ZXJcIjogdW5kZWZpbmVkXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCAoZSk9Pk1pY3JvLnJ1blByb21pc2VFeGl0KGUsIG9wdHMuc2lnbmFsID8ge1xuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0cy5zaWduYWxcbiAgICAgICAgICAgIH0gOiB7fSkpLnRoZW4oKGV4aXQpPT57XG4gICAgICAgICAgICBpZiAoZXhpdC5fdGFnID09PSBcIlJpZ2h0XCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhpdC5yaWdodDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhpdC5sZWZ0Ll90YWcgPT09IFwiSW50ZXJydXB0XCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkQWJvcnRlZEVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBNaWNyby5jYXVzZVNxdWFzaChleGl0LmxlZnQpO1xuICAgICAgICB9KTtcbn07XG5jb25zdCB1cGxvYWRGaWxlc0ludGVybmFsID0gKGVuZHBvaW50LCBvcHRzKT0+e1xuICAgIC8vIGNsYXNzaWMgc2VydmljZSByaWdodCBoZXJlXG4gICAgY29uc3QgcmVwb3J0RXZlbnRUb1VUID0gY3JlYXRlVVRSZXBvcnRlcih7XG4gICAgICAgIGVuZHBvaW50OiBTdHJpbmcoZW5kcG9pbnQpLFxuICAgICAgICBwYWNrYWdlOiBvcHRzLnBhY2thZ2UsXG4gICAgICAgIHVybDogcmVzb2x2ZU1heWJlVXJsQXJnKG9wdHMudXJsKSxcbiAgICAgICAgaGVhZGVyczogb3B0cy5oZWFkZXJzXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcG9ydEV2ZW50VG9VVChcInVwbG9hZFwiLCB7XG4gICAgICAgIGlucHV0OiBcImlucHV0XCIgaW4gb3B0cyA/IG9wdHMuaW5wdXQgOiBudWxsLFxuICAgICAgICBmaWxlczogb3B0cy5maWxlcy5tYXAoKGYpPT4oe1xuICAgICAgICAgICAgICAgIG5hbWU6IGYubmFtZSxcbiAgICAgICAgICAgICAgICBzaXplOiBmLnNpemUsXG4gICAgICAgICAgICAgICAgdHlwZTogZi50eXBlXG4gICAgICAgICAgICB9KSlcbiAgICB9KS5waXBlKE1pY3JvLmZsYXRNYXAoKHJlc3BvbnNlcyk9Pk1pY3JvLmZvckVhY2gocmVzcG9uc2VzLCAocHJlc2lnbmVkKT0+dXBsb2FkRmlsZShTdHJpbmcoZW5kcG9pbnQpLCB7XG4gICAgICAgICAgICAgICAgLi4ub3B0cyxcbiAgICAgICAgICAgICAgICByZXBvcnRFdmVudFRvVVRcbiAgICAgICAgICAgIH0sIHByZXNpZ25lZCkucGlwZShNaWNyby5vbkludGVycnVwdChyZXBvcnRFdmVudFRvVVQoXCJmYWlsdXJlXCIsIHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5OiBwcmVzaWduZWQua2V5LFxuICAgICAgICAgICAgICAgIHVwbG9hZElkOiBcInVwbG9hZElkXCIgaW4gcHJlc2lnbmVkID8gcHJlc2lnbmVkLnVwbG9hZElkIDogbnVsbCxcbiAgICAgICAgICAgICAgICBmaWxlTmFtZTogcHJlc2lnbmVkLmZpbGVOYW1lXG4gICAgICAgICAgICB9KS5waXBlKE1pY3JvLmlnbm9yZSkpKSwge1xuICAgICAgICAgICAgY29uY3VycmVuY3k6IDZcbiAgICAgICAgfSkpKTtcbn07XG5jb25zdCBpc1BvbGxpbmdSZXNwb25zZSA9IChpbnB1dCk9PntcbiAgICBpZiAoIWlzT2JqZWN0KGlucHV0KSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChpbnB1dC5zdGF0dXMgPT09IFwiZG9uZVwiKSByZXR1cm4gXCJjYWxsYmFja0RhdGFcIiBpbiBpbnB1dDtcbiAgICByZXR1cm4gaW5wdXQuc3RhdHVzID09PSBcInN0aWxsIHdhaXRpbmdcIjtcbn07XG5jb25zdCBpc1BvbGxpbmdEb25lID0gKGlucHV0KT0+e1xuICAgIHJldHVybiBpbnB1dC5zdGF0dXMgPT09IFwiZG9uZVwiO1xufTtcbmNvbnN0IHVwbG9hZEZpbGUgPSAoc2x1Zywgb3B0cywgcHJlc2lnbmVkKT0+QXJyLmZpbmRGaXJzdChvcHRzLmZpbGVzLCAoZmlsZSk9PmZpbGUubmFtZSA9PT0gcHJlc2lnbmVkLmZpbGVOYW1lKS5waXBlKE1pY3JvLmZyb21PcHRpb24sIE1pY3JvLm1hcEVycm9yKCgpPT57XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBmaWxlIGZvdW5kIGZvciBwcmVzaWduZWQgVVJMXCIsIHByZXNpZ25lZCk7XG4gICAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiBcIk5PVF9GT1VORFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJObyBmaWxlIGZvdW5kIGZvciBwcmVzaWduZWQgVVJMXCIsXG4gICAgICAgICAgICBjYXVzZTogYEV4cGVjdGVkIGZpbGUgd2l0aCBuYW1lICR7cHJlc2lnbmVkLmZpbGVOYW1lfSBidXQgZ290ICcke29wdHMuZmlsZXMuam9pbihcIixcIil9J2BcbiAgICAgICAgfSk7XG4gICAgfSksIE1pY3JvLnRhcCgoZmlsZSk9Pm9wdHMub25VcGxvYWRCZWdpbj8uKHtcbiAgICAgICAgICAgIGZpbGU6IGZpbGUubmFtZVxuICAgICAgICB9KSksIE1pY3JvLnRhcCgoZmlsZSk9PlwidXJsc1wiIGluIHByZXNpZ25lZCA/IHVwbG9hZE11bHRpcGFydFdpdGhQcm9ncmVzcyhmaWxlLCBwcmVzaWduZWQsIG9wdHMpIDogdXBsb2FkUHJlc2lnbmVkUG9zdFdpdGhQcm9ncmVzcyhmaWxlLCBwcmVzaWduZWQsIG9wdHMpKSwgTWljcm8uemlwKGZldGNoRWZmKHByZXNpZ25lZC5wb2xsaW5nVXJsLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHByZXNpZ25lZC5wb2xsaW5nSnd0XG4gICAgICAgIH1cbiAgICB9KS5waXBlKE1pY3JvLmZsYXRNYXAocGFyc2VSZXNwb25zZUpzb24pLCBNaWNyby5jYXRjaFRhZyhcIkJhZFJlcXVlc3RFcnJvclwiLCAoZSk9Pk1pY3JvLmZhaWwobmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogZ2V0RXJyb3JUeXBlRnJvbVN0YXR1c0NvZGUoZS5zdGF0dXMpLFxuICAgICAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxuICAgICAgICAgICAgY2F1c2U6IGVcbiAgICAgICAgfSkpKSwgTWljcm8uZmlsdGVyT3JGYWlsQ2F1c2UoaXNQb2xsaW5nUmVzcG9uc2UsIChfKT0+TWljcm8uY2F1c2VEaWUoXCJyZWNlaXZlZCBhIG5vbiBQb2xsaW5nUmVzcG9uc2UgZnJvbSB0aGUgcG9sbGluZyBlbmRwb2ludFwiKSksIE1pY3JvLmZpbHRlck9yRmFpbChpc1BvbGxpbmdEb25lLCAoKT0+bmV3IFJldHJ5RXJyb3IoKSksIE1pY3JvLm1hcCgoeyBjYWxsYmFja0RhdGEgfSk9PmNhbGxiYWNrRGF0YSksIE1pY3JvLnJldHJ5KHtcbiAgICAgICAgd2hpbGU6IChyZXMpPT5yZXMuX3RhZyA9PT0gXCJSZXRyeUVycm9yXCIsXG4gICAgICAgIHNjaGVkdWxlOiBleHBvbmVudGlhbERlbGF5KClcbiAgICB9KSwgTWljcm8ud2hlbigoKT0+IW9wdHMuc2tpcFBvbGxpbmcpLCBNaWNyby5tYXAoT3B0aW9uLmdldE9yTnVsbCksIE1pY3JvLm1hcCh1bnNhZmVDb2VyY2UpKSksIE1pY3JvLm1hcCgoW2ZpbGUsIHNlcnZlckRhdGFdKT0+KHtcbiAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgICAgICAgIGtleTogcHJlc2lnbmVkLmtleSxcbiAgICAgICAgICAgIHNlcnZlckRhdGEsXG4gICAgICAgICAgICB1cmw6IHByZXNpZ25lZC5maWxlVXJsLFxuICAgICAgICAgICAgYXBwVXJsOiBwcmVzaWduZWQuYXBwVXJsLFxuICAgICAgICAgICAgY3VzdG9tSWQ6IHByZXNpZ25lZC5jdXN0b21JZCxcbiAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZVxuICAgICAgICB9KSkpO1xuXG5leHBvcnQgeyBnZW5VcGxvYWRlciwgaXNWYWxpZEZpbGVTaXplLCBpc1ZhbGlkRmlsZVR5cGUsIHZlcnNpb24gfTtcbiJdLCJuYW1lcyI6WyJBcnIiLCJ1bnNhZmVDb2VyY2UiLCJNaWNybyIsIk9wdGlvbiIsIlJldHJ5RXJyb3IiLCJleHBvbmVudGlhbERlbGF5IiwiY29udGVudERpc3Bvc2l0aW9uIiwiZmV0Y2hFZmYiLCJwYXJzZVJlc3BvbnNlSnNvbiIsIlVwbG9hZFRoaW5nRXJyb3IiLCJnZXRFcnJvclR5cGVGcm9tU3RhdHVzQ29kZSIsImdldFR5cGVGcm9tRmlsZU5hbWUiLCJvYmplY3RLZXlzIiwiZmlsZVNpemVUb0J5dGVzIiwicmVzb2x2ZU1heWJlVXJsQXJnIiwiRmV0Y2hDb250ZXh0IiwiVXBsb2FkQWJvcnRlZEVycm9yIiwiaXNPYmplY3QiLCJnZW5lcmF0ZUNsaWVudERyb3B6b25lQWNjZXB0IiwiZ2VuZXJhdGVNaW1lVHlwZXMiLCJnZW5lcmF0ZVBlcm1pdHRlZEZpbGVUeXBlcyIsImlzVGVzdCIsInZlcnNpb24kMSIsInVwbG9hZE11bHRpcGFydFdpdGhQcm9ncmVzcyIsImZpbGUiLCJwcmVzaWduZWQiLCJvcHRzIiwiZ2VuIiwidXBsb2FkZWRCeXRlcyIsImV0YWdzIiwiZm9yRWFjaCIsInVybHMiLCJ1cmwiLCJpbmRleCIsIm9mZnNldCIsImNodW5rU2l6ZSIsImVuZCIsIk1hdGgiLCJtaW4iLCJzaXplIiwiY2h1bmsiLCJzbGljZSIsInVwbG9hZFBhcnQiLCJmaWxlVHlwZSIsInR5cGUiLCJmaWxlTmFtZSIsIm5hbWUiLCJvblByb2dyZXNzIiwiZGVsdGEiLCJwZXJjZW50Iiwib25VcGxvYWRQcm9ncmVzcyIsInByb2dyZXNzIiwicGlwZSIsIm1hcCIsInRhZyIsInBhcnROdW1iZXIiLCJyZXRyeSIsIndoaWxlIiwiZXJyb3IiLCJ0aW1lcyIsInNjaGVkdWxlIiwiY29uY3VycmVuY3kiLCJ0YXBFcnJvciIsInJlcG9ydEV2ZW50VG9VVCIsImZpbGVLZXkiLCJrZXkiLCJ1cGxvYWRJZCIsInN0b3JhZ2VQcm92aWRlckVycm9yIiwiU3RyaW5nIiwiYXN5bmMiLCJyZXN1bWUiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV0YWciLCJnZXRSZXNwb25zZUhlYWRlciIsInN0YXR1cyIsInN1Y2NlZWQiLCJmYWlsIiwibGFzdFByb2dyZXNzIiwidXBsb2FkIiwiZSIsImxvYWRlZCIsInNlbmQiLCJzeW5jIiwiYWJvcnQiLCJ1cGxvYWRQcmVzaWduZWRQb3N0V2l0aFByb2dyZXNzIiwidG90YWwiLCJyZXNwb25zZVRleHQiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiT2JqZWN0IiwiZW50cmllcyIsImZpZWxkcyIsImsiLCJ2IiwiYXBwZW5kIiwibWF5YmVQYXJzZVJlc3BvbnNlWE1MIiwibWF5YmVYbWwiLCJjb2RlTWF0Y2giLCJtYXRjaCIsIm1lc3NhZ2VNYXRjaCIsImNvZGUiLCJtZXNzYWdlIiwiczNDb2RlVG9VcGxvYWRUaGluZ0NvZGUiLCJERUZBVUxUX0VSUk9SX0NPREUiLCJBY2Nlc3NEZW5pZWQiLCJFbnRpdHlUb29TbWFsbCIsIkVudGl0eVRvb0xhcmdlIiwiRXhwaXJlZFRva2VuIiwiSW5jb3JyZWN0TnVtYmVyT2ZGaWxlc0luUG9zdFJlcXVlc3QiLCJJbnRlcm5hbEVycm9yIiwiS2V5VG9vTG9uZ0Vycm9yIiwiTWF4TWVzc2FnZUxlbmd0aEV4Y2VlZGVkIiwiY3JlYXRlQVBJUmVxdWVzdFVybCIsImNvbmZpZyIsIlVSTCIsInF1ZXJ5UGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwic2VhcmNoIiwic2V0IiwiYWN0aW9uVHlwZSIsInNsdWciLCJ0b1N0cmluZyIsImNyZWF0ZVVUUmVwb3J0ZXIiLCJjZmciLCJwYXlsb2FkIiwiZW5kcG9pbnQiLCJoZWFkZXJzIiwiUHJvbWlzZSIsInByb21pc2UiLCJyZXNwb25zZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicGFja2FnZSIsImFuZFRoZW4iLCJjYXRjaFRhZyIsImNhdXNlIiwiZ2V0TWVzc2FnZSIsImpzb24iLCJwIiwicGFyc2VkIiwidmVyc2lvbiIsImlzVmFsaWRGaWxlVHlwZSIsInJvdXRlQ29uZmlnIiwicnVuU3luYyIsImluY2x1ZGVzIiwib3JFbHNlU3VjY2VlZCIsImlzVmFsaWRGaWxlU2l6ZSIsImZsYXRNYXAiLCJtYXhGaWxlU2l6ZSIsImdlblVwbG9hZGVyIiwiaW5pdE9wdHMiLCJ1cGxvYWRGaWxlc0ludGVybmFsIiwiaW5wdXQiLCJwcm92aWRlU2VydmljZSIsImZldGNoIiwiZ2xvYmFsVGhpcyIsImJpbmQiLCJiYXNlSGVhZGVycyIsInVuZGVmaW5lZCIsInJ1blByb21pc2VFeGl0Iiwic2lnbmFsIiwidGhlbiIsImV4aXQiLCJfdGFnIiwicmlnaHQiLCJsZWZ0IiwiY2F1c2VTcXVhc2giLCJmaWxlcyIsImYiLCJyZXNwb25zZXMiLCJ1cGxvYWRGaWxlIiwib25JbnRlcnJ1cHQiLCJpZ25vcmUiLCJpc1BvbGxpbmdSZXNwb25zZSIsImlzUG9sbGluZ0RvbmUiLCJmaW5kRmlyc3QiLCJmcm9tT3B0aW9uIiwibWFwRXJyb3IiLCJjb25zb2xlIiwiam9pbiIsInRhcCIsIm9uVXBsb2FkQmVnaW4iLCJ6aXAiLCJwb2xsaW5nVXJsIiwiYXV0aG9yaXphdGlvbiIsInBvbGxpbmdKd3QiLCJmaWx0ZXJPckZhaWxDYXVzZSIsIl8iLCJjYXVzZURpZSIsImZpbHRlck9yRmFpbCIsImNhbGxiYWNrRGF0YSIsInJlcyIsIndoZW4iLCJza2lwUG9sbGluZyIsImdldE9yTnVsbCIsInNlcnZlckRhdGEiLCJmaWxlVXJsIiwiYXBwVXJsIiwiY3VzdG9tSWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/client/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/internal/types.js":
/*!****************************************************!*\
  !*** ./node_modules/uploadthing/internal/types.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTFiles: () => (/* binding */ UTFiles),\n/* harmony export */   VALID_ACTION_TYPES: () => (/* binding */ VALID_ACTION_TYPES),\n/* harmony export */   VALID_UT_HOOKS: () => (/* binding */ VALID_UT_HOOKS),\n/* harmony export */   isActionType: () => (/* binding */ isActionType),\n/* harmony export */   isUploadThingHook: () => (/* binding */ isUploadThingHook)\n/* harmony export */ });\n/**\n * Marker used to append a `customId` to the incoming file data in `.middleware()`\n * @example\n * ```ts\n * .middleware((opts) => {\n *   return {\n *     [UTFiles]: opts.files.map((file) => ({\n *       ...file,\n *       customId: generateId(),\n *     }))\n *   };\n * })\n * ```\n */ const UTFiles = Symbol(\"uploadthing-custom-id-symbol\");\n/**\n * Valid options for the `?actionType` query param\n */ const VALID_ACTION_TYPES = [\n    \"upload\",\n    \"failure\",\n    \"multipart-complete\"\n];\nconst isActionType = (input)=>typeof input === \"string\" && VALID_ACTION_TYPES.includes(input);\n/**\n * Valid options for the `uploadthing-hook` header\n * for requests coming from UT server\n */ const VALID_UT_HOOKS = [\n    \"callback\"\n];\nconst isUploadThingHook = (input)=>typeof input === \"string\" && VALID_UT_HOOKS.includes(input);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvaW50ZXJuYWwvdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7OztDQWFDLEdBQUcsTUFBTUEsVUFBVUMsT0FBTztBQUMzQjs7Q0FFQyxHQUFHLE1BQU1DLHFCQUFxQjtJQUMzQjtJQUNBO0lBQ0E7Q0FDSDtBQUNELE1BQU1DLGVBQWUsQ0FBQ0MsUUFBUSxPQUFPQSxVQUFVLFlBQVlGLG1CQUFtQkcsUUFBUSxDQUFDRDtBQUN2Rjs7O0NBR0MsR0FBRyxNQUFNRSxpQkFBaUI7SUFDdkI7Q0FDSDtBQUNELE1BQU1DLG9CQUFvQixDQUFDSCxRQUFRLE9BQU9BLFVBQVUsWUFBWUUsZUFBZUQsUUFBUSxDQUFDRDtBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXZlbnRseS8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9pbnRlcm5hbC90eXBlcy5qcz84NjczIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTWFya2VyIHVzZWQgdG8gYXBwZW5kIGEgYGN1c3RvbUlkYCB0byB0aGUgaW5jb21pbmcgZmlsZSBkYXRhIGluIGAubWlkZGxld2FyZSgpYFxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiAubWlkZGxld2FyZSgob3B0cykgPT4ge1xuICogICByZXR1cm4ge1xuICogICAgIFtVVEZpbGVzXTogb3B0cy5maWxlcy5tYXAoKGZpbGUpID0+ICh7XG4gKiAgICAgICAuLi5maWxlLFxuICogICAgICAgY3VzdG9tSWQ6IGdlbmVyYXRlSWQoKSxcbiAqICAgICB9KSlcbiAqICAgfTtcbiAqIH0pXG4gKiBgYGBcbiAqLyBjb25zdCBVVEZpbGVzID0gU3ltYm9sKFwidXBsb2FkdGhpbmctY3VzdG9tLWlkLXN5bWJvbFwiKTtcbi8qKlxuICogVmFsaWQgb3B0aW9ucyBmb3IgdGhlIGA/YWN0aW9uVHlwZWAgcXVlcnkgcGFyYW1cbiAqLyBjb25zdCBWQUxJRF9BQ1RJT05fVFlQRVMgPSBbXG4gICAgXCJ1cGxvYWRcIixcbiAgICBcImZhaWx1cmVcIixcbiAgICBcIm11bHRpcGFydC1jb21wbGV0ZVwiXG5dO1xuY29uc3QgaXNBY3Rpb25UeXBlID0gKGlucHV0KT0+dHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiICYmIFZBTElEX0FDVElPTl9UWVBFUy5pbmNsdWRlcyhpbnB1dCk7XG4vKipcbiAqIFZhbGlkIG9wdGlvbnMgZm9yIHRoZSBgdXBsb2FkdGhpbmctaG9va2AgaGVhZGVyXG4gKiBmb3IgcmVxdWVzdHMgY29taW5nIGZyb20gVVQgc2VydmVyXG4gKi8gY29uc3QgVkFMSURfVVRfSE9PS1MgPSBbXG4gICAgXCJjYWxsYmFja1wiXG5dO1xuY29uc3QgaXNVcGxvYWRUaGluZ0hvb2sgPSAoaW5wdXQpPT50eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIgJiYgVkFMSURfVVRfSE9PS1MuaW5jbHVkZXMoaW5wdXQpO1xuXG5leHBvcnQgeyBVVEZpbGVzLCBWQUxJRF9BQ1RJT05fVFlQRVMsIFZBTElEX1VUX0hPT0tTLCBpc0FjdGlvblR5cGUsIGlzVXBsb2FkVGhpbmdIb29rIH07XG4iXSwibmFtZXMiOlsiVVRGaWxlcyIsIlN5bWJvbCIsIlZBTElEX0FDVElPTl9UWVBFUyIsImlzQWN0aW9uVHlwZSIsImlucHV0IiwiaW5jbHVkZXMiLCJWQUxJRF9VVF9IT09LUyIsImlzVXBsb2FkVGhpbmdIb29rIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/internal/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/next/index.js":
/*!************************************************!*\
  !*** ./node_modules/uploadthing/next/index.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTFiles: () => (/* reexport safe */ _internal_types_js__WEBPACK_IMPORTED_MODULE_0__.UTFiles),\n/* harmony export */   createNextRouteHandler: () => (/* binding */ createNextRouteHandler),\n/* harmony export */   createRouteHandler: () => (/* binding */ createRouteHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing)\n/* harmony export */ });\n/* harmony import */ var _server_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../server/index.js */ \"(rsc)/./node_modules/uploadthing/server/index.js\");\n/* harmony import */ var _internal_types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../internal/types.js */ \"(rsc)/./node_modules/uploadthing/internal/types.js\");\n\n\nfunction defaultErrorFormatter(error) {\n    return {\n        message: error.message\n    };\n}\nfunction internalCreateBuilder(initDef = {}) {\n    const _def = {\n        // Default router config\n        routerConfig: {\n            image: {\n                maxFileSize: \"4MB\"\n            }\n        },\n        inputParser: {\n            parse: ()=>undefined,\n            _input: undefined,\n            _output: undefined\n        },\n        middleware: ()=>({}),\n        onUploadError: ()=>({}),\n        errorFormatter: initDef.errorFormatter ?? defaultErrorFormatter,\n        // Overload with properties passed in\n        ...initDef\n    };\n    return {\n        input (userParser) {\n            return internalCreateBuilder({\n                ..._def,\n                inputParser: userParser\n            });\n        },\n        middleware (userMiddleware) {\n            return internalCreateBuilder({\n                ..._def,\n                middleware: userMiddleware\n            });\n        },\n        onUploadComplete (userUploadComplete) {\n            return {\n                _def,\n                resolver: userUploadComplete\n            };\n        },\n        onUploadError (userOnUploadError) {\n            return internalCreateBuilder({\n                ..._def,\n                onUploadError: userOnUploadError\n            });\n        }\n    };\n}\nfunction createBuilder(opts) {\n    return (input)=>{\n        return internalCreateBuilder({\n            routerConfig: input,\n            ...opts\n        });\n    };\n}\nconst createUploadthing = (opts)=>createBuilder(opts);\nconst createRouteHandler = (opts)=>{\n    const handlers = (0,_server_index_js__WEBPACK_IMPORTED_MODULE_1__.INTERNAL_DO_NOT_USE_createRouteHandlerCore)(opts, \"nextjs-app\");\n    return {\n        POST: (req)=>handlers.POST(req),\n        GET: (req)=>handlers.GET(req)\n    };\n};\n/**\n * @deprecated Use {@link createRouteHandler} instead\n */ const createNextRouteHandler = createRouteHandler;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvbmV4dC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBZ0Y7QUFDakM7QUFFL0MsU0FBU0Usc0JBQXNCQyxLQUFLO0lBQ2hDLE9BQU87UUFDSEMsU0FBU0QsTUFBTUMsT0FBTztJQUMxQjtBQUNKO0FBRUEsU0FBU0Msc0JBQXNCQyxVQUFVLENBQUMsQ0FBQztJQUN2QyxNQUFNQyxPQUFPO1FBQ1Qsd0JBQXdCO1FBQ3hCQyxjQUFjO1lBQ1ZDLE9BQU87Z0JBQ0hDLGFBQWE7WUFDakI7UUFDSjtRQUNBQyxhQUFhO1lBQ1RDLE9BQU8sSUFBSUM7WUFDWEMsUUFBUUQ7WUFDUkUsU0FBU0Y7UUFDYjtRQUNBRyxZQUFZLElBQUssRUFBQztRQUNsQkMsZUFBZSxJQUFLLEVBQUM7UUFDckJDLGdCQUFnQlosUUFBUVksY0FBYyxJQUFJaEI7UUFDMUMscUNBQXFDO1FBQ3JDLEdBQUdJLE9BQU87SUFDZDtJQUNBLE9BQU87UUFDSGEsT0FBT0MsVUFBVTtZQUNiLE9BQU9mLHNCQUFzQjtnQkFDekIsR0FBR0UsSUFBSTtnQkFDUEksYUFBYVM7WUFDakI7UUFDSjtRQUNBSixZQUFZSyxjQUFjO1lBQ3RCLE9BQU9oQixzQkFBc0I7Z0JBQ3pCLEdBQUdFLElBQUk7Z0JBQ1BTLFlBQVlLO1lBQ2hCO1FBQ0o7UUFDQUMsa0JBQWtCQyxrQkFBa0I7WUFDaEMsT0FBTztnQkFDSGhCO2dCQUNBaUIsVUFBVUQ7WUFDZDtRQUNKO1FBQ0FOLGVBQWVRLGlCQUFpQjtZQUM1QixPQUFPcEIsc0JBQXNCO2dCQUN6QixHQUFHRSxJQUFJO2dCQUNQVSxlQUFlUTtZQUNuQjtRQUNKO0lBQ0o7QUFDSjtBQUNBLFNBQVNDLGNBQWNDLElBQUk7SUFDdkIsT0FBTyxDQUFDUjtRQUNKLE9BQU9kLHNCQUFzQjtZQUN6QkcsY0FBY1c7WUFDZCxHQUFHUSxJQUFJO1FBQ1g7SUFDSjtBQUNKO0FBRUEsTUFBTUMsb0JBQW9CLENBQUNELE9BQU9ELGNBQWNDO0FBQ2hELE1BQU1FLHFCQUFxQixDQUFDRjtJQUN4QixNQUFNRyxXQUFXOUIsNEZBQTBDQSxDQUFDMkIsTUFBTTtJQUNsRSxPQUFPO1FBQ0hJLE1BQU0sQ0FBQ0MsTUFBTUYsU0FBU0MsSUFBSSxDQUFDQztRQUMzQkMsS0FBSyxDQUFDRCxNQUFNRixTQUFTRyxHQUFHLENBQUNEO0lBQzdCO0FBQ0o7QUFDQTs7Q0FFQyxHQUFHLE1BQU1FLHlCQUF5Qkw7QUFFc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ldmVudGx5Ly4vbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL25leHQvaW5kZXguanM/YzcwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTlRFUk5BTF9ET19OT1RfVVNFX2NyZWF0ZVJvdXRlSGFuZGxlckNvcmUgfSBmcm9tICcuLi9zZXJ2ZXIvaW5kZXguanMnO1xuZXhwb3J0IHsgVVRGaWxlcyB9IGZyb20gJy4uL2ludGVybmFsL3R5cGVzLmpzJztcblxuZnVuY3Rpb24gZGVmYXVsdEVycm9yRm9ybWF0dGVyKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGludGVybmFsQ3JlYXRlQnVpbGRlcihpbml0RGVmID0ge30pIHtcbiAgICBjb25zdCBfZGVmID0ge1xuICAgICAgICAvLyBEZWZhdWx0IHJvdXRlciBjb25maWdcbiAgICAgICAgcm91dGVyQ29uZmlnOiB7XG4gICAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgICAgIG1heEZpbGVTaXplOiBcIjRNQlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGlucHV0UGFyc2VyOiB7XG4gICAgICAgICAgICBwYXJzZTogKCk9PnVuZGVmaW5lZCxcbiAgICAgICAgICAgIF9pbnB1dDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgX291dHB1dDogdW5kZWZpbmVkXG4gICAgICAgIH0sXG4gICAgICAgIG1pZGRsZXdhcmU6ICgpPT4oe30pLFxuICAgICAgICBvblVwbG9hZEVycm9yOiAoKT0+KHt9KSxcbiAgICAgICAgZXJyb3JGb3JtYXR0ZXI6IGluaXREZWYuZXJyb3JGb3JtYXR0ZXIgPz8gZGVmYXVsdEVycm9yRm9ybWF0dGVyLFxuICAgICAgICAvLyBPdmVybG9hZCB3aXRoIHByb3BlcnRpZXMgcGFzc2VkIGluXG4gICAgICAgIC4uLmluaXREZWZcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIGlucHV0ICh1c2VyUGFyc2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKHtcbiAgICAgICAgICAgICAgICAuLi5fZGVmLFxuICAgICAgICAgICAgICAgIGlucHV0UGFyc2VyOiB1c2VyUGFyc2VyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgbWlkZGxld2FyZSAodXNlck1pZGRsZXdhcmUpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoe1xuICAgICAgICAgICAgICAgIC4uLl9kZWYsXG4gICAgICAgICAgICAgICAgbWlkZGxld2FyZTogdXNlck1pZGRsZXdhcmVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBvblVwbG9hZENvbXBsZXRlICh1c2VyVXBsb2FkQ29tcGxldGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgX2RlZixcbiAgICAgICAgICAgICAgICByZXNvbHZlcjogdXNlclVwbG9hZENvbXBsZXRlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBvblVwbG9hZEVycm9yICh1c2VyT25VcGxvYWRFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG4gICAgICAgICAgICAgICAgLi4uX2RlZixcbiAgICAgICAgICAgICAgICBvblVwbG9hZEVycm9yOiB1c2VyT25VcGxvYWRFcnJvclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlQnVpbGRlcihvcHRzKSB7XG4gICAgcmV0dXJuIChpbnB1dCk9PntcbiAgICAgICAgcmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG4gICAgICAgICAgICByb3V0ZXJDb25maWc6IGlucHV0LFxuICAgICAgICAgICAgLi4ub3B0c1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuXG5jb25zdCBjcmVhdGVVcGxvYWR0aGluZyA9IChvcHRzKT0+Y3JlYXRlQnVpbGRlcihvcHRzKTtcbmNvbnN0IGNyZWF0ZVJvdXRlSGFuZGxlciA9IChvcHRzKT0+e1xuICAgIGNvbnN0IGhhbmRsZXJzID0gSU5URVJOQUxfRE9fTk9UX1VTRV9jcmVhdGVSb3V0ZUhhbmRsZXJDb3JlKG9wdHMsIFwibmV4dGpzLWFwcFwiKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBQT1NUOiAocmVxKT0+aGFuZGxlcnMuUE9TVChyZXEpLFxuICAgICAgICBHRVQ6IChyZXEpPT5oYW5kbGVycy5HRVQocmVxKVxuICAgIH07XG59O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIGNyZWF0ZVJvdXRlSGFuZGxlcn0gaW5zdGVhZFxuICovIGNvbnN0IGNyZWF0ZU5leHRSb3V0ZUhhbmRsZXIgPSBjcmVhdGVSb3V0ZUhhbmRsZXI7XG5cbmV4cG9ydCB7IGNyZWF0ZU5leHRSb3V0ZUhhbmRsZXIsIGNyZWF0ZVJvdXRlSGFuZGxlciwgY3JlYXRlVXBsb2FkdGhpbmcgfTtcbiJdLCJuYW1lcyI6WyJJTlRFUk5BTF9ET19OT1RfVVNFX2NyZWF0ZVJvdXRlSGFuZGxlckNvcmUiLCJVVEZpbGVzIiwiZGVmYXVsdEVycm9yRm9ybWF0dGVyIiwiZXJyb3IiLCJtZXNzYWdlIiwiaW50ZXJuYWxDcmVhdGVCdWlsZGVyIiwiaW5pdERlZiIsIl9kZWYiLCJyb3V0ZXJDb25maWciLCJpbWFnZSIsIm1heEZpbGVTaXplIiwiaW5wdXRQYXJzZXIiLCJwYXJzZSIsInVuZGVmaW5lZCIsIl9pbnB1dCIsIl9vdXRwdXQiLCJtaWRkbGV3YXJlIiwib25VcGxvYWRFcnJvciIsImVycm9yRm9ybWF0dGVyIiwiaW5wdXQiLCJ1c2VyUGFyc2VyIiwidXNlck1pZGRsZXdhcmUiLCJvblVwbG9hZENvbXBsZXRlIiwidXNlclVwbG9hZENvbXBsZXRlIiwicmVzb2x2ZXIiLCJ1c2VyT25VcGxvYWRFcnJvciIsImNyZWF0ZUJ1aWxkZXIiLCJvcHRzIiwiY3JlYXRlVXBsb2FkdGhpbmciLCJjcmVhdGVSb3V0ZUhhbmRsZXIiLCJoYW5kbGVycyIsIlBPU1QiLCJyZXEiLCJHRVQiLCJjcmVhdGVOZXh0Um91dGVIYW5kbGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/next/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/server/index.js":
/*!**************************************************!*\
  !*** ./node_modules/uploadthing/server/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   INTERNAL_DO_NOT_USE_createRouteHandlerCore: () => (/* binding */ INTERNAL_DO_NOT_USE_createRouteHandlerCore),\n/* harmony export */   UTApi: () => (/* binding */ UTApi),\n/* harmony export */   UTFile: () => (/* binding */ UTFile),\n/* harmony export */   UTFiles: () => (/* reexport safe */ _internal_types_js__WEBPACK_IMPORTED_MODULE_2__.UTFiles),\n/* harmony export */   UploadThingError: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError),\n/* harmony export */   createRouteHandler: () => (/* binding */ createRouteHandler),\n/* harmony export */   createServerHandler: () => (/* binding */ createServerHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig)\n/* harmony export */ });\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @effect/schema/Schema */ \"(rsc)/./node_modules/@effect/schema/dist/esm/Schema.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Duration__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! effect/Duration */ \"(rsc)/./node_modules/effect/dist/esm/Duration.js\");\n/* harmony import */ var effect_Schedule__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Schedule */ \"(rsc)/./node_modules/effect/dist/esm/Schedule.js\");\n/* harmony import */ var consola_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! consola/core */ \"(rsc)/./node_modules/consola/dist/core.mjs\");\n/* harmony import */ var effect_Logger__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! effect/Logger */ \"(rsc)/./node_modules/effect/dist/esm/Logger.js\");\n/* harmony import */ var effect_LogLevel__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! effect/LogLevel */ \"(rsc)/./node_modules/effect/dist/esm/LogLevel.js\");\n/* harmony import */ var std_env__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! std-env */ \"(rsc)/./node_modules/std-env/dist/index.mjs\");\n/* harmony import */ var effect_Context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! effect/Context */ \"(rsc)/./node_modules/effect/dist/esm/Context.js\");\n/* harmony import */ var effect_Data__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! effect/Data */ \"(rsc)/./node_modules/effect/dist/esm/Data.js\");\n/* harmony import */ var _internal_types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../internal/types.js */ \"(rsc)/./node_modules/uploadthing/internal/types.js\");\n/* harmony import */ var _uploadthing_mime_types__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @uploadthing/mime-types */ \"(rsc)/./node_modules/@uploadthing/mime-types/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar version = \"6.13.3\";\nfunction defaultErrorFormatter(error) {\n    return {\n        message: error.message\n    };\n}\nfunction formatError(error, router) {\n    const errorFormatter = router[Object.keys(router)[0]]?._def.errorFormatter ?? defaultErrorFormatter;\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    return errorFormatter(error);\n}\nconst ContentDispositionSchema = _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Literal(..._uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.ValidContentDispositions);\n_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Literal(..._uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.ValidACLs);\n/**\n * =============================================================================\n * ======================== File Type Hierarchy ===============================\n * =============================================================================\n */ /**\n * Properties from the web File object, this is what the client sends when initiating an upload\n */ class FileUploadData extends _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Class(\"FileUploadData\")({\n    name: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    size: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Number,\n    type: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String\n}) {\n}\n/**\n * `.middleware()` can add a customId to the incoming file data\n */ class FileUploadDataWithCustomId extends FileUploadData.extend(\"FileUploadDataWithCustomId\")({\n    customId: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.NullOr(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String)\n}) {\n}\n/**\n * When files are uploaded, we get back\n * - a key\n * - a direct URL for the file\n * - an app-specific URL for the file (useful for scoping eg. for optimization allowed origins)\n */ class UploadedFileData extends FileUploadDataWithCustomId.extend(\"UploadedFileData\")({\n    key: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    url: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    appUrl: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String\n}) {\n}\n/**\n * =============================================================================\n * ======================== Server Response Schemas ============================\n * =============================================================================\n */ class PresignedBase extends _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Class(\"PresignedBaseSchema\")({\n    key: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    fileName: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    fileType: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    fileUrl: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    appUrl: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    pollingJwt: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    pollingUrl: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    contentDisposition: ContentDispositionSchema,\n    customId: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.NullOr(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String)\n}) {\n}\nclass MPUResponse extends PresignedBase.extend(\"MPUResponseSchema\")({\n    urls: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Array(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String),\n    uploadId: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    chunkSize: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Number,\n    chunkCount: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Number\n}) {\n}\nclass PSPResponse extends PresignedBase.extend(\"PSPResponseSchema\")({\n    url: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    fields: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Record(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String, _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String)\n}) {\n}\nconst PresignedURLResponse = _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Array(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Union(PSPResponse, MPUResponse));\nclass PollUploadResponse extends _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Class(\"PollUploadResponse\")({\n    status: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    fileData: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.optional(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n        fileKey: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.NullOr(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String),\n        fileName: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n        fileSize: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Number,\n        fileType: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n        metadata: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.NullOr(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String),\n        customId: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.NullOr(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String),\n        callbackUrl: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.optional(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String),\n        callbackSlug: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.optional(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String)\n    }))\n}) {\n}\nclass FailureCallbackResponse extends _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Class(\"FailureCallbackResponse\")({\n    success: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Boolean,\n    message: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.optional(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String)\n}) {\n}\nclass ServerCallbackPostResponse extends _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Class(\"ServerCallbackPostResponse\")({\n    status: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String\n}) {\n}\n/**\n * =============================================================================\n * ======================== Client Action Payloads ============================\n * =============================================================================\n */ class UploadActionPayload extends _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Class(\"UploadActionPayload\")({\n    files: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Array(FileUploadData),\n    input: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Unknown\n}) {\n}\nclass FailureActionPayload extends _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Class(\"FailureActionPayload\")({\n    fileKey: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    uploadId: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.NullOr(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String),\n    storageProviderError: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.optional(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String),\n    fileName: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String\n}) {\n}\nclass MultipartCompleteActionPayload extends _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Class(\"MultipartCompleteActionPayload\")({\n    fileKey: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    uploadId: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n    etags: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Array(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n        tag: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n        partNumber: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Number\n    }))\n}) {\n}\nconst isValidResponse = (response)=>{\n    if (!response.ok) return false;\n    if (response.status >= 400) return false;\n    if (!response.headers.has(\"x-uploadthing-version\")) return false;\n    return true;\n};\nconst conditionalDevServer = (presigned, apiKey)=>{\n    return effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n        const file = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(`/v6/pollUpload/${presigned.key}`)).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseResponseJson), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(PollUploadResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen((res)=>res.status === \"done\" && res.fileData ? effect_Effect__WEBPACK_IMPORTED_MODULE_4__.succeed(res.fileData) : effect_Effect__WEBPACK_IMPORTED_MODULE_4__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError())), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.retry({\n            while: (err)=>err instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError,\n            schedule: effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.exponential(10, 4).pipe(effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.union(effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.spaced(1000)), effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.compose(effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.elapsed), effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.whileOutput(effect_Duration__WEBPACK_IMPORTED_MODULE_6__.lessThanOrEqualTo(effect_Duration__WEBPACK_IMPORTED_MODULE_6__.minutes(1))))\n        }), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTag(\"RetryError\", ()=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: \"File took too long to upload\"\n            })));\n        let callbackUrl = file.callbackUrl + `?slug=${file.callbackSlug}`;\n        if (!callbackUrl.startsWith(\"http\")) callbackUrl = \"http://\" + callbackUrl;\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logInfo(`SIMULATING FILE UPLOAD WEBHOOK CALLBACK`, callbackUrl);\n        const payload = JSON.stringify({\n            status: \"uploaded\",\n            metadata: JSON.parse(file.metadata ?? \"{}\"),\n            file: new UploadedFileData({\n                url: presigned.fileUrl,\n                appUrl: presigned.appUrl,\n                key: presigned.key,\n                name: file.fileName,\n                size: file.fileSize,\n                customId: file.customId,\n                type: file.fileType\n            })\n        });\n        const signature = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tryPromise({\n            try: ()=>(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.signPayload)(payload, apiKey),\n            catch: (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to sign payload\",\n                    cause: e\n                })\n        });\n        const callbackResponse = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)(callbackUrl, {\n            method: \"POST\",\n            body: payload,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"uploadthing-hook\": \"callback\",\n                \"x-uploadthing-signature\": signature\n            }\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTag(\"FetchError\", ()=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.succeed(new Response(null, {\n                status: 500\n            }))));\n        if (isValidResponse(callbackResponse)) {\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logInfo(\"Successfully simulated callback for file\", presigned.key);\n        } else {\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(`\nFailed to simulate callback for file '${file.fileKey}'. Is your webhook configured correctly?\n  - Make sure the URL '${callbackUrl}' is accessible without any authentication. You can verify this by running 'curl -X POST ${callbackUrl}' in your terminal\n  - Still facing issues? Read https://docs.uploadthing.com/faq for common issues\n`.trim());\n        }\n        return file;\n    });\n};\nconst colorize = (str, level)=>{\n    // TODO: Maybe check is shell supports colors\n    switch(level){\n        case \"error\":\n        case \"fatal\":\n            return `\\x1b[41m\\x1b[30m${str}\\x1b[0m`;\n        case \"warn\":\n            return `\\x1b[43m\\x1b[30m${str}\\x1b[0m`;\n        case \"info\":\n        case \"log\":\n            return `\\x1b[44m\\x1b[30m${str}\\x1b[0m`;\n        case \"debug\":\n            return `\\x1b[47m\\x1b[30m${str}\\x1b[0m`;\n        case \"trace\":\n            return `\\x1b[47m\\x1b[30m${str}\\x1b[0m`;\n        case \"success\":\n            return `\\x1b[42m\\x1b[30m${str}\\x1b[0m`;\n        default:\n            return str;\n    }\n};\nconst icons = {\n    fatal: \"\",\n    error: \"\",\n    warn: \"\",\n    info: \"\",\n    log: \"\",\n    debug: \"\",\n    trace: \"\",\n    success: \"\"\n};\nfunction formatStack(stack) {\n    const cwd = \"cwd\" in std_env__WEBPACK_IMPORTED_MODULE_7__.process && typeof std_env__WEBPACK_IMPORTED_MODULE_7__.process.cwd === \"function\" ? std_env__WEBPACK_IMPORTED_MODULE_7__.process.cwd() : \"__UnknownCWD__\";\n    return \"  \" + stack.split(\"\\n\").splice(1).map((l)=>l.trim().replace(\"file://\", \"\").replace(cwd + \"/\", \"\")).join(\"\\n  \");\n}\nfunction formatArgs(args) {\n    const fmtArgs = args.map((arg)=>{\n        if ((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.isObject)(arg) && typeof arg.stack === \"string\") {\n            return arg.message + \"\\n\" + formatStack(arg.stack);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return arg;\n    });\n    return fmtArgs.map((arg)=>{\n        if (typeof arg === \"string\") {\n            return arg;\n        }\n        return JSON.stringify(arg, null, 4);\n    });\n}\nconst logger = (0,consola_core__WEBPACK_IMPORTED_MODULE_1__.createConsola)({\n    reporters: [\n        {\n            log: (logObj)=>{\n                const { type, tag, date, args } = logObj;\n                const icon = icons[type];\n                const logPrefix = colorize(` ${icon} ${tag} ${date.toLocaleTimeString()} `, type);\n                const lines = formatArgs(args).join(\" \") // concat all arguments to one space-separated string (like console does)\n                .split(\"\\n\") // split all the newlines (e.g. from logged JSON.stringified objects)\n                .map((l)=>logPrefix + \" \" + l) // prepend the log prefix to each line\n                .join(\"\\n\"); // join all the lines back together\n                // eslint-disable-next-line no-console\n                console.log(lines);\n            }\n        }\n    ],\n    defaults: {\n        tag: \"UPLOADTHING\"\n    }\n});\nconst effectLoggerLevelToConsolaLevel = {\n    All: \"verbose\",\n    Fatal: \"error\",\n    Error: \"error\",\n    Info: \"info\",\n    Debug: \"debug\",\n    Trace: \"trace\",\n    Warning: \"warn\",\n    None: \"silent\"\n};\nconst withMinimalLogLevel = (level = \"info\")=>{\n    logger.level = consola_core__WEBPACK_IMPORTED_MODULE_1__.LogLevels[level];\n    return effect_Logger__WEBPACK_IMPORTED_MODULE_8__.withMinimumLogLevel({\n        silent: effect_LogLevel__WEBPACK_IMPORTED_MODULE_9__.None,\n        error: effect_LogLevel__WEBPACK_IMPORTED_MODULE_9__.Error,\n        warn: effect_LogLevel__WEBPACK_IMPORTED_MODULE_9__.Warning,\n        info: effect_LogLevel__WEBPACK_IMPORTED_MODULE_9__.Info,\n        debug: effect_LogLevel__WEBPACK_IMPORTED_MODULE_9__.Debug,\n        trace: effect_LogLevel__WEBPACK_IMPORTED_MODULE_9__.Trace,\n        verbose: effect_LogLevel__WEBPACK_IMPORTED_MODULE_9__.All\n    }[level]);\n};\nconst ConsolaLogger = effect_Logger__WEBPACK_IMPORTED_MODULE_8__.replace(effect_Logger__WEBPACK_IMPORTED_MODULE_8__.defaultLogger, effect_Logger__WEBPACK_IMPORTED_MODULE_8__.make(({ logLevel, message })=>{\n    // FIXME: Probably log other stuff than just message?\n    logger[effectLoggerLevelToConsolaLevel[logLevel._tag]](message);\n}));\nconst uploadMultipart = (file, presigned)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(`Uploading file ${file.name} with ${presigned.urls.length} chunks of size ${presigned.chunkSize} bytes each`);\n        const etags = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.forEach(presigned.urls, (url, index)=>{\n            const offset = presigned.chunkSize * index;\n            const end = Math.min(offset + presigned.chunkSize, file.size);\n            const chunk = file.slice(offset, end);\n            return uploadPart({\n                url,\n                chunk: chunk,\n                contentDisposition: presigned.contentDisposition,\n                contentType: file.type,\n                fileName: file.name,\n                maxRetries: 10,\n                key: presigned.key,\n                uploadId: presigned.uploadId\n            }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen((etag)=>({\n                    tag: etag,\n                    partNumber: index + 1\n                })), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTag(\"RetryError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.die(e)));\n        }, {\n            concurrency: \"inherit\"\n        });\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"File\", file.name, \"uploaded successfully.\");\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Completing multipart upload...\");\n        yield* completeMultipartUpload(presigned, etags);\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Multipart upload complete.\");\n    });\n/**\n * Used by server uploads where progress is not needed.\n * Uses normal fetch API.\n */ const uploadPart = (opts)=>(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)(opts.url, {\n        method: \"PUT\",\n        body: opts.chunk,\n        headers: {\n            \"Content-Type\": opts.contentType,\n            \"Content-Disposition\": (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.contentDisposition)(opts.contentDisposition, opts.fileName)\n        }\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen((res)=>res.ok && res.headers.get(\"Etag\") ? effect_Effect__WEBPACK_IMPORTED_MODULE_4__.succeed(res.headers.get(\"Etag\")) : effect_Effect__WEBPACK_IMPORTED_MODULE_4__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError())), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.retry({\n        while: (res)=>res instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError,\n        schedule: effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.exponential(effect_Duration__WEBPACK_IMPORTED_MODULE_6__.millis(10), 4).pipe(effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.andThenEither(effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.spaced(effect_Duration__WEBPACK_IMPORTED_MODULE_6__.seconds(1))), effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.compose(effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.elapsed), effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.whileOutput(effect_Duration__WEBPACK_IMPORTED_MODULE_6__.lessThanOrEqualTo(effect_Duration__WEBPACK_IMPORTED_MODULE_6__.minutes(1)))),\n        times: opts.maxRetries\n    }), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tapErrorTag(\"RetryError\", ()=>abortMultipartUpload({\n            key: opts.key,\n            uploadId: opts.uploadId\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen((res)=>{\n            new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: `Failed to upload file ${opts.fileName} to S3`,\n                cause: res\n            });\n        }))));\nconst completeMultipartUpload = (presigned, etags)=>(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(\"/v6/completeMultipart\"), {\n        method: \"POST\",\n        body: JSON.stringify({\n            fileKey: presigned.key,\n            uploadId: presigned.uploadId,\n            etags\n        }),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseResponseJson), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n        success: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Boolean,\n        message: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.optional(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String)\n    }))), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.withSpan(\"completeMultipartUpload\", {\n        attributes: {\n            etags,\n            presigned\n        }\n    }));\nconst abortMultipartUpload = (presigned)=>(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(\"/v6/failureCallback\"), {\n        method: \"POST\",\n        body: JSON.stringify({\n            fileKey: presigned.key,\n            uploadId: presigned.uploadId\n        }),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseResponseJson), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(FailureCallbackResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.withSpan(\"abortMultipartUpload\", {\n        attributes: {\n            presigned\n        }\n    }));\nfunction getParseFn(parser) {\n    if (typeof parser.parse === \"function\") {\n        return parser.parse;\n    }\n    throw new Error(\"Invalid parser\");\n}\nconst getApiKey = (apiKey)=>{\n    if (apiKey) return apiKey;\n    if (std_env__WEBPACK_IMPORTED_MODULE_7__.process.env.UPLOADTHING_SECRET) return std_env__WEBPACK_IMPORTED_MODULE_7__.process.env.UPLOADTHING_SECRET;\n    return undefined;\n};\nconst getApiKeyOrThrow = (apiKey)=>{\n    const key = getApiKey(apiKey);\n    if (!key?.startsWith(\"sk_\")) {\n        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"MISSING_ENV\",\n            message: \"Missing or invalid API key. API keys must start with `sk_`.\"\n        });\n    }\n    return key;\n};\nclass FileSizeMismatch extends effect_Data__WEBPACK_IMPORTED_MODULE_10__.Error {\n    constructor(type, max, actual){\n        const reason = `You uploaded a ${type} file that was ${(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.bytesToFileSize)(actual)}, but the limit for that type is ${max}`;\n        super({\n            reason\n        });\n        this._tag = \"FileSizeMismatch\";\n        this.name = \"FileSizeMismatchError\";\n    }\n}\nclass FileCountMismatch extends effect_Data__WEBPACK_IMPORTED_MODULE_10__.Error {\n    constructor(type, boundtype, bound, actual){\n        const reason = `You uploaded ${actual} file(s) of type '${type}', but the ${boundtype} for that type is ${bound}`;\n        super({\n            reason\n        });\n        this._tag = \"FileCountMismatch\";\n        this.name = \"FileCountMismatchError\";\n    }\n}\n// Verify that the uploaded files doesn't violate the route config,\n// e.g. uploading more videos than allowed, or a file that is larger than allowed.\n// This is double-checked on infra side, but we want to fail early to avoid network latency.\nconst assertFilesMeetConfig = (files, routeConfig)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n        const counts = {};\n        for (const file of files){\n            const type = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.getTypeFromFileName)(file.name, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.objectKeys)(routeConfig));\n            counts[type] = (counts[type] ?? 0) + 1;\n            const sizeLimit = routeConfig[type]?.maxFileSize;\n            if (!sizeLimit) {\n                return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.InvalidRouteConfigError(type, \"maxFileSize\");\n            }\n            const sizeLimitBytes = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fileSizeToBytes)(sizeLimit);\n            if (file.size > sizeLimitBytes) {\n                return yield* new FileSizeMismatch(type, sizeLimit, file.size);\n            }\n        }\n        for(const _key in counts){\n            const key = _key;\n            const config = routeConfig[key];\n            if (!config) return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.InvalidRouteConfigError(key);\n            const count = counts[key];\n            const min = config.minFileCount;\n            const max = config.maxFileCount;\n            if (min > max) {\n                return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Invalid config during file count - minFileCount > maxFileCount\",\n                    cause: `minFileCount must be less than maxFileCount for key ${key}. got: ${min} > ${max}`\n                });\n            }\n            if (count < min) {\n                return yield* new FileCountMismatch(key, \"minimum\", min, count);\n            }\n            if (count > max) {\n                return yield* new FileCountMismatch(key, \"maximum\", max, count);\n            }\n        }\n        return null;\n    });\nclass RequestInput extends /** #__PURE__ */ effect_Context__WEBPACK_IMPORTED_MODULE_11__.Tag(\"uploadthing/RequestInput\")() {\n}\nconst parseAndValidateRequest = (input, opts, adapter)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n        const req = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.isEffect(input.req) ? input.req : effect_Effect__WEBPACK_IMPORTED_MODULE_4__.succeed(input.req);\n        // Get inputs from query and params\n        const url = new URL(req.url);\n        const headers = req.headers;\n        const params = url.searchParams;\n        const action = params.get(\"actionType\");\n        const slug = params.get(\"slug\");\n        const hook = headers.get(\"uploadthing-hook\");\n        const utFrontendPackage = headers.get(\"x-uploadthing-package\") ?? \"unknown\";\n        const clientVersion = headers.get(\"x-uploadthing-version\");\n        const apiKey = getApiKey(opts.config?.uploadthingSecret);\n        if (clientVersion != null && clientVersion !== version) {\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(`Client version mismatch. Server version: ${version}, Client version: ${clientVersion}`);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Client version mismatch\",\n                cause: `Server version: ${version}, Client version: ${clientVersion}`\n            });\n        }\n        if (!slug) {\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(\"No slug provided in params:\", params);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"No slug provided in params\"\n            });\n        }\n        if (slug && typeof slug !== \"string\") {\n            const msg = `Expected slug to be of type 'string', got '${typeof slug}'`;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(msg);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"`slug` must be a string\",\n                cause: msg\n            });\n        }\n        if (!apiKey) {\n            const msg = `No secret provided, please set UPLOADTHING_SECRET in your env file or in the config`;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(msg);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"MISSING_ENV\",\n                message: `No secret provided`,\n                cause: msg\n            });\n        }\n        if (!apiKey.startsWith(\"sk_\")) {\n            const msg = `Invalid secret provided, UPLOADTHING_SECRET must start with 'sk_'`;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(msg);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"MISSING_ENV\",\n                message: \"Invalid API key. API keys must start with 'sk_'.\",\n                cause: msg\n            });\n        }\n        if (utFrontendPackage && typeof utFrontendPackage !== \"string\") {\n            const msg = `Expected x-uploadthing-package to be of type 'string', got '${typeof utFrontendPackage}'`;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(msg);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"`x-uploadthing-package` must be a string. eg. '@uploadthing/react'\",\n                cause: msg\n            });\n        }\n        const uploadable = opts.router[slug];\n        if (!uploadable) {\n            const msg = `No file route found for slug ${slug}`;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(msg);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"NOT_FOUND\",\n                message: msg\n            });\n        }\n        if (action && !(0,_internal_types_js__WEBPACK_IMPORTED_MODULE_2__.isActionType)(action)) {\n            const msg = `Expected ${_internal_types_js__WEBPACK_IMPORTED_MODULE_2__.VALID_ACTION_TYPES.map((x)=>`\"${x}\"`).join(\", \").replace(/,(?!.*,)/, \" or\")} but got \"${action}\"`;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(\"Invalid action type\", msg);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                cause: `Invalid action type ${action}`,\n                message: msg\n            });\n        }\n        if (hook && !(0,_internal_types_js__WEBPACK_IMPORTED_MODULE_2__.isUploadThingHook)(hook)) {\n            const msg = `Expected ${_internal_types_js__WEBPACK_IMPORTED_MODULE_2__.VALID_UT_HOOKS.map((x)=>`\"${x}\"`).join(\", \").replace(/,(?!.*,)/, \" or\")} but got \"${hook}\"`;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(\"Invalid uploadthing hook\", msg);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                cause: `Invalid uploadthing hook ${hook}`,\n                message: msg\n            });\n        }\n        if (!action && !hook || action && hook) {\n            const msg = `Exactly one of 'actionType' or 'uploadthing-hook' must be provided`;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(msg);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: msg\n            });\n        }\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\" All request input is valid\");\n        // FIXME: This should probably provide the full context at once instead of\n        // partially in the `runRequestHandlerAsync` and partially in here...\n        // Ref: https://discord.com/channels/@me/1201977154577891369/1207441839972548669\n        const contextValue = yield* _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.FetchContext;\n        contextValue.baseHeaders[\"x-uploadthing-api-key\"] = apiKey;\n        contextValue.baseHeaders[\"x-uploadthing-fe-package\"] = utFrontendPackage;\n        contextValue.baseHeaders[\"x-uploadthing-be-adapter\"] = adapter;\n        const { isDev = std_env__WEBPACK_IMPORTED_MODULE_7__.isDevelopment } = opts.config ?? {};\n        if (isDev) yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logInfo(\"UploadThing dev server is now running!\");\n        const base = {\n            req,\n            config: opts.config ?? {},\n            middlewareArgs: input.middlewareArgs,\n            isDev,\n            apiKey,\n            slug,\n            uploadable,\n            hook: null,\n            action: null\n        };\n        return action ? {\n            ...base,\n            action: action\n        } : {\n            ...base,\n            hook: hook\n        };\n    });\nconst resolveCallbackUrl = effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n    const { config, req, isDev } = yield* RequestInput;\n    let callbackUrl = new URL(req.url);\n    if (config?.callbackUrl) {\n        callbackUrl = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.getFullApiUrl)(config.callbackUrl);\n    } else if (std_env__WEBPACK_IMPORTED_MODULE_7__.process.env.UPLOADTHING_URL) {\n        callbackUrl = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.getFullApiUrl)(std_env__WEBPACK_IMPORTED_MODULE_7__.process.env.UPLOADTHING_URL);\n    }\n    if (isDev || !callbackUrl.host.includes(\"localhost\")) {\n        return callbackUrl;\n    }\n    // Production builds have to have a public URL so UT can send webhook\n    // Parse the URL from the headers\n    let parsedFromHeaders = req.headers.get(\"origin\") ?? req.headers.get(\"referer\") ?? req.headers.get(\"host\") ?? req.headers.get(\"x-forwarded-host\");\n    if (parsedFromHeaders && !parsedFromHeaders.includes(\"http\")) {\n        parsedFromHeaders = (req.headers.get(\"x-forwarded-proto\") ?? \"https\") + \"://\" + parsedFromHeaders;\n    }\n    if (!parsedFromHeaders || parsedFromHeaders.includes(\"localhost\")) {\n        // Didn't find a valid URL in the headers, log a warning and use the original url anyway\n        effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logWarning(\"You are using a localhost callback url in production which is not supported.\", \"Read more and learn how to fix it here: https://docs.uploadthing.com/faq#my-callback-runs-in-development-but-not-in-production\");\n        return callbackUrl;\n    }\n    return yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.getFullApiUrl)(parsedFromHeaders);\n});\n/**\n * Allows adapters to be fully async/await instead of providing services and running Effect programs\n */ const runRequestHandlerAsync = (handler, args, config)=>handler(args).pipe(withMinimalLogLevel(config?.logLevel), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.provide(ConsolaLogger), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.provideService(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.FetchContext, {\n        fetch: config?.fetch ?? globalThis.fetch,\n        baseHeaders: {\n            \"x-uploadthing-version\": version,\n            // These are filled in later in `parseAndValidateRequest`\n            \"x-uploadthing-api-key\": undefined,\n            \"x-uploadthing-be-adapter\": undefined,\n            \"x-uploadthing-fe-package\": undefined\n        }\n    }), asHandlerOutput, effect_Effect__WEBPACK_IMPORTED_MODULE_4__.runPromise);\nconst asHandlerOutput = (effect)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchAll(effect, (error)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.succeed({\n            success: false,\n            error\n        }));\nconst handleRequest = RequestInput.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(({ action, hook })=>{\n    if (hook === \"callback\") return handleCallbackRequest;\n    switch(action){\n        case \"upload\":\n            return handleUploadAction;\n        case \"multipart-complete\":\n            return handleMultipartCompleteAction;\n        case \"failure\":\n            return handleMultipartFailureAction;\n    }\n}), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.map((output)=>({\n        success: true,\n        ...output\n    })));\nconst buildRequestHandler = (opts, adapter)=>(input)=>handleRequest.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.provideServiceEffect(RequestInput, parseAndValidateRequest(input, opts, adapter)), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTags({\n            InvalidJson: (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"An error occured while parsing input/output\",\n                    cause: e\n                }),\n            BadRequestError: (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: e.getMessage(),\n                    cause: e,\n                    data: e.json\n                }),\n            FetchError: (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: typeof e.error === \"string\" ? e.error : e.message,\n                    cause: e,\n                    data: e.error\n                }),\n            ParseError: (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"An error occured while parsing input/output\",\n                    cause: e\n                })\n        }), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tapError((e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(e.message)));\nconst handleCallbackRequest = effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n    const { req, uploadable, apiKey } = yield* RequestInput;\n    const verified = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tryPromise({\n        try: async ()=>(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.verifySignature)(await req.clone().text(), req.headers.get(\"x-uploadthing-signature\"), apiKey),\n        catch: ()=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid signature\"\n            })\n    });\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Signature verified:\", verified);\n    if (!verified) {\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(\"Invalid signature\");\n        return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"BAD_REQUEST\",\n            message: \"Invalid signature\"\n        });\n    }\n    const requestInput = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.flatMap((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseRequestJson)(req), _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n        status: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n        file: UploadedFileData,\n        metadata: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Record(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String, _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Unknown)\n    })));\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Handling callback request with input:\", requestInput);\n    const serverData = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tryPromise({\n        try: async ()=>uploadable.resolver({\n                file: requestInput.file,\n                metadata: requestInput.metadata\n            }),\n        catch: (error)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"Failed to run onUploadComplete\",\n                cause: error\n            })\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tapError((error)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(\"Failed to run onUploadComplete. You probably shouldn't be throwing errors here.\", error)));\n    const payload = {\n        fileKey: requestInput.file.key,\n        callbackData: serverData ?? null\n    };\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"'onUploadComplete' callback finished. Sending response to UploadThing:\", payload);\n    yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(\"/v6/serverCallback\"), {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseResponseJson), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(ServerCallbackPostResponse)));\n    return {\n        body: null\n    };\n});\nconst runRouteMiddleware = (opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n        const { uploadable, middlewareArgs } = yield* RequestInput;\n        const { files, input } = opts;\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Running middleware\");\n        const metadata = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tryPromise({\n            try: async ()=>uploadable._def.middleware({\n                    ...middlewareArgs,\n                    input,\n                    files\n                }),\n            catch: (error)=>error instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError ? error : new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to run middleware\",\n                    cause: error\n                })\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tapError((error)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(\"An error occured in your middleware function\", error)));\n        if (metadata[_internal_types_js__WEBPACK_IMPORTED_MODULE_2__.UTFiles] && metadata[_internal_types_js__WEBPACK_IMPORTED_MODULE_2__.UTFiles].length !== files.length) {\n            const msg = `Expected files override to have the same length as original files, got ${metadata[_internal_types_js__WEBPACK_IMPORTED_MODULE_2__.UTFiles].length} but expected ${files.length}`;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(msg);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Files override must have the same length as files\",\n                cause: msg\n            });\n        }\n        // Attach customIds from middleware to the files\n        const filesWithCustomIds = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.forEach(files, (file, idx)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n                const theirs = metadata[_internal_types_js__WEBPACK_IMPORTED_MODULE_2__.UTFiles]?.[idx];\n                if (theirs && theirs.size !== file.size) {\n                    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logWarning(\"File size mismatch. Reverting to original size\");\n                }\n                return {\n                    name: theirs?.name ?? file.name,\n                    size: file.size,\n                    customId: theirs?.customId\n                };\n            }));\n        return {\n            metadata,\n            filesWithCustomIds\n        };\n    });\nconst handleUploadAction = effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n    const opts = yield* RequestInput;\n    const { files, input } = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.flatMap((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseRequestJson)(opts.req), _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(UploadActionPayload));\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Handling upload request with input:\", {\n        files,\n        input\n    });\n    // validate the input\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Parsing user input\");\n    const inputParser = opts.uploadable._def.inputParser;\n    const parsedInput = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tryPromise({\n        try: async ()=>getParseFn(inputParser)(input),\n        catch: (error)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid input\",\n                cause: error\n            })\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tapError((error)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(\"An error occured trying to parse input\", error)));\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Input parsed successfully\", parsedInput);\n    const { metadata, filesWithCustomIds } = yield* runRouteMiddleware({\n        input: parsedInput,\n        files\n    });\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Parsing route config\", opts.uploadable._def.routerConfig);\n    const parsedConfig = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fillInputRouteConfig)(opts.uploadable._def.routerConfig).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTag(\"InvalidRouteConfig\", (err)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"BAD_REQUEST\",\n            message: \"Invalid config\",\n            cause: err\n        })));\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Route config parsed successfully\", parsedConfig);\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Validating files meet the config requirements\", files);\n    yield* assertFilesMeetConfig(files, parsedConfig).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.mapError((e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"BAD_REQUEST\",\n            message: `Invalid config: ${e._tag}`,\n            cause: \"reason\" in e ? e.reason : e.message\n        })));\n    const callbackUrl = yield* resolveCallbackUrl.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tapError((error)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(\"Failed to resolve callback URL\", error)), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTag(\"InvalidURL\", (err)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"INTERNAL_SERVER_ERROR\",\n            message: err.message\n        })));\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Retrieving presigned URLs from UploadThing. Callback URL is:\", callbackUrl.href);\n    const presignedUrls = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(\"/v6/prepareUpload\"), {\n        method: \"POST\",\n        body: JSON.stringify({\n            files: filesWithCustomIds,\n            routeConfig: parsedConfig,\n            metadata,\n            callbackUrl: callbackUrl.origin + callbackUrl.pathname,\n            callbackSlug: opts.slug\n        }),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseResponseJson), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(PresignedURLResponse)));\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"UploadThing responded with:\", presignedUrls);\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Sending presigned URLs to client\");\n    let promise = undefined;\n    if (opts.isDev) {\n        const fetchContext = yield* _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.FetchContext;\n        promise = effect_Effect__WEBPACK_IMPORTED_MODULE_4__.forEach(presignedUrls, (presigned)=>conditionalDevServer(presigned, opts.apiKey).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.either), {\n            concurrency: 10\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.provide(ConsolaLogger), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.provideService(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.FetchContext, fetchContext), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.runPromise);\n    }\n    return {\n        body: presignedUrls,\n        cleanup: promise\n    };\n});\nconst handleMultipartCompleteAction = effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n    const opts = yield* RequestInput;\n    const requestInput = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.flatMap((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseRequestJson)(opts.req), _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(MultipartCompleteActionPayload));\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Handling multipart-complete request with input:\", requestInput);\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Notifying UploadThing that multipart upload is complete\");\n    const completionResponse = yield* completeMultipartUpload({\n        key: requestInput.fileKey,\n        uploadId: requestInput.uploadId\n    }, requestInput.etags);\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"UploadThing responded with:\", completionResponse);\n    return {\n        body: null\n    };\n});\nconst handleMultipartFailureAction = effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n    const { req, uploadable } = yield* RequestInput;\n    const { fileKey, uploadId } = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.flatMap((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseRequestJson)(req), _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(FailureActionPayload));\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Handling failure request with input:\", {\n        fileKey,\n        uploadId\n    });\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Notifying UploadThing that upload failed\");\n    const failureResponse = yield* abortMultipartUpload({\n        key: fileKey,\n        uploadId\n    });\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"UploadThing responded with:\", failureResponse);\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Running 'onUploadError' callback\");\n    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__[\"try\"]({\n        try: ()=>{\n            uploadable._def.onUploadError({\n                error: new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"UPLOAD_FAILED\",\n                    message: `Upload failed for ${fileKey}`\n                }),\n                fileKey\n            });\n        },\n        catch: (error)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"Failed to run onUploadError\",\n                cause: error\n            })\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tapError((error)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(\"Failed to run onUploadError. You probably shouldn't be throwing errors here.\", error)));\n    return {\n        body: null\n    };\n});\nconst buildPermissionsInfoHandler = (opts)=>{\n    return ()=>{\n        const permissions = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.objectKeys)(opts.router).map((slug)=>{\n            const route = opts.router[slug];\n            const config = effect_Effect__WEBPACK_IMPORTED_MODULE_4__.runSync((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fillInputRouteConfig)(route._def.routerConfig));\n            return {\n                slug,\n                config\n            };\n        });\n        return permissions;\n    };\n};\nfunction incompatibleNodeGuard() {\n    if (typeof std_env__WEBPACK_IMPORTED_MODULE_7__.process === \"undefined\") return;\n    let major;\n    let minor;\n    const maybeNodeVersion = std_env__WEBPACK_IMPORTED_MODULE_7__.process.versions?.node?.split(\".\");\n    if (maybeNodeVersion) {\n        [major, minor] = maybeNodeVersion.map((v)=>parseInt(v, 10));\n    }\n    const maybeNodePath = std_env__WEBPACK_IMPORTED_MODULE_7__.process.env?.NODE;\n    if (!major && maybeNodePath) {\n        const nodeVersion = /v(\\d+)\\.(\\d+)\\.(\\d+)/.exec(maybeNodePath)?.[0];\n        if (nodeVersion) {\n            [major, minor] = nodeVersion.substring(1).split(\".\").map((v)=>parseInt(v, 10));\n        }\n    }\n    if (!major || !minor) return;\n    // Require ^18.13.0\n    if (major > 18) return;\n    if (major === 18 && minor >= 13) return;\n    effect_Effect__WEBPACK_IMPORTED_MODULE_4__.runSync(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(`YOU ARE USING A LEGACY (${major}.${minor}) NODE VERSION WHICH ISN'T OFFICIALLY SUPPORTED. PLEASE UPGRADE TO NODE ^18.13.`));\n    // Kill the process if it isn't going to work correctly anyway\n    // If we've gotten this far we know we have a Node.js runtime so exit is defined. Override std-env type.\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-call\n    std_env__WEBPACK_IMPORTED_MODULE_7__.process.exit?.(1);\n}\nfunction internalCreateBuilder(initDef = {}) {\n    const _def = {\n        // Default router config\n        routerConfig: {\n            image: {\n                maxFileSize: \"4MB\"\n            }\n        },\n        inputParser: {\n            parse: ()=>undefined,\n            _input: undefined,\n            _output: undefined\n        },\n        middleware: ()=>({}),\n        onUploadError: ()=>({}),\n        errorFormatter: initDef.errorFormatter ?? defaultErrorFormatter,\n        // Overload with properties passed in\n        ...initDef\n    };\n    return {\n        input (userParser) {\n            return internalCreateBuilder({\n                ..._def,\n                inputParser: userParser\n            });\n        },\n        middleware (userMiddleware) {\n            return internalCreateBuilder({\n                ..._def,\n                middleware: userMiddleware\n            });\n        },\n        onUploadComplete (userUploadComplete) {\n            return {\n                _def,\n                resolver: userUploadComplete\n            };\n        },\n        onUploadError (userOnUploadError) {\n            return internalCreateBuilder({\n                ..._def,\n                onUploadError: userOnUploadError\n            });\n        }\n    };\n}\nfunction createBuilder(opts) {\n    return (input)=>{\n        return internalCreateBuilder({\n            routerConfig: input,\n            ...opts\n        });\n    };\n}\n/**\n * Extension of the Blob class that simplifies setting the `name` and `customId` properties,\n * similar to the built-in File class from Node > 20.\n */ class UTFile extends Blob {\n    constructor(parts, name, options){\n        const optionsWithDefaults = {\n            ...options,\n            type: options?.type ?? ((0,_uploadthing_mime_types__WEBPACK_IMPORTED_MODULE_12__.lookup)(name) || \"application/octet-stream\"),\n            lastModified: options?.lastModified ?? Date.now()\n        };\n        super(parts, optionsWithDefaults);\n        this.name = name;\n        this.customId = optionsWithDefaults.customId;\n        this.lastModified = optionsWithDefaults.lastModified;\n    }\n}\nconst uploadPresignedPost = (file, presigned)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(`Uploading file ${file.name} using presigned POST URL`);\n        const formData = new FormData();\n        Object.entries(presigned.fields).forEach(([k, v])=>formData.append(k, v));\n        formData.append(\"file\", file); // File data **MUST GO LAST**\n        const res = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)(presigned.url, {\n            method: \"POST\",\n            body: formData,\n            headers: new Headers({\n                Accept: \"application/xml\"\n            })\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tapErrorCause(()=>(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(\"/v6/failureCallback\"), {\n                method: \"POST\",\n                body: JSON.stringify({\n                    fileKey: presigned.key,\n                    uploadId: null\n                }),\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseResponseJson), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(FailureCallbackResponse)))));\n        if (!res.ok) {\n            const text = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.promise(res.text);\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(`Failed to upload file ${file.name} to presigned POST URL. Response: ${text}`);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: \"Failed to upload file\",\n                cause: text\n            });\n        }\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"File\", file.name, \"uploaded successfully\");\n    });\nfunction guardServerOnly() {\n    if (false) {}\n}\nconst uploadFilesInternal = (input)=>getPresignedUrls(input).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen((presigneds)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.forEach(presigneds, (file)=>uploadFile(file).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tapError((error)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(\"Upload failed:\", error)), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.match({\n                onFailure: (error)=>({\n                        data: null,\n                        error: _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError.toObject(error instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError ? error : new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                            message: \"Failed to upload file.\",\n                            code: \"BAD_REQUEST\",\n                            cause: error\n                        }))\n                    }),\n                onSuccess: (data)=>({\n                        data,\n                        error: null\n                    })\n            })), {\n            concurrency: 10\n        })));\n/**\n * FIXME: downloading everything into memory and then upload\n * isn't the best. We should support streams so we can download\n * just as much as we need at any time.\n */ const downloadFiles = (urls, downloadErrors)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.forEach(urls, (_url, idx)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n            let url = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.isObject)(_url) ? _url.url : _url;\n            if (typeof url === \"string\") {\n                // since dataurls will result in name being too long, tell the user\n                // to use uploadFiles instead.\n                if (url.startsWith(\"data:\")) {\n                    downloadErrors[idx] = _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError.toObject(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                        code: \"BAD_REQUEST\",\n                        message: \"Please use uploadFiles() for data URLs. uploadFilesFromUrl() is intended for use with remote URLs only.\"\n                    }));\n                    return null;\n                }\n            }\n            url = new URL(url);\n            const { name = url.pathname.split(\"/\").pop() ?? \"unknown-filename\", customId = undefined } = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.isObject)(_url) ? _url : {};\n            const response = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)(url);\n            if (!response.ok) {\n                downloadErrors[idx] = _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError.toObject(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Failed to download requested file.\",\n                    cause: response\n                }));\n                return undefined;\n            }\n            return yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.promise(()=>response.blob()).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen((blob)=>new UTFile([\n                    blob\n                ], name, {\n                    customId\n                })));\n        }), {\n        concurrency: 10\n    });\nconst getPresignedUrls = (input)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n        const { files, metadata, contentDisposition, acl } = input;\n        const fileData = files.map((file)=>({\n                name: file.name ?? \"unnamed-blob\",\n                type: file.type,\n                size: file.size,\n                ...\"customId\" in file ? {\n                    customId: file.customId\n                } : {}\n            }));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Getting presigned URLs for files\", fileData);\n        const responseSchema = _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n            data: PresignedURLResponse\n        });\n        const presigneds = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(\"/v6/uploadFiles\"), {\n            method: \"POST\",\n            cache: \"no-store\",\n            body: JSON.stringify({\n                files: fileData,\n                metadata,\n                contentDisposition,\n                acl\n            }),\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseResponseJson), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(responseSchema)), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTag(\"ParseError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.die(e)), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTag(\"FetchError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.die(e)));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Got presigned URLs:\", presigneds.data);\n        return files.map((file, i)=>({\n                file,\n                presigned: presigneds.data[i]\n            }));\n    });\nconst uploadFile = (input)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.gen(function*() {\n        const { file, presigned } = input;\n        if (\"urls\" in presigned) {\n            yield* uploadMultipart(file, presigned);\n        } else {\n            yield* uploadPresignedPost(file, presigned);\n        }\n        yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(`/v6/pollUpload/${presigned.key}`)).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseResponseJson), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(PollUploadResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tap(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Polled upload\", presigned.key)), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen((res)=>res.status === \"done\" ? effect_Effect__WEBPACK_IMPORTED_MODULE_4__.succeed(undefined) : effect_Effect__WEBPACK_IMPORTED_MODULE_4__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError())), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.retry({\n            while: (err)=>err instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.RetryError,\n            schedule: effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.exponential(effect_Duration__WEBPACK_IMPORTED_MODULE_6__.millis(10), 4).pipe(effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.andThenEither(effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.spaced(effect_Duration__WEBPACK_IMPORTED_MODULE_6__.seconds(1))), effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.compose(effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.elapsed), effect_Schedule__WEBPACK_IMPORTED_MODULE_5__.whileOutput(effect_Duration__WEBPACK_IMPORTED_MODULE_6__.lessThanOrEqualTo(effect_Duration__WEBPACK_IMPORTED_MODULE_6__.minutes(1))))\n        }), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTag(\"RetryError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.die(e)));\n        return {\n            key: presigned.key,\n            url: presigned.fileUrl,\n            appUrl: presigned.appUrl,\n            name: file.name,\n            size: file.size,\n            type: file.type,\n            customId: \"customId\" in file ? file.customId ?? null : null\n        };\n    });\nfunction parseTimeToSeconds(time) {\n    const match = time.toString().split(/(\\d+)/).filter(Boolean);\n    const num = Number(match[0]);\n    const unit = (match[1] ?? \"s\").trim().slice(0, 1);\n    const multiplier = {\n        s: 1,\n        m: 60,\n        h: 3600,\n        d: 86400\n    }[unit];\n    return num * multiplier;\n}\nclass UTApi {\n    constructor(opts){\n        this.requestUploadThing = (pathname, body, responseSchema)=>{\n            const url = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(pathname);\n            effect_Effect__WEBPACK_IMPORTED_MODULE_4__.runSync(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Requesting UploadThing:\", {\n                url,\n                body,\n                headers: this.defaultHeaders\n            }));\n            const headers = new Headers([\n                [\n                    \"Content-Type\",\n                    \"application/json\"\n                ]\n            ]);\n            for (const [key, value] of Object.entries(this.defaultHeaders)){\n                if (typeof value === \"string\") headers.set(key, value);\n            }\n            return (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.fetchEff)(url, {\n                method: \"POST\",\n                cache: \"no-store\",\n                body: JSON.stringify(body),\n                headers\n            }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseResponseJson), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(responseSchema)), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTag(\"FetchError\", (err)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(\"Request failed:\", err).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(()=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.die(err)))), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.catchTag(\"ParseError\", (err)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logError(\"Response parsing failed:\", err).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen(()=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.die(err)))), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tap((res)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"UploadThing response:\", res)));\n        };\n        this.executeAsync = (program, signal)=>program.pipe(withMinimalLogLevel(this.logLevel), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.provide(ConsolaLogger), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.provideService(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.FetchContext, {\n                fetch: this.fetch,\n                baseHeaders: this.defaultHeaders\n            }), (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.runPromise(e, signal ? {\n                    signal\n                } : undefined));\n        /**\n   * Request to delete files from UploadThing storage.\n   * @param {string | string[]} fileKeys\n   *\n   * @example\n   * await deleteFiles(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   *\n   * @example\n   * await deleteFiles([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n   *\n   * @example\n   * await deleteFiles(\"myCustomIdentifier\", { keyType: \"customId\" })\n   */ this.deleteFiles = async (keys, opts)=>{\n            guardServerOnly();\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            class DeleteFileResponse extends _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Class(\"DeleteFileResponse\")({\n                success: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Boolean,\n                deletedCount: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Number\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/deleteFiles\", keyType === \"fileKey\" ? {\n                fileKeys: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.asArray)(keys)\n            } : {\n                customIds: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.asArray)(keys)\n            }, DeleteFileResponse));\n        };\n        /**\n   * Request file URLs from UploadThing storage.\n   * @param {string | string[]} fileKeys\n   *\n   * @example\n   * const data = await getFileUrls(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   * console.log(data); // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\"}]\n   *\n   * @example\n   * const data = await getFileUrls([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n   * console.log(data) // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\" },{key: \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\", url: \"https://uploadthing.com/f/1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"}]\n   */ this.getFileUrls = async (keys, opts)=>{\n            guardServerOnly();\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            class GetFileUrlResponse extends _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Class(\"GetFileUrlResponse\")({\n                data: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Array(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n                    key: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n                    url: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String\n                }))\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/getFileUrl\", keyType === \"fileKey\" ? {\n                fileKeys: keys\n            } : {\n                customIds: keys\n            }, GetFileUrlResponse));\n        };\n        /**\n   * Request file list from UploadThing storage.\n   * @param {object} opts\n   * @param {number} opts.limit The maximum number of files to return\n   * @param {number} opts.offset The number of files to skip\n   *\n   * @example\n   * const data = await listFiles({ limit: 1 });\n   * console.log(data); // { key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", id: \"2e0fdb64-9957-4262-8e45-f372ba903ac8\" }\n   */ this.listFiles = async (opts)=>{\n            guardServerOnly();\n            class ListFileResponse extends _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Class(\"ListFileResponse\")({\n                hasMore: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Boolean,\n                files: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Array(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n                    id: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n                    customId: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.NullOr(_effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String),\n                    key: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n                    name: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n                    status: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Literal(\"Deletion Pending\", \"Failed\", \"Uploaded\", \"Uploading\")\n                }))\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/listFiles\", {\n                ...opts\n            }, ListFileResponse));\n        };\n        this.renameFiles = async (updates)=>{\n            guardServerOnly();\n            class RenameFileResponse extends _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Class(\"RenameFileResponse\")({\n                success: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Boolean\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/renameFiles\", {\n                updates: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.asArray)(updates)\n            }, RenameFileResponse));\n        };\n        /** @deprecated Use {@link renameFiles} instead. */ this.renameFile = this.renameFiles;\n        this.getUsageInfo = async ()=>{\n            guardServerOnly();\n            class GetUsageInfoResponse extends _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Class(\"GetUsageInfoResponse\")({\n                totalBytes: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Number,\n                appTotalBytes: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Number,\n                filesUploaded: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Number,\n                limitBytes: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Number\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/getUsageInfo\", {}, GetUsageInfoResponse));\n        };\n        /** Request a presigned url for a private file(s) */ this.getSignedURL = async (key, opts)=>{\n            guardServerOnly();\n            const expiresIn = opts?.expiresIn ? parseTimeToSeconds(opts.expiresIn) : undefined;\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            if (opts?.expiresIn && isNaN(expiresIn)) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n                });\n            }\n            if (expiresIn && expiresIn > 86400 * 7) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"expiresIn must be less than 7 days (604800 seconds).\"\n                });\n            }\n            class GetSignedUrlResponse extends _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Class(\"GetSignedUrlResponse\")({\n                url: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.String\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/requestFileAccess\", keyType === \"fileKey\" ? {\n                fileKey: key,\n                expiresIn\n            } : {\n                customId: key,\n                expiresIn\n            }, GetSignedUrlResponse));\n        };\n        /**\n   * Update the ACL of a file or set of files.\n   *\n   * @example\n   * // Make a single file public\n   * await utapi.updateACL(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", \"public-read\");\n   *\n   * // Make multiple files private\n   * await utapi.updateACL(\n   *   [\n   *     \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\n   *     \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\",\n   *   ],\n   *   \"private\",\n   * );\n   */ this.updateACL = async (keys, acl, opts)=>{\n            guardServerOnly();\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            const updates = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.asArray)(keys).map((key)=>{\n                return keyType === \"fileKey\" ? {\n                    fileKey: key,\n                    acl\n                } : {\n                    customId: key,\n                    acl\n                };\n            });\n            const responseSchema = _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n                success: _effect_schema_Schema__WEBPACK_IMPORTED_MODULE_3__.Boolean\n            });\n            return await this.executeAsync(this.requestUploadThing(\"/v6/updateACL\", {\n                updates\n            }, responseSchema));\n        };\n        // Assert some stuff\n        guardServerOnly();\n        incompatibleNodeGuard();\n        const apiKey = getApiKeyOrThrow(opts?.apiKey);\n        this.fetch = opts?.fetch ?? globalThis.fetch;\n        this.defaultHeaders = {\n            \"x-uploadthing-api-key\": apiKey,\n            \"x-uploadthing-version\": version,\n            \"x-uploadthing-be-adapter\": \"server-sdk\",\n            \"x-uploadthing-fe-package\": undefined\n        };\n        this.defaultKeyType = opts?.defaultKeyType ?? \"fileKey\";\n        this.logLevel = opts?.logLevel;\n    }\n    async uploadFiles(files, opts) {\n        guardServerOnly();\n        const uploads = await this.executeAsync(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.flatMap(uploadFilesInternal({\n            files: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.asArray)(files),\n            contentDisposition: opts?.contentDisposition ?? \"inline\",\n            metadata: opts?.metadata ?? {},\n            acl: opts?.acl\n        }), (ups)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.succeed(Array.isArray(files) ? ups : ups[0])).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.tap((res)=>effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Finished uploading:\", res))), opts?.signal);\n        return uploads;\n    }\n    async uploadFilesFromUrl(urls, opts) {\n        guardServerOnly();\n        const downloadErrors = {};\n        const uploads = await this.executeAsync(downloadFiles((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.asArray)(urls), downloadErrors).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen((files)=>files.filter((f)=>f != null)), effect_Effect__WEBPACK_IMPORTED_MODULE_4__.andThen((files)=>uploadFilesInternal({\n                files,\n                contentDisposition: opts?.contentDisposition ?? \"inline\",\n                metadata: opts?.metadata ?? {},\n                acl: opts?.acl\n            }))), opts?.signal);\n        /** Put it all back together, preserve the order of files */ const responses = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.asArray)(urls).map((_, index)=>{\n            if (downloadErrors[index]) {\n                return {\n                    data: null,\n                    error: downloadErrors[index]\n                };\n            }\n            return uploads.shift();\n        });\n        /** Return single object or array based on input urls */ const uploadFileResponse = Array.isArray(urls) ? responses : responses[0];\n        effect_Effect__WEBPACK_IMPORTED_MODULE_4__.runSync(effect_Effect__WEBPACK_IMPORTED_MODULE_4__.logDebug(\"Finished uploading:\", uploadFileResponse));\n        return uploadFileResponse;\n    }\n}\nconst createUploadthing = (opts)=>createBuilder(opts);\n/** @internal */ const INTERNAL_DO_NOT_USE_createRouteHandlerCore = (opts, adapter)=>{\n    incompatibleNodeGuard();\n    const requestHandler = buildRequestHandler(opts, adapter);\n    const getBuildPerms = buildPermissionsInfoHandler(opts);\n    const POST = async (request)=>{\n        const req = request instanceof Request ? request : request.request;\n        const response = await runRequestHandlerAsync(requestHandler, {\n            req,\n            middlewareArgs: {\n                req,\n                event: undefined,\n                res: undefined\n            }\n        }, opts.config);\n        if (response.success === false) {\n            return Response.json(formatError(response.error, opts.router), {\n                status: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.getStatusCodeFromError)(response.error),\n                headers: {\n                    \"x-uploadthing-version\": version\n                }\n            });\n        }\n        const res = Response.json(response.body, {\n            headers: {\n                \"x-uploadthing-version\": version\n            }\n        });\n        // @ts-expect-error - this is a custom property\n        res.cleanup = response.cleanup;\n        return res;\n    };\n    const GET = (request)=>{\n        return Response.json(getBuildPerms(), {\n            headers: {\n                \"x-uploadthing-version\": version\n            }\n        });\n    };\n    return {\n        GET,\n        POST\n    };\n};\nconst createRouteHandler = (opts)=>INTERNAL_DO_NOT_USE_createRouteHandlerCore(opts, \"server\");\nconst extractRouterConfig = (router)=>buildPermissionsInfoHandler({\n        router\n    })();\n/**\n * @deprecated Use {@link createRouteHandler} instead\n */ const createServerHandler = createRouteHandler;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvc2VydmVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMlo7QUFDcFc7QUFDWjtBQUNIO0FBQ0k7QUFDQTtBQUNZO0FBQ2hCO0FBQ1U7QUFDRDtBQUNQO0FBQ047QUFDZ0Y7QUFDckU7QUFDRTtBQUVqRCxJQUFJd0MsVUFBVTtBQUVkLFNBQVNDLHNCQUFzQkMsS0FBSztJQUNoQyxPQUFPO1FBQ0hDLFNBQVNELE1BQU1DLE9BQU87SUFDMUI7QUFDSjtBQUNBLFNBQVNDLFlBQVlGLEtBQUssRUFBRUcsTUFBTTtJQUM5QixNQUFNQyxpQkFBaUJELE1BQU0sQ0FBQ0UsT0FBT0MsSUFBSSxDQUFDSCxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUVJLEtBQUtILGtCQUFrQkw7SUFDOUUsK0RBQStEO0lBQy9ELE9BQU9LLGVBQWVKO0FBQzFCO0FBRUEsTUFBTVEsMkJBQTJCNUIsMERBQVMsSUFBSXRCLHlFQUF3QkE7QUFDdEVzQiwwREFBUyxJQUFJckIsMERBQVNBO0FBQ3RCOzs7O0NBSUMsR0FBRzs7Q0FFSCxHQUFHLE1BQU1tRCx1QkFBdUI5Qix3REFBTyxDQUFDLGtCQUFrQjtJQUN2RGdDLE1BQU1oQyx5REFBUTtJQUNka0MsTUFBTWxDLHlEQUFRO0lBQ2RvQyxNQUFNcEMseURBQVE7QUFDbEI7QUFDQTtBQUNBOztDQUVDLEdBQUcsTUFBTXFDLG1DQUFtQ1AsZUFBZVEsTUFBTSxDQUFDLDhCQUE4QjtJQUM3RkMsVUFBVXZDLHlEQUFRLENBQUNBLHlEQUFRO0FBQy9CO0FBQ0E7QUFDQTs7Ozs7Q0FLQyxHQUFHLE1BQU15Qyx5QkFBeUJKLDJCQUEyQkMsTUFBTSxDQUFDLG9CQUFvQjtJQUNyRkksS0FBSzFDLHlEQUFRO0lBQ2IyQyxLQUFLM0MseURBQVE7SUFDYjRDLFFBQVE1Qyx5REFBUTtBQUNwQjtBQUNBO0FBQ0E7Ozs7Q0FJQyxHQUFHLE1BQU02QyxzQkFBc0I3Qyx3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QkFDQWtOLE9BQU8zTztnQkFDUHZILEtBQUt1SDtZQUNUO1FBQ0osR0FBR2YsS0FBS2dDLE1BQU07UUFDZCxJQUFJcEosU0FBU2QsT0FBTyxLQUFLLE9BQU87WUFDNUIsT0FBTzBELFNBQVNnSyxJQUFJLENBQUM3USxZQUFZaUUsU0FBU25FLEtBQUssRUFBRXVMLEtBQUtwTCxNQUFNLEdBQUc7Z0JBQzNEd0MsUUFBUWhFLDJFQUFzQkEsQ0FBQ3dGLFNBQVNuRSxLQUFLO2dCQUM3Q3FFLFNBQVM7b0JBQ0wseUJBQXlCdkU7Z0JBQzdCO1lBQ0o7UUFDSjtRQUNBLE1BQU1pRixNQUFNZ0MsU0FBU2dLLElBQUksQ0FBQzVNLFNBQVMyQyxJQUFJLEVBQUU7WUFDckN6QyxTQUFTO2dCQUNMLHlCQUF5QnZFO1lBQzdCO1FBQ0o7UUFDQSwrQ0FBK0M7UUFDL0NpRixJQUFJNk4sT0FBTyxHQUFHek8sU0FBU3lPLE9BQU87UUFDOUIsT0FBTzdOO0lBQ1g7SUFDQSxNQUFNbVcsTUFBTSxDQUFDSDtRQUNULE9BQU9oVSxTQUFTZ0ssSUFBSSxDQUFDOEosaUJBQWlCO1lBQ2xDeFcsU0FBUztnQkFDTCx5QkFBeUJ2RTtZQUM3QjtRQUNKO0lBQ0o7SUFDQSxPQUFPO1FBQ0hvYjtRQUNBSjtJQUNKO0FBQ0o7QUFDQSxNQUFNSyxxQkFBcUIsQ0FBQzVQLE9BQU9vUCwyQ0FBMkNwUCxNQUFNO0FBQ3BGLE1BQU02UCxzQkFBc0IsQ0FBQ2piLFNBQVM2Uyw0QkFBNEI7UUFDMUQ3UztJQUNKO0FBQ0o7O0NBRUMsR0FBRyxNQUFNa2Isc0JBQXNCRjtBQUVzSCIsInNvdXJjZXMiOlsid2VicGFjazovL2V2ZW50bHkvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvc2VydmVyL2luZGV4LmpzP2ViNjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmFsaWRDb250ZW50RGlzcG9zaXRpb25zLCBWYWxpZEFDTHMsIGZldGNoRWZmLCBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMLCBwYXJzZVJlc3BvbnNlSnNvbiwgUmV0cnlFcnJvciwgVXBsb2FkVGhpbmdFcnJvciwgc2lnblBheWxvYWQsIGlzT2JqZWN0LCBjb250ZW50RGlzcG9zaXRpb24sIGdldFR5cGVGcm9tRmlsZU5hbWUsIG9iamVjdEtleXMsIEludmFsaWRSb3V0ZUNvbmZpZ0Vycm9yLCBmaWxlU2l6ZVRvQnl0ZXMsIGJ5dGVzVG9GaWxlU2l6ZSwgRmV0Y2hDb250ZXh0LCBnZXRGdWxsQXBpVXJsLCB2ZXJpZnlTaWduYXR1cmUsIHBhcnNlUmVxdWVzdEpzb24sIGZpbGxJbnB1dFJvdXRlQ29uZmlnLCBhc0FycmF5LCBnZXRTdGF0dXNDb2RlRnJvbUVycm9yIH0gZnJvbSAnQHVwbG9hZHRoaW5nL3NoYXJlZCc7XG5leHBvcnQgeyBVcGxvYWRUaGluZ0Vycm9yIH0gZnJvbSAnQHVwbG9hZHRoaW5nL3NoYXJlZCc7XG5pbXBvcnQgKiBhcyBTIGZyb20gJ0BlZmZlY3Qvc2NoZW1hL1NjaGVtYSc7XG5pbXBvcnQgKiBhcyBFZmZlY3QgZnJvbSAnZWZmZWN0L0VmZmVjdCc7XG5pbXBvcnQgKiBhcyBEdXJhdGlvbiBmcm9tICdlZmZlY3QvRHVyYXRpb24nO1xuaW1wb3J0ICogYXMgU2NoZWR1bGUgZnJvbSAnZWZmZWN0L1NjaGVkdWxlJztcbmltcG9ydCB7IGNyZWF0ZUNvbnNvbGEsIExvZ0xldmVscyB9IGZyb20gJ2NvbnNvbGEvY29yZSc7XG5pbXBvcnQgKiBhcyBMb2dnZXIgZnJvbSAnZWZmZWN0L0xvZ2dlcic7XG5pbXBvcnQgKiBhcyBFZmZlY3RMb2dMZXZlbCBmcm9tICdlZmZlY3QvTG9nTGV2ZWwnO1xuaW1wb3J0IHsgcHJvY2VzcywgaXNEZXZlbG9wbWVudCB9IGZyb20gJ3N0ZC1lbnYnO1xuaW1wb3J0ICogYXMgQ29udGV4dCBmcm9tICdlZmZlY3QvQ29udGV4dCc7XG5pbXBvcnQgKiBhcyBEYXRhIGZyb20gJ2VmZmVjdC9EYXRhJztcbmltcG9ydCB7IGlzQWN0aW9uVHlwZSwgVkFMSURfQUNUSU9OX1RZUEVTLCBpc1VwbG9hZFRoaW5nSG9vaywgVkFMSURfVVRfSE9PS1MsIFVURmlsZXMgfSBmcm9tICcuLi9pbnRlcm5hbC90eXBlcy5qcyc7XG5leHBvcnQgeyBVVEZpbGVzIH0gZnJvbSAnLi4vaW50ZXJuYWwvdHlwZXMuanMnO1xuaW1wb3J0IHsgbG9va3VwIH0gZnJvbSAnQHVwbG9hZHRoaW5nL21pbWUtdHlwZXMnO1xuXG52YXIgdmVyc2lvbiA9IFwiNi4xMy4zXCI7XG5cbmZ1bmN0aW9uIGRlZmF1bHRFcnJvckZvcm1hdHRlcihlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcbiAgICB9O1xufVxuZnVuY3Rpb24gZm9ybWF0RXJyb3IoZXJyb3IsIHJvdXRlcikge1xuICAgIGNvbnN0IGVycm9yRm9ybWF0dGVyID0gcm91dGVyW09iamVjdC5rZXlzKHJvdXRlcilbMF1dPy5fZGVmLmVycm9yRm9ybWF0dGVyID8/IGRlZmF1bHRFcnJvckZvcm1hdHRlcjtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1yZXR1cm5cbiAgICByZXR1cm4gZXJyb3JGb3JtYXR0ZXIoZXJyb3IpO1xufVxuXG5jb25zdCBDb250ZW50RGlzcG9zaXRpb25TY2hlbWEgPSBTLkxpdGVyYWwoLi4uVmFsaWRDb250ZW50RGlzcG9zaXRpb25zKTtcblMuTGl0ZXJhbCguLi5WYWxpZEFDTHMpO1xuLyoqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogPT09PT09PT09PT09PT09PT09PT09PT09IEZpbGUgVHlwZSBIaWVyYXJjaHkgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqLyAvKipcbiAqIFByb3BlcnRpZXMgZnJvbSB0aGUgd2ViIEZpbGUgb2JqZWN0LCB0aGlzIGlzIHdoYXQgdGhlIGNsaWVudCBzZW5kcyB3aGVuIGluaXRpYXRpbmcgYW4gdXBsb2FkXG4gKi8gY2xhc3MgRmlsZVVwbG9hZERhdGEgZXh0ZW5kcyBTLkNsYXNzKFwiRmlsZVVwbG9hZERhdGFcIikoe1xuICAgIG5hbWU6IFMuU3RyaW5nLFxuICAgIHNpemU6IFMuTnVtYmVyLFxuICAgIHR5cGU6IFMuU3RyaW5nXG59KSB7XG59XG4vKipcbiAqIGAubWlkZGxld2FyZSgpYCBjYW4gYWRkIGEgY3VzdG9tSWQgdG8gdGhlIGluY29taW5nIGZpbGUgZGF0YVxuICovIGNsYXNzIEZpbGVVcGxvYWREYXRhV2l0aEN1c3RvbUlkIGV4dGVuZHMgRmlsZVVwbG9hZERhdGEuZXh0ZW5kKFwiRmlsZVVwbG9hZERhdGFXaXRoQ3VzdG9tSWRcIikoe1xuICAgIGN1c3RvbUlkOiBTLk51bGxPcihTLlN0cmluZylcbn0pIHtcbn1cbi8qKlxuICogV2hlbiBmaWxlcyBhcmUgdXBsb2FkZWQsIHdlIGdldCBiYWNrXG4gKiAtIGEga2V5XG4gKiAtIGEgZGlyZWN0IFVSTCBmb3IgdGhlIGZpbGVcbiAqIC0gYW4gYXBwLXNwZWNpZmljIFVSTCBmb3IgdGhlIGZpbGUgKHVzZWZ1bCBmb3Igc2NvcGluZyBlZy4gZm9yIG9wdGltaXphdGlvbiBhbGxvd2VkIG9yaWdpbnMpXG4gKi8gY2xhc3MgVXBsb2FkZWRGaWxlRGF0YSBleHRlbmRzIEZpbGVVcGxvYWREYXRhV2l0aEN1c3RvbUlkLmV4dGVuZChcIlVwbG9hZGVkRmlsZURhdGFcIikoe1xuICAgIGtleTogUy5TdHJpbmcsXG4gICAgdXJsOiBTLlN0cmluZyxcbiAgICBhcHBVcmw6IFMuU3RyaW5nXG59KSB7XG59XG4vKipcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT0gU2VydmVyIFJlc3BvbnNlIFNjaGVtYXMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqLyBjbGFzcyBQcmVzaWduZWRCYXNlIGV4dGVuZHMgUy5DbGFzcyhcIlByZXNpZ25lZEJhc2VTY2hlbWFcIikoe1xuICAgIGtleTogUy5TdHJpbmcsXG4gICAgZmlsZU5hbWU6IFMuU3RyaW5nLFxuICAgIGZpbGVUeXBlOiBTLlN0cmluZyxcbiAgICBmaWxlVXJsOiBTLlN0cmluZyxcbiAgICBhcHBVcmw6IFMuU3RyaW5nLFxuICAgIHBvbGxpbmdKd3Q6IFMuU3RyaW5nLFxuICAgIHBvbGxpbmdVcmw6IFMuU3RyaW5nLFxuICAgIGNvbnRlbnREaXNwb3NpdGlvbjogQ29udGVudERpc3Bvc2l0aW9uU2NoZW1hLFxuICAgIGN1c3RvbUlkOiBTLk51bGxPcihTLlN0cmluZylcbn0pIHtcbn1cbmNsYXNzIE1QVVJlc3BvbnNlIGV4dGVuZHMgUHJlc2lnbmVkQmFzZS5leHRlbmQoXCJNUFVSZXNwb25zZVNjaGVtYVwiKSh7XG4gICAgdXJsczogUy5BcnJheShTLlN0cmluZyksXG4gICAgdXBsb2FkSWQ6IFMuU3RyaW5nLFxuICAgIGNodW5rU2l6ZTogUy5OdW1iZXIsXG4gICAgY2h1bmtDb3VudDogUy5OdW1iZXJcbn0pIHtcbn1cbmNsYXNzIFBTUFJlc3BvbnNlIGV4dGVuZHMgUHJlc2lnbmVkQmFzZS5leHRlbmQoXCJQU1BSZXNwb25zZVNjaGVtYVwiKSh7XG4gICAgdXJsOiBTLlN0cmluZyxcbiAgICBmaWVsZHM6IFMuUmVjb3JkKFMuU3RyaW5nLCBTLlN0cmluZylcbn0pIHtcbn1cbmNvbnN0IFByZXNpZ25lZFVSTFJlc3BvbnNlID0gUy5BcnJheShTLlVuaW9uKFBTUFJlc3BvbnNlLCBNUFVSZXNwb25zZSkpO1xuY2xhc3MgUG9sbFVwbG9hZFJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIlBvbGxVcGxvYWRSZXNwb25zZVwiKSh7XG4gICAgc3RhdHVzOiBTLlN0cmluZyxcbiAgICBmaWxlRGF0YTogUy5vcHRpb25hbChTLlN0cnVjdCh7XG4gICAgICAgIGZpbGVLZXk6IFMuTnVsbE9yKFMuU3RyaW5nKSxcbiAgICAgICAgZmlsZU5hbWU6IFMuU3RyaW5nLFxuICAgICAgICBmaWxlU2l6ZTogUy5OdW1iZXIsXG4gICAgICAgIGZpbGVUeXBlOiBTLlN0cmluZyxcbiAgICAgICAgbWV0YWRhdGE6IFMuTnVsbE9yKFMuU3RyaW5nKSxcbiAgICAgICAgY3VzdG9tSWQ6IFMuTnVsbE9yKFMuU3RyaW5nKSxcbiAgICAgICAgY2FsbGJhY2tVcmw6IFMub3B0aW9uYWwoUy5TdHJpbmcpLFxuICAgICAgICBjYWxsYmFja1NsdWc6IFMub3B0aW9uYWwoUy5TdHJpbmcpXG4gICAgfSkpXG59KSB7XG59XG5jbGFzcyBGYWlsdXJlQ2FsbGJhY2tSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJGYWlsdXJlQ2FsbGJhY2tSZXNwb25zZVwiKSh7XG4gICAgc3VjY2VzczogUy5Cb29sZWFuLFxuICAgIG1lc3NhZ2U6IFMub3B0aW9uYWwoUy5TdHJpbmcpXG59KSB7XG59XG5jbGFzcyBTZXJ2ZXJDYWxsYmFja1Bvc3RSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJTZXJ2ZXJDYWxsYmFja1Bvc3RSZXNwb25zZVwiKSh7XG4gICAgc3RhdHVzOiBTLlN0cmluZ1xufSkge1xufVxuLyoqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogPT09PT09PT09PT09PT09PT09PT09PT09IENsaWVudCBBY3Rpb24gUGF5bG9hZHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqLyBjbGFzcyBVcGxvYWRBY3Rpb25QYXlsb2FkIGV4dGVuZHMgUy5DbGFzcyhcIlVwbG9hZEFjdGlvblBheWxvYWRcIikoe1xuICAgIGZpbGVzOiBTLkFycmF5KEZpbGVVcGxvYWREYXRhKSxcbiAgICBpbnB1dDogUy5Vbmtub3duXG59KSB7XG59XG5jbGFzcyBGYWlsdXJlQWN0aW9uUGF5bG9hZCBleHRlbmRzIFMuQ2xhc3MoXCJGYWlsdXJlQWN0aW9uUGF5bG9hZFwiKSh7XG4gICAgZmlsZUtleTogUy5TdHJpbmcsXG4gICAgdXBsb2FkSWQ6IFMuTnVsbE9yKFMuU3RyaW5nKSxcbiAgICBzdG9yYWdlUHJvdmlkZXJFcnJvcjogUy5vcHRpb25hbChTLlN0cmluZyksXG4gICAgZmlsZU5hbWU6IFMuU3RyaW5nXG59KSB7XG59XG5jbGFzcyBNdWx0aXBhcnRDb21wbGV0ZUFjdGlvblBheWxvYWQgZXh0ZW5kcyBTLkNsYXNzKFwiTXVsdGlwYXJ0Q29tcGxldGVBY3Rpb25QYXlsb2FkXCIpKHtcbiAgICBmaWxlS2V5OiBTLlN0cmluZyxcbiAgICB1cGxvYWRJZDogUy5TdHJpbmcsXG4gICAgZXRhZ3M6IFMuQXJyYXkoUy5TdHJ1Y3Qoe1xuICAgICAgICB0YWc6IFMuU3RyaW5nLFxuICAgICAgICBwYXJ0TnVtYmVyOiBTLk51bWJlclxuICAgIH0pKVxufSkge1xufVxuXG5jb25zdCBpc1ZhbGlkUmVzcG9uc2UgPSAocmVzcG9uc2UpPT57XG4gICAgaWYgKCFyZXNwb25zZS5vaykgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKCFyZXNwb25zZS5oZWFkZXJzLmhhcyhcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiKSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufTtcbmNvbnN0IGNvbmRpdGlvbmFsRGV2U2VydmVyID0gKHByZXNpZ25lZCwgYXBpS2V5KT0+e1xuICAgIHJldHVybiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgY29uc3QgZmlsZSA9IHlpZWxkKiBmZXRjaEVmZihnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMKGAvdjYvcG9sbFVwbG9hZC8ke3ByZXNpZ25lZC5rZXl9YCkpLnBpcGUoRWZmZWN0LmFuZFRoZW4ocGFyc2VSZXNwb25zZUpzb24pLCBFZmZlY3QuYW5kVGhlbihTLmRlY29kZVVua25vd24oUG9sbFVwbG9hZFJlc3BvbnNlKSksIEVmZmVjdC5hbmRUaGVuKChyZXMpPT5yZXMuc3RhdHVzID09PSBcImRvbmVcIiAmJiByZXMuZmlsZURhdGEgPyBFZmZlY3Quc3VjY2VlZChyZXMuZmlsZURhdGEpIDogRWZmZWN0LmZhaWwobmV3IFJldHJ5RXJyb3IoKSkpLCBFZmZlY3QucmV0cnkoe1xuICAgICAgICAgICAgd2hpbGU6IChlcnIpPT5lcnIgaW5zdGFuY2VvZiBSZXRyeUVycm9yLFxuICAgICAgICAgICAgc2NoZWR1bGU6IFNjaGVkdWxlLmV4cG9uZW50aWFsKDEwLCA0KS5waXBlKC8vIDEwbXMsIDQwbXMsIDE2MG1zLCA2NDBtcy4uLlxuICAgICAgICAgICAgU2NoZWR1bGUudW5pb24oU2NoZWR1bGUuc3BhY2VkKDEwMDApKSwgU2NoZWR1bGUuY29tcG9zZShTY2hlZHVsZS5lbGFwc2VkKSwgU2NoZWR1bGUud2hpbGVPdXRwdXQoRHVyYXRpb24ubGVzc1RoYW5PckVxdWFsVG8oRHVyYXRpb24ubWludXRlcygxKSkpKVxuICAgICAgICB9KSwgRWZmZWN0LmNhdGNoVGFnKFwiUmV0cnlFcnJvclwiLCAoKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmlsZSB0b29rIHRvbyBsb25nIHRvIHVwbG9hZFwiXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICBsZXQgY2FsbGJhY2tVcmwgPSBmaWxlLmNhbGxiYWNrVXJsICsgYD9zbHVnPSR7ZmlsZS5jYWxsYmFja1NsdWd9YDtcbiAgICAgICAgaWYgKCFjYWxsYmFja1VybC5zdGFydHNXaXRoKFwiaHR0cFwiKSkgY2FsbGJhY2tVcmwgPSBcImh0dHA6Ly9cIiArIGNhbGxiYWNrVXJsO1xuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0luZm8oYFNJTVVMQVRJTkcgRklMRSBVUExPQUQgV0VCSE9PSyBDQUxMQkFDS2AsIGNhbGxiYWNrVXJsKTtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHN0YXR1czogXCJ1cGxvYWRlZFwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IEpTT04ucGFyc2UoZmlsZS5tZXRhZGF0YSA/PyBcInt9XCIpLFxuICAgICAgICAgICAgZmlsZTogbmV3IFVwbG9hZGVkRmlsZURhdGEoe1xuICAgICAgICAgICAgICAgIHVybDogcHJlc2lnbmVkLmZpbGVVcmwsXG4gICAgICAgICAgICAgICAgYXBwVXJsOiBwcmVzaWduZWQuYXBwVXJsLFxuICAgICAgICAgICAgICAgIGtleTogcHJlc2lnbmVkLmtleSxcbiAgICAgICAgICAgICAgICBuYW1lOiBmaWxlLmZpbGVOYW1lLFxuICAgICAgICAgICAgICAgIHNpemU6IGZpbGUuZmlsZVNpemUsXG4gICAgICAgICAgICAgICAgY3VzdG9tSWQ6IGZpbGUuY3VzdG9tSWQsXG4gICAgICAgICAgICAgICAgdHlwZTogZmlsZS5maWxlVHlwZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IHlpZWxkKiBFZmZlY3QudHJ5UHJvbWlzZSh7XG4gICAgICAgICAgICB0cnk6ICgpPT5zaWduUGF5bG9hZChwYXlsb2FkLCBhcGlLZXkpLFxuICAgICAgICAgICAgY2F0Y2g6IChlKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBzaWduIHBheWxvYWRcIixcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tSZXNwb25zZSA9IHlpZWxkKiBmZXRjaEVmZihjYWxsYmFja1VybCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGJvZHk6IHBheWxvYWQsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICAgICAgXCJ1cGxvYWR0aGluZy1ob29rXCI6IFwiY2FsbGJhY2tcIixcbiAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctc2lnbmF0dXJlXCI6IHNpZ25hdHVyZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5waXBlKEVmZmVjdC5jYXRjaFRhZyhcIkZldGNoRXJyb3JcIiwgKCk9PkVmZmVjdC5zdWNjZWVkKG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiA1MDBcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICBpZiAoaXNWYWxpZFJlc3BvbnNlKGNhbGxiYWNrUmVzcG9uc2UpKSB7XG4gICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0luZm8oXCJTdWNjZXNzZnVsbHkgc2ltdWxhdGVkIGNhbGxiYWNrIGZvciBmaWxlXCIsIHByZXNpZ25lZC5rZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dFcnJvcihgXG5GYWlsZWQgdG8gc2ltdWxhdGUgY2FsbGJhY2sgZm9yIGZpbGUgJyR7ZmlsZS5maWxlS2V5fScuIElzIHlvdXIgd2ViaG9vayBjb25maWd1cmVkIGNvcnJlY3RseT9cbiAgLSBNYWtlIHN1cmUgdGhlIFVSTCAnJHtjYWxsYmFja1VybH0nIGlzIGFjY2Vzc2libGUgd2l0aG91dCBhbnkgYXV0aGVudGljYXRpb24uIFlvdSBjYW4gdmVyaWZ5IHRoaXMgYnkgcnVubmluZyAnY3VybCAtWCBQT1NUICR7Y2FsbGJhY2tVcmx9JyBpbiB5b3VyIHRlcm1pbmFsXG4gIC0gU3RpbGwgZmFjaW5nIGlzc3Vlcz8gUmVhZCBodHRwczovL2RvY3MudXBsb2FkdGhpbmcuY29tL2ZhcSBmb3IgY29tbW9uIGlzc3Vlc1xuYC50cmltKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWxlO1xuICAgIH0pO1xufTtcblxuY29uc3QgY29sb3JpemUgPSAoc3RyLCBsZXZlbCk9PntcbiAgICAvLyBUT0RPOiBNYXliZSBjaGVjayBpcyBzaGVsbCBzdXBwb3J0cyBjb2xvcnNcbiAgICBzd2l0Y2gobGV2ZWwpe1xuICAgICAgICBjYXNlIFwiZXJyb3JcIjpcbiAgICAgICAgY2FzZSBcImZhdGFsXCI6XG4gICAgICAgICAgICByZXR1cm4gYFxceDFiWzQxbVxceDFiWzMwbSR7c3RyfVxceDFiWzBtYDtcbiAgICAgICAgY2FzZSBcIndhcm5cIjpcbiAgICAgICAgICAgIHJldHVybiBgXFx4MWJbNDNtXFx4MWJbMzBtJHtzdHJ9XFx4MWJbMG1gO1xuICAgICAgICBjYXNlIFwiaW5mb1wiOlxuICAgICAgICBjYXNlIFwibG9nXCI6XG4gICAgICAgICAgICByZXR1cm4gYFxceDFiWzQ0bVxceDFiWzMwbSR7c3RyfVxceDFiWzBtYDtcbiAgICAgICAgY2FzZSBcImRlYnVnXCI6XG4gICAgICAgICAgICByZXR1cm4gYFxceDFiWzQ3bVxceDFiWzMwbSR7c3RyfVxceDFiWzBtYDtcbiAgICAgICAgY2FzZSBcInRyYWNlXCI6XG4gICAgICAgICAgICByZXR1cm4gYFxceDFiWzQ3bVxceDFiWzMwbSR7c3RyfVxceDFiWzBtYDtcbiAgICAgICAgY2FzZSBcInN1Y2Nlc3NcIjpcbiAgICAgICAgICAgIHJldHVybiBgXFx4MWJbNDJtXFx4MWJbMzBtJHtzdHJ9XFx4MWJbMG1gO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG59O1xuY29uc3QgaWNvbnMgPSB7XG4gICAgZmF0YWw6IFwi4qivXCIsXG4gICAgZXJyb3I6IFwi4qivXCIsXG4gICAgd2FybjogXCLimqDvuI9cIixcbiAgICBpbmZvOiBcIuKEuVwiLFxuICAgIGxvZzogXCLihLlcIixcbiAgICBkZWJ1ZzogXCLimplcIixcbiAgICB0cmFjZTogXCLihpJcIixcbiAgICBzdWNjZXNzOiBcIuKck1wiXG59O1xuZnVuY3Rpb24gZm9ybWF0U3RhY2soc3RhY2spIHtcbiAgICBjb25zdCBjd2QgPSBcImN3ZFwiIGluIHByb2Nlc3MgJiYgdHlwZW9mIHByb2Nlc3MuY3dkID09PSBcImZ1bmN0aW9uXCIgPyBwcm9jZXNzLmN3ZCgpIDogXCJfX1Vua25vd25DV0RfX1wiO1xuICAgIHJldHVybiBcIiAgXCIgKyBzdGFjay5zcGxpdChcIlxcblwiKS5zcGxpY2UoMSkubWFwKChsKT0+bC50cmltKCkucmVwbGFjZShcImZpbGU6Ly9cIiwgXCJcIikucmVwbGFjZShjd2QgKyBcIi9cIiwgXCJcIikpLmpvaW4oXCJcXG4gIFwiKTtcbn1cbmZ1bmN0aW9uIGZvcm1hdEFyZ3MoYXJncykge1xuICAgIGNvbnN0IGZtdEFyZ3MgPSBhcmdzLm1hcCgoYXJnKT0+e1xuICAgICAgICBpZiAoaXNPYmplY3QoYXJnKSAmJiB0eXBlb2YgYXJnLnN0YWNrID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJnLm1lc3NhZ2UgKyBcIlxcblwiICsgZm9ybWF0U3RhY2soYXJnLnN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1yZXR1cm5cbiAgICAgICAgcmV0dXJuIGFyZztcbiAgICB9KTtcbiAgICByZXR1cm4gZm10QXJncy5tYXAoKGFyZyk9PntcbiAgICAgICAgaWYgKHR5cGVvZiBhcmcgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBhcmc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZywgbnVsbCwgNCk7XG4gICAgfSk7XG59XG5jb25zdCBsb2dnZXIgPSBjcmVhdGVDb25zb2xhKHtcbiAgICByZXBvcnRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgICAgbG9nOiAobG9nT2JqKT0+e1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdHlwZSwgdGFnLCBkYXRlLCBhcmdzIH0gPSBsb2dPYmo7XG4gICAgICAgICAgICAgICAgY29uc3QgaWNvbiA9IGljb25zW3R5cGVdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvZ1ByZWZpeCA9IGNvbG9yaXplKGAgJHtpY29ufSAke3RhZ30gJHtkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpfSBgLCB0eXBlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGZvcm1hdEFyZ3MoYXJncykuam9pbihcIiBcIikgLy8gY29uY2F0IGFsbCBhcmd1bWVudHMgdG8gb25lIHNwYWNlLXNlcGFyYXRlZCBzdHJpbmcgKGxpa2UgY29uc29sZSBkb2VzKVxuICAgICAgICAgICAgICAgIC5zcGxpdChcIlxcblwiKSAvLyBzcGxpdCBhbGwgdGhlIG5ld2xpbmVzIChlLmcuIGZyb20gbG9nZ2VkIEpTT04uc3RyaW5naWZpZWQgb2JqZWN0cylcbiAgICAgICAgICAgICAgICAubWFwKChsKT0+bG9nUHJlZml4ICsgXCIgXCIgKyBsKSAvLyBwcmVwZW5kIHRoZSBsb2cgcHJlZml4IHRvIGVhY2ggbGluZVxuICAgICAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpOyAvLyBqb2luIGFsbCB0aGUgbGluZXMgYmFjayB0b2dldGhlclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobGluZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXSxcbiAgICBkZWZhdWx0czoge1xuICAgICAgICB0YWc6IFwiVVBMT0FEVEhJTkdcIlxuICAgIH1cbn0pO1xuY29uc3QgZWZmZWN0TG9nZ2VyTGV2ZWxUb0NvbnNvbGFMZXZlbCA9IHtcbiAgICBBbGw6IFwidmVyYm9zZVwiLFxuICAgIEZhdGFsOiBcImVycm9yXCIsXG4gICAgRXJyb3I6IFwiZXJyb3JcIixcbiAgICBJbmZvOiBcImluZm9cIixcbiAgICBEZWJ1ZzogXCJkZWJ1Z1wiLFxuICAgIFRyYWNlOiBcInRyYWNlXCIsXG4gICAgV2FybmluZzogXCJ3YXJuXCIsXG4gICAgTm9uZTogXCJzaWxlbnRcIlxufTtcbmNvbnN0IHdpdGhNaW5pbWFsTG9nTGV2ZWwgPSAobGV2ZWwgPSBcImluZm9cIik9PntcbiAgICBsb2dnZXIubGV2ZWwgPSBMb2dMZXZlbHNbbGV2ZWxdO1xuICAgIHJldHVybiBMb2dnZXIud2l0aE1pbmltdW1Mb2dMZXZlbCh7XG4gICAgICAgIHNpbGVudDogRWZmZWN0TG9nTGV2ZWwuTm9uZSxcbiAgICAgICAgZXJyb3I6IEVmZmVjdExvZ0xldmVsLkVycm9yLFxuICAgICAgICB3YXJuOiBFZmZlY3RMb2dMZXZlbC5XYXJuaW5nLFxuICAgICAgICBpbmZvOiBFZmZlY3RMb2dMZXZlbC5JbmZvLFxuICAgICAgICBkZWJ1ZzogRWZmZWN0TG9nTGV2ZWwuRGVidWcsXG4gICAgICAgIHRyYWNlOiBFZmZlY3RMb2dMZXZlbC5UcmFjZSxcbiAgICAgICAgdmVyYm9zZTogRWZmZWN0TG9nTGV2ZWwuQWxsXG4gICAgfVtsZXZlbF0pO1xufTtcbmNvbnN0IENvbnNvbGFMb2dnZXIgPSBMb2dnZXIucmVwbGFjZShMb2dnZXIuZGVmYXVsdExvZ2dlciwgTG9nZ2VyLm1ha2UoKHsgbG9nTGV2ZWwsIG1lc3NhZ2UgfSk9PntcbiAgICAvLyBGSVhNRTogUHJvYmFibHkgbG9nIG90aGVyIHN0dWZmIHRoYW4ganVzdCBtZXNzYWdlP1xuICAgIGxvZ2dlcltlZmZlY3RMb2dnZXJMZXZlbFRvQ29uc29sYUxldmVsW2xvZ0xldmVsLl90YWddXShtZXNzYWdlKTtcbn0pKTtcblxuY29uc3QgdXBsb2FkTXVsdGlwYXJ0ID0gKGZpbGUsIHByZXNpZ25lZCk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKGBVcGxvYWRpbmcgZmlsZSAke2ZpbGUubmFtZX0gd2l0aCAke3ByZXNpZ25lZC51cmxzLmxlbmd0aH0gY2h1bmtzIG9mIHNpemUgJHtwcmVzaWduZWQuY2h1bmtTaXplfSBieXRlcyBlYWNoYCk7XG4gICAgICAgIGNvbnN0IGV0YWdzID0geWllbGQqIEVmZmVjdC5mb3JFYWNoKHByZXNpZ25lZC51cmxzLCAodXJsLCBpbmRleCk9PntcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IHByZXNpZ25lZC5jaHVua1NpemUgKiBpbmRleDtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IE1hdGgubWluKG9mZnNldCArIHByZXNpZ25lZC5jaHVua1NpemUsIGZpbGUuc2l6ZSk7XG4gICAgICAgICAgICBjb25zdCBjaHVuayA9IGZpbGUuc2xpY2Uob2Zmc2V0LCBlbmQpO1xuICAgICAgICAgICAgcmV0dXJuIHVwbG9hZFBhcnQoe1xuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICBjaHVuazogY2h1bmssXG4gICAgICAgICAgICAgICAgY29udGVudERpc3Bvc2l0aW9uOiBwcmVzaWduZWQuY29udGVudERpc3Bvc2l0aW9uLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBmaWxlLnR5cGUsXG4gICAgICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICBtYXhSZXRyaWVzOiAxMCxcbiAgICAgICAgICAgICAgICBrZXk6IHByZXNpZ25lZC5rZXksXG4gICAgICAgICAgICAgICAgdXBsb2FkSWQ6IHByZXNpZ25lZC51cGxvYWRJZFxuICAgICAgICAgICAgfSkucGlwZShFZmZlY3QuYW5kVGhlbigoZXRhZyk9Pih7XG4gICAgICAgICAgICAgICAgICAgIHRhZzogZXRhZyxcbiAgICAgICAgICAgICAgICAgICAgcGFydE51bWJlcjogaW5kZXggKyAxXG4gICAgICAgICAgICAgICAgfSkpLCBFZmZlY3QuY2F0Y2hUYWcoXCJSZXRyeUVycm9yXCIsIChlKT0+RWZmZWN0LmRpZShlKSkpO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBjb25jdXJyZW5jeTogXCJpbmhlcml0XCJcbiAgICAgICAgfSk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJGaWxlXCIsIGZpbGUubmFtZSwgXCJ1cGxvYWRlZCBzdWNjZXNzZnVsbHkuXCIpO1xuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiQ29tcGxldGluZyBtdWx0aXBhcnQgdXBsb2FkLi4uXCIpO1xuICAgICAgICB5aWVsZCogY29tcGxldGVNdWx0aXBhcnRVcGxvYWQocHJlc2lnbmVkLCBldGFncyk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJNdWx0aXBhcnQgdXBsb2FkIGNvbXBsZXRlLlwiKTtcbiAgICB9KTtcbi8qKlxuICogVXNlZCBieSBzZXJ2ZXIgdXBsb2FkcyB3aGVyZSBwcm9ncmVzcyBpcyBub3QgbmVlZGVkLlxuICogVXNlcyBub3JtYWwgZmV0Y2ggQVBJLlxuICovIGNvbnN0IHVwbG9hZFBhcnQgPSAob3B0cyk9PmZldGNoRWZmKG9wdHMudXJsLCB7XG4gICAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgICAgYm9keTogb3B0cy5jaHVuayxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogb3B0cy5jb250ZW50VHlwZSxcbiAgICAgICAgICAgIFwiQ29udGVudC1EaXNwb3NpdGlvblwiOiBjb250ZW50RGlzcG9zaXRpb24ob3B0cy5jb250ZW50RGlzcG9zaXRpb24sIG9wdHMuZmlsZU5hbWUpXG4gICAgICAgIH1cbiAgICB9KS5waXBlKEVmZmVjdC5hbmRUaGVuKChyZXMpPT5yZXMub2sgJiYgcmVzLmhlYWRlcnMuZ2V0KFwiRXRhZ1wiKSA/IEVmZmVjdC5zdWNjZWVkKHJlcy5oZWFkZXJzLmdldChcIkV0YWdcIikpIDogRWZmZWN0LmZhaWwobmV3IFJldHJ5RXJyb3IoKSkpLCBFZmZlY3QucmV0cnkoe1xuICAgICAgICB3aGlsZTogKHJlcyk9PnJlcyBpbnN0YW5jZW9mIFJldHJ5RXJyb3IsXG4gICAgICAgIHNjaGVkdWxlOiBTY2hlZHVsZS5leHBvbmVudGlhbChEdXJhdGlvbi5taWxsaXMoMTApLCA0KS5waXBlKC8vIDEwbXMsIDQwbXMsIDE2MG1zLCA2NDBtcy4uLlxuICAgICAgICBTY2hlZHVsZS5hbmRUaGVuRWl0aGVyKFNjaGVkdWxlLnNwYWNlZChEdXJhdGlvbi5zZWNvbmRzKDEpKSksIFNjaGVkdWxlLmNvbXBvc2UoU2NoZWR1bGUuZWxhcHNlZCksIFNjaGVkdWxlLndoaWxlT3V0cHV0KER1cmF0aW9uLmxlc3NUaGFuT3JFcXVhbFRvKER1cmF0aW9uLm1pbnV0ZXMoMSkpKSksXG4gICAgICAgIHRpbWVzOiBvcHRzLm1heFJldHJpZXNcbiAgICB9KSwgRWZmZWN0LnRhcEVycm9yVGFnKFwiUmV0cnlFcnJvclwiLCAoKT0+Ly8gTWF4IHJldHJpZXMgZXhjZWVkZWQsIHRlbGwgVVQgc2VydmVyIHRoYXQgdXBsb2FkIGZhaWxlZFxuICAgICAgICBhYm9ydE11bHRpcGFydFVwbG9hZCh7XG4gICAgICAgICAgICBrZXk6IG9wdHMua2V5LFxuICAgICAgICAgICAgdXBsb2FkSWQ6IG9wdHMudXBsb2FkSWRcbiAgICAgICAgfSkucGlwZShFZmZlY3QuYW5kVGhlbigocmVzKT0+e1xuICAgICAgICAgICAgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gdXBsb2FkIGZpbGUgJHtvcHRzLmZpbGVOYW1lfSB0byBTM2AsXG4gICAgICAgICAgICAgICAgY2F1c2U6IHJlc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSkpO1xuY29uc3QgY29tcGxldGVNdWx0aXBhcnRVcGxvYWQgPSAocHJlc2lnbmVkLCBldGFncyk9PmZldGNoRWZmKGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwoXCIvdjYvY29tcGxldGVNdWx0aXBhcnRcIiksIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgZmlsZUtleTogcHJlc2lnbmVkLmtleSxcbiAgICAgICAgICAgIHVwbG9hZElkOiBwcmVzaWduZWQudXBsb2FkSWQsXG4gICAgICAgICAgICBldGFnc1xuICAgICAgICB9KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfVxuICAgIH0pLnBpcGUoRWZmZWN0LmFuZFRoZW4ocGFyc2VSZXNwb25zZUpzb24pLCBFZmZlY3QuYW5kVGhlbihTLmRlY29kZVVua25vd24oUy5TdHJ1Y3Qoe1xuICAgICAgICBzdWNjZXNzOiBTLkJvb2xlYW4sXG4gICAgICAgIG1lc3NhZ2U6IFMub3B0aW9uYWwoUy5TdHJpbmcpXG4gICAgfSkpKSwgRWZmZWN0LndpdGhTcGFuKFwiY29tcGxldGVNdWx0aXBhcnRVcGxvYWRcIiwge1xuICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICBldGFncyxcbiAgICAgICAgICAgIHByZXNpZ25lZFxuICAgICAgICB9XG4gICAgfSkpO1xuY29uc3QgYWJvcnRNdWx0aXBhcnRVcGxvYWQgPSAocHJlc2lnbmVkKT0+ZmV0Y2hFZmYoZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTChcIi92Ni9mYWlsdXJlQ2FsbGJhY2tcIiksIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgZmlsZUtleTogcHJlc2lnbmVkLmtleSxcbiAgICAgICAgICAgIHVwbG9hZElkOiBwcmVzaWduZWQudXBsb2FkSWRcbiAgICAgICAgfSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH1cbiAgICB9KS5waXBlKEVmZmVjdC5hbmRUaGVuKHBhcnNlUmVzcG9uc2VKc29uKSwgRWZmZWN0LmFuZFRoZW4oUy5kZWNvZGVVbmtub3duKEZhaWx1cmVDYWxsYmFja1Jlc3BvbnNlKSksIEVmZmVjdC53aXRoU3BhbihcImFib3J0TXVsdGlwYXJ0VXBsb2FkXCIsIHtcbiAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgcHJlc2lnbmVkXG4gICAgICAgIH1cbiAgICB9KSk7XG5cbmZ1bmN0aW9uIGdldFBhcnNlRm4ocGFyc2VyKSB7XG4gICAgaWYgKHR5cGVvZiBwYXJzZXIucGFyc2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gcGFyc2VyLnBhcnNlO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhcnNlclwiKTtcbn1cblxuY29uc3QgZ2V0QXBpS2V5ID0gKGFwaUtleSk9PntcbiAgICBpZiAoYXBpS2V5KSByZXR1cm4gYXBpS2V5O1xuICAgIGlmIChwcm9jZXNzLmVudi5VUExPQURUSElOR19TRUNSRVQpIHJldHVybiBwcm9jZXNzLmVudi5VUExPQURUSElOR19TRUNSRVQ7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5jb25zdCBnZXRBcGlLZXlPclRocm93ID0gKGFwaUtleSk9PntcbiAgICBjb25zdCBrZXkgPSBnZXRBcGlLZXkoYXBpS2V5KTtcbiAgICBpZiAoIWtleT8uc3RhcnRzV2l0aChcInNrX1wiKSkge1xuICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiBcIk1JU1NJTkdfRU5WXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1pc3Npbmcgb3IgaW52YWxpZCBBUEkga2V5LiBBUEkga2V5cyBtdXN0IHN0YXJ0IHdpdGggYHNrX2AuXCJcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBrZXk7XG59O1xuXG5jbGFzcyBGaWxlU2l6ZU1pc21hdGNoIGV4dGVuZHMgRGF0YS5FcnJvciB7XG4gICAgY29uc3RydWN0b3IodHlwZSwgbWF4LCBhY3R1YWwpe1xuICAgICAgICBjb25zdCByZWFzb24gPSBgWW91IHVwbG9hZGVkIGEgJHt0eXBlfSBmaWxlIHRoYXQgd2FzICR7Ynl0ZXNUb0ZpbGVTaXplKGFjdHVhbCl9LCBidXQgdGhlIGxpbWl0IGZvciB0aGF0IHR5cGUgaXMgJHttYXh9YDtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgcmVhc29uXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl90YWcgPSBcIkZpbGVTaXplTWlzbWF0Y2hcIjtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJGaWxlU2l6ZU1pc21hdGNoRXJyb3JcIjtcbiAgICB9XG59XG5jbGFzcyBGaWxlQ291bnRNaXNtYXRjaCBleHRlbmRzIERhdGEuRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHR5cGUsIGJvdW5kdHlwZSwgYm91bmQsIGFjdHVhbCl7XG4gICAgICAgIGNvbnN0IHJlYXNvbiA9IGBZb3UgdXBsb2FkZWQgJHthY3R1YWx9IGZpbGUocykgb2YgdHlwZSAnJHt0eXBlfScsIGJ1dCB0aGUgJHtib3VuZHR5cGV9IGZvciB0aGF0IHR5cGUgaXMgJHtib3VuZH1gO1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICByZWFzb25cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3RhZyA9IFwiRmlsZUNvdW50TWlzbWF0Y2hcIjtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJGaWxlQ291bnRNaXNtYXRjaEVycm9yXCI7XG4gICAgfVxufVxuLy8gVmVyaWZ5IHRoYXQgdGhlIHVwbG9hZGVkIGZpbGVzIGRvZXNuJ3QgdmlvbGF0ZSB0aGUgcm91dGUgY29uZmlnLFxuLy8gZS5nLiB1cGxvYWRpbmcgbW9yZSB2aWRlb3MgdGhhbiBhbGxvd2VkLCBvciBhIGZpbGUgdGhhdCBpcyBsYXJnZXIgdGhhbiBhbGxvd2VkLlxuLy8gVGhpcyBpcyBkb3VibGUtY2hlY2tlZCBvbiBpbmZyYSBzaWRlLCBidXQgd2Ugd2FudCB0byBmYWlsIGVhcmx5IHRvIGF2b2lkIG5ldHdvcmsgbGF0ZW5jeS5cbmNvbnN0IGFzc2VydEZpbGVzTWVldENvbmZpZyA9IChmaWxlcywgcm91dGVDb25maWcpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgY29uc3QgY291bnRzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcyl7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0geWllbGQqIGdldFR5cGVGcm9tRmlsZU5hbWUoZmlsZS5uYW1lLCBvYmplY3RLZXlzKHJvdXRlQ29uZmlnKSk7XG4gICAgICAgICAgICBjb3VudHNbdHlwZV0gPSAoY291bnRzW3R5cGVdID8/IDApICsgMTtcbiAgICAgICAgICAgIGNvbnN0IHNpemVMaW1pdCA9IHJvdXRlQ29uZmlnW3R5cGVdPy5tYXhGaWxlU2l6ZTtcbiAgICAgICAgICAgIGlmICghc2l6ZUxpbWl0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgSW52YWxpZFJvdXRlQ29uZmlnRXJyb3IodHlwZSwgXCJtYXhGaWxlU2l6ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNpemVMaW1pdEJ5dGVzID0geWllbGQqIGZpbGVTaXplVG9CeXRlcyhzaXplTGltaXQpO1xuICAgICAgICAgICAgaWYgKGZpbGUuc2l6ZSA+IHNpemVMaW1pdEJ5dGVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgRmlsZVNpemVNaXNtYXRjaCh0eXBlLCBzaXplTGltaXQsIGZpbGUuc2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yKGNvbnN0IF9rZXkgaW4gY291bnRzKXtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IF9rZXk7XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSByb3V0ZUNvbmZpZ1trZXldO1xuICAgICAgICAgICAgaWYgKCFjb25maWcpIHJldHVybiB5aWVsZCogbmV3IEludmFsaWRSb3V0ZUNvbmZpZ0Vycm9yKGtleSk7XG4gICAgICAgICAgICBjb25zdCBjb3VudCA9IGNvdW50c1trZXldO1xuICAgICAgICAgICAgY29uc3QgbWluID0gY29uZmlnLm1pbkZpbGVDb3VudDtcbiAgICAgICAgICAgIGNvbnN0IG1heCA9IGNvbmZpZy5tYXhGaWxlQ291bnQ7XG4gICAgICAgICAgICBpZiAobWluID4gbWF4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIGNvbmZpZyBkdXJpbmcgZmlsZSBjb3VudCAtIG1pbkZpbGVDb3VudCA+IG1heEZpbGVDb3VudFwiLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogYG1pbkZpbGVDb3VudCBtdXN0IGJlIGxlc3MgdGhhbiBtYXhGaWxlQ291bnQgZm9yIGtleSAke2tleX0uIGdvdDogJHttaW59ID4gJHttYXh9YFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvdW50IDwgbWluKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgRmlsZUNvdW50TWlzbWF0Y2goa2V5LCBcIm1pbmltdW1cIiwgbWluLCBjb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY291bnQgPiBtYXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBGaWxlQ291bnRNaXNtYXRjaChrZXksIFwibWF4aW11bVwiLCBtYXgsIGNvdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9KTtcbmNsYXNzIFJlcXVlc3RJbnB1dCBleHRlbmRzIC8qKiAjX19QVVJFX18gKi8gQ29udGV4dC5UYWcoXCJ1cGxvYWR0aGluZy9SZXF1ZXN0SW5wdXRcIikoKSB7XG59XG5jb25zdCBwYXJzZUFuZFZhbGlkYXRlUmVxdWVzdCA9IChpbnB1dCwgb3B0cywgYWRhcHRlcik9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICBjb25zdCByZXEgPSB5aWVsZCogRWZmZWN0LmlzRWZmZWN0KGlucHV0LnJlcSkgPyBpbnB1dC5yZXEgOiBFZmZlY3Quc3VjY2VlZChpbnB1dC5yZXEpO1xuICAgICAgICAvLyBHZXQgaW5wdXRzIGZyb20gcXVlcnkgYW5kIHBhcmFtc1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcS51cmwpO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gcmVxLmhlYWRlcnM7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHVybC5zZWFyY2hQYXJhbXM7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHBhcmFtcy5nZXQoXCJhY3Rpb25UeXBlXCIpO1xuICAgICAgICBjb25zdCBzbHVnID0gcGFyYW1zLmdldChcInNsdWdcIik7XG4gICAgICAgIGNvbnN0IGhvb2sgPSBoZWFkZXJzLmdldChcInVwbG9hZHRoaW5nLWhvb2tcIik7XG4gICAgICAgIGNvbnN0IHV0RnJvbnRlbmRQYWNrYWdlID0gaGVhZGVycy5nZXQoXCJ4LXVwbG9hZHRoaW5nLXBhY2thZ2VcIikgPz8gXCJ1bmtub3duXCI7XG4gICAgICAgIGNvbnN0IGNsaWVudFZlcnNpb24gPSBoZWFkZXJzLmdldChcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiKTtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gZ2V0QXBpS2V5KG9wdHMuY29uZmlnPy51cGxvYWR0aGluZ1NlY3JldCk7XG4gICAgICAgIGlmIChjbGllbnRWZXJzaW9uICE9IG51bGwgJiYgY2xpZW50VmVyc2lvbiAhPT0gdmVyc2lvbikge1xuICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dFcnJvcihgQ2xpZW50IHZlcnNpb24gbWlzbWF0Y2guIFNlcnZlciB2ZXJzaW9uOiAke3ZlcnNpb259LCBDbGllbnQgdmVyc2lvbjogJHtjbGllbnRWZXJzaW9ufWApO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQ2xpZW50IHZlcnNpb24gbWlzbWF0Y2hcIixcbiAgICAgICAgICAgICAgICBjYXVzZTogYFNlcnZlciB2ZXJzaW9uOiAke3ZlcnNpb259LCBDbGllbnQgdmVyc2lvbjogJHtjbGllbnRWZXJzaW9ufWBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2x1Zykge1xuICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dFcnJvcihcIk5vIHNsdWcgcHJvdmlkZWQgaW4gcGFyYW1zOlwiLCBwYXJhbXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTm8gc2x1ZyBwcm92aWRlZCBpbiBwYXJhbXNcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNsdWcgJiYgdHlwZW9mIHNsdWcgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IGBFeHBlY3RlZCBzbHVnIHRvIGJlIG9mIHR5cGUgJ3N0cmluZycsIGdvdCAnJHt0eXBlb2Ygc2x1Z30nYDtcbiAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRXJyb3IobXNnKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcImBzbHVnYCBtdXN0IGJlIGEgc3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgY2F1c2U6IG1zZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IGBObyBzZWNyZXQgcHJvdmlkZWQsIHBsZWFzZSBzZXQgVVBMT0FEVEhJTkdfU0VDUkVUIGluIHlvdXIgZW52IGZpbGUgb3IgaW4gdGhlIGNvbmZpZ2A7XG4gICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0Vycm9yKG1zZyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIk1JU1NJTkdfRU5WXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYE5vIHNlY3JldCBwcm92aWRlZGAsXG4gICAgICAgICAgICAgICAgY2F1c2U6IG1zZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhcGlLZXkuc3RhcnRzV2l0aChcInNrX1wiKSkge1xuICAgICAgICAgICAgY29uc3QgbXNnID0gYEludmFsaWQgc2VjcmV0IHByb3ZpZGVkLCBVUExPQURUSElOR19TRUNSRVQgbXVzdCBzdGFydCB3aXRoICdza18nYDtcbiAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRXJyb3IobXNnKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiTUlTU0lOR19FTlZcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgQVBJIGtleS4gQVBJIGtleXMgbXVzdCBzdGFydCB3aXRoICdza18nLlwiLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBtc2dcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1dEZyb250ZW5kUGFja2FnZSAmJiB0eXBlb2YgdXRGcm9udGVuZFBhY2thZ2UgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IGBFeHBlY3RlZCB4LXVwbG9hZHRoaW5nLXBhY2thZ2UgdG8gYmUgb2YgdHlwZSAnc3RyaW5nJywgZ290ICcke3R5cGVvZiB1dEZyb250ZW5kUGFja2FnZX0nYDtcbiAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRXJyb3IobXNnKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcImB4LXVwbG9hZHRoaW5nLXBhY2thZ2VgIG11c3QgYmUgYSBzdHJpbmcuIGVnLiAnQHVwbG9hZHRoaW5nL3JlYWN0J1wiLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBtc2dcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVwbG9hZGFibGUgPSBvcHRzLnJvdXRlcltzbHVnXTtcbiAgICAgICAgaWYgKCF1cGxvYWRhYmxlKSB7XG4gICAgICAgICAgICBjb25zdCBtc2cgPSBgTm8gZmlsZSByb3V0ZSBmb3VuZCBmb3Igc2x1ZyAke3NsdWd9YDtcbiAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRXJyb3IobXNnKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogbXNnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWN0aW9uICYmICFpc0FjdGlvblR5cGUoYWN0aW9uKSkge1xuICAgICAgICAgICAgY29uc3QgbXNnID0gYEV4cGVjdGVkICR7VkFMSURfQUNUSU9OX1RZUEVTLm1hcCgoeCk9PmBcIiR7eH1cImApLmpvaW4oXCIsIFwiKS5yZXBsYWNlKC8sKD8hLiosKS8sIFwiIG9yXCIpfSBidXQgZ290IFwiJHthY3Rpb259XCJgO1xuICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dFcnJvcihcIkludmFsaWQgYWN0aW9uIHR5cGVcIiwgbXNnKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICBjYXVzZTogYEludmFsaWQgYWN0aW9uIHR5cGUgJHthY3Rpb259YCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBtc2dcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChob29rICYmICFpc1VwbG9hZFRoaW5nSG9vayhob29rKSkge1xuICAgICAgICAgICAgY29uc3QgbXNnID0gYEV4cGVjdGVkICR7VkFMSURfVVRfSE9PS1MubWFwKCh4KT0+YFwiJHt4fVwiYCkuam9pbihcIiwgXCIpLnJlcGxhY2UoLywoPyEuKiwpLywgXCIgb3JcIil9IGJ1dCBnb3QgXCIke2hvb2t9XCJgO1xuICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dFcnJvcihcIkludmFsaWQgdXBsb2FkdGhpbmcgaG9va1wiLCBtc2cpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBgSW52YWxpZCB1cGxvYWR0aGluZyBob29rICR7aG9va31gLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1zZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhY3Rpb24gJiYgIWhvb2sgfHwgYWN0aW9uICYmIGhvb2spIHtcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IGBFeGFjdGx5IG9uZSBvZiAnYWN0aW9uVHlwZScgb3IgJ3VwbG9hZHRoaW5nLWhvb2snIG11c3QgYmUgcHJvdmlkZWRgO1xuICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dFcnJvcihtc2cpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1zZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIuKclO+4jiBBbGwgcmVxdWVzdCBpbnB1dCBpcyB2YWxpZFwiKTtcbiAgICAgICAgLy8gRklYTUU6IFRoaXMgc2hvdWxkIHByb2JhYmx5IHByb3ZpZGUgdGhlIGZ1bGwgY29udGV4dCBhdCBvbmNlIGluc3RlYWQgb2ZcbiAgICAgICAgLy8gcGFydGlhbGx5IGluIHRoZSBgcnVuUmVxdWVzdEhhbmRsZXJBc3luY2AgYW5kIHBhcnRpYWxseSBpbiBoZXJlLi4uXG4gICAgICAgIC8vIFJlZjogaHR0cHM6Ly9kaXNjb3JkLmNvbS9jaGFubmVscy9AbWUvMTIwMTk3NzE1NDU3Nzg5MTM2OS8xMjA3NDQxODM5OTcyNTQ4NjY5XG4gICAgICAgIGNvbnN0IGNvbnRleHRWYWx1ZSA9IHlpZWxkKiBGZXRjaENvbnRleHQ7XG4gICAgICAgIGNvbnRleHRWYWx1ZS5iYXNlSGVhZGVyc1tcIngtdXBsb2FkdGhpbmctYXBpLWtleVwiXSA9IGFwaUtleTtcbiAgICAgICAgY29udGV4dFZhbHVlLmJhc2VIZWFkZXJzW1wieC11cGxvYWR0aGluZy1mZS1wYWNrYWdlXCJdID0gdXRGcm9udGVuZFBhY2thZ2U7XG4gICAgICAgIGNvbnRleHRWYWx1ZS5iYXNlSGVhZGVyc1tcIngtdXBsb2FkdGhpbmctYmUtYWRhcHRlclwiXSA9IGFkYXB0ZXI7XG4gICAgICAgIGNvbnN0IHsgaXNEZXYgPSBpc0RldmVsb3BtZW50IH0gPSBvcHRzLmNvbmZpZyA/PyB7fTtcbiAgICAgICAgaWYgKGlzRGV2KSB5aWVsZCogRWZmZWN0LmxvZ0luZm8oXCJVcGxvYWRUaGluZyBkZXYgc2VydmVyIGlzIG5vdyBydW5uaW5nIVwiKTtcbiAgICAgICAgY29uc3QgYmFzZSA9IHtcbiAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgIGNvbmZpZzogb3B0cy5jb25maWcgPz8ge30sXG4gICAgICAgICAgICBtaWRkbGV3YXJlQXJnczogaW5wdXQubWlkZGxld2FyZUFyZ3MsXG4gICAgICAgICAgICBpc0RldixcbiAgICAgICAgICAgIGFwaUtleSxcbiAgICAgICAgICAgIHNsdWcsXG4gICAgICAgICAgICB1cGxvYWRhYmxlLFxuICAgICAgICAgICAgaG9vazogbnVsbCxcbiAgICAgICAgICAgIGFjdGlvbjogbnVsbFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYWN0aW9uID8ge1xuICAgICAgICAgICAgLi4uYmFzZSxcbiAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uXG4gICAgICAgIH0gOiB7XG4gICAgICAgICAgICAuLi5iYXNlLFxuICAgICAgICAgICAgaG9vazogaG9va1xuICAgICAgICB9O1xuICAgIH0pO1xuXG5jb25zdCByZXNvbHZlQ2FsbGJhY2tVcmwgPSBFZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICBjb25zdCB7IGNvbmZpZywgcmVxLCBpc0RldiB9ID0geWllbGQqIFJlcXVlc3RJbnB1dDtcbiAgICBsZXQgY2FsbGJhY2tVcmwgPSBuZXcgVVJMKHJlcS51cmwpO1xuICAgIGlmIChjb25maWc/LmNhbGxiYWNrVXJsKSB7XG4gICAgICAgIGNhbGxiYWNrVXJsID0geWllbGQqIGdldEZ1bGxBcGlVcmwoY29uZmlnLmNhbGxiYWNrVXJsKTtcbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52LlVQTE9BRFRISU5HX1VSTCkge1xuICAgICAgICBjYWxsYmFja1VybCA9IHlpZWxkKiBnZXRGdWxsQXBpVXJsKHByb2Nlc3MuZW52LlVQTE9BRFRISU5HX1VSTCk7XG4gICAgfVxuICAgIGlmIChpc0RldiB8fCAhY2FsbGJhY2tVcmwuaG9zdC5pbmNsdWRlcyhcImxvY2FsaG9zdFwiKSkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2tVcmw7XG4gICAgfVxuICAgIC8vIFByb2R1Y3Rpb24gYnVpbGRzIGhhdmUgdG8gaGF2ZSBhIHB1YmxpYyBVUkwgc28gVVQgY2FuIHNlbmQgd2ViaG9va1xuICAgIC8vIFBhcnNlIHRoZSBVUkwgZnJvbSB0aGUgaGVhZGVyc1xuICAgIGxldCBwYXJzZWRGcm9tSGVhZGVycyA9IHJlcS5oZWFkZXJzLmdldChcIm9yaWdpblwiKSA/PyByZXEuaGVhZGVycy5nZXQoXCJyZWZlcmVyXCIpID8/IHJlcS5oZWFkZXJzLmdldChcImhvc3RcIikgPz8gcmVxLmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtaG9zdFwiKTtcbiAgICBpZiAocGFyc2VkRnJvbUhlYWRlcnMgJiYgIXBhcnNlZEZyb21IZWFkZXJzLmluY2x1ZGVzKFwiaHR0cFwiKSkge1xuICAgICAgICBwYXJzZWRGcm9tSGVhZGVycyA9IChyZXEuaGVhZGVycy5nZXQoXCJ4LWZvcndhcmRlZC1wcm90b1wiKSA/PyBcImh0dHBzXCIpICsgXCI6Ly9cIiArIHBhcnNlZEZyb21IZWFkZXJzO1xuICAgIH1cbiAgICBpZiAoIXBhcnNlZEZyb21IZWFkZXJzIHx8IHBhcnNlZEZyb21IZWFkZXJzLmluY2x1ZGVzKFwibG9jYWxob3N0XCIpKSB7XG4gICAgICAgIC8vIERpZG4ndCBmaW5kIGEgdmFsaWQgVVJMIGluIHRoZSBoZWFkZXJzLCBsb2cgYSB3YXJuaW5nIGFuZCB1c2UgdGhlIG9yaWdpbmFsIHVybCBhbnl3YXlcbiAgICAgICAgRWZmZWN0LmxvZ1dhcm5pbmcoXCJZb3UgYXJlIHVzaW5nIGEgbG9jYWxob3N0IGNhbGxiYWNrIHVybCBpbiBwcm9kdWN0aW9uIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuXCIsIFwiUmVhZCBtb3JlIGFuZCBsZWFybiBob3cgdG8gZml4IGl0IGhlcmU6IGh0dHBzOi8vZG9jcy51cGxvYWR0aGluZy5jb20vZmFxI215LWNhbGxiYWNrLXJ1bnMtaW4tZGV2ZWxvcG1lbnQtYnV0LW5vdC1pbi1wcm9kdWN0aW9uXCIpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2tVcmw7XG4gICAgfVxuICAgIHJldHVybiB5aWVsZCogZ2V0RnVsbEFwaVVybChwYXJzZWRGcm9tSGVhZGVycyk7XG59KTtcblxuLyoqXG4gKiBBbGxvd3MgYWRhcHRlcnMgdG8gYmUgZnVsbHkgYXN5bmMvYXdhaXQgaW5zdGVhZCBvZiBwcm92aWRpbmcgc2VydmljZXMgYW5kIHJ1bm5pbmcgRWZmZWN0IHByb2dyYW1zXG4gKi8gY29uc3QgcnVuUmVxdWVzdEhhbmRsZXJBc3luYyA9IChoYW5kbGVyLCBhcmdzLCBjb25maWcpPT5oYW5kbGVyKGFyZ3MpLnBpcGUod2l0aE1pbmltYWxMb2dMZXZlbChjb25maWc/LmxvZ0xldmVsKSwgRWZmZWN0LnByb3ZpZGUoQ29uc29sYUxvZ2dlciksIEVmZmVjdC5wcm92aWRlU2VydmljZShGZXRjaENvbnRleHQsIHtcbiAgICAgICAgZmV0Y2g6IGNvbmZpZz8uZmV0Y2ggPz8gZ2xvYmFsVGhpcy5mZXRjaCxcbiAgICAgICAgYmFzZUhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IHZlcnNpb24sXG4gICAgICAgICAgICAvLyBUaGVzZSBhcmUgZmlsbGVkIGluIGxhdGVyIGluIGBwYXJzZUFuZFZhbGlkYXRlUmVxdWVzdGBcbiAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1hcGkta2V5XCI6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1mZS1wYWNrYWdlXCI6IHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgfSksIGFzSGFuZGxlck91dHB1dCwgRWZmZWN0LnJ1blByb21pc2UpO1xuY29uc3QgYXNIYW5kbGVyT3V0cHV0ID0gKGVmZmVjdCk9PkVmZmVjdC5jYXRjaEFsbChlZmZlY3QsIChlcnJvcik9PkVmZmVjdC5zdWNjZWVkKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgfSkpO1xuY29uc3QgaGFuZGxlUmVxdWVzdCA9IFJlcXVlc3RJbnB1dC5waXBlKEVmZmVjdC5hbmRUaGVuKCh7IGFjdGlvbiwgaG9vayB9KT0+e1xuICAgIGlmIChob29rID09PSBcImNhbGxiYWNrXCIpIHJldHVybiBoYW5kbGVDYWxsYmFja1JlcXVlc3Q7XG4gICAgc3dpdGNoKGFjdGlvbil7XG4gICAgICAgIGNhc2UgXCJ1cGxvYWRcIjpcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVVcGxvYWRBY3Rpb247XG4gICAgICAgIGNhc2UgXCJtdWx0aXBhcnQtY29tcGxldGVcIjpcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVNdWx0aXBhcnRDb21wbGV0ZUFjdGlvbjtcbiAgICAgICAgY2FzZSBcImZhaWx1cmVcIjpcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVNdWx0aXBhcnRGYWlsdXJlQWN0aW9uO1xuICAgIH1cbn0pLCBFZmZlY3QubWFwKChvdXRwdXQpPT4oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAuLi5vdXRwdXRcbiAgICB9KSkpO1xuY29uc3QgYnVpbGRSZXF1ZXN0SGFuZGxlciA9IChvcHRzLCBhZGFwdGVyKT0+KGlucHV0KT0+aGFuZGxlUmVxdWVzdC5waXBlKEVmZmVjdC5wcm92aWRlU2VydmljZUVmZmVjdChSZXF1ZXN0SW5wdXQsIHBhcnNlQW5kVmFsaWRhdGVSZXF1ZXN0KGlucHV0LCBvcHRzLCBhZGFwdGVyKSksIEVmZmVjdC5jYXRjaFRhZ3Moe1xuICAgICAgICAgICAgSW52YWxpZEpzb246IChlKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgcGFyc2luZyBpbnB1dC9vdXRwdXRcIixcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGVcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIEJhZFJlcXVlc3RFcnJvcjogKGUpPT5uZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGUuZ2V0TWVzc2FnZSgpLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZS5qc29uXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBGZXRjaEVycm9yOiAoZSk9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdHlwZW9mIGUuZXJyb3IgPT09IFwic3RyaW5nXCIgPyBlLmVycm9yIDogZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZS5lcnJvclxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgUGFyc2VFcnJvcjogKGUpPT5uZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBwYXJzaW5nIGlucHV0L291dHB1dFwiLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLCBFZmZlY3QudGFwRXJyb3IoKGUpPT5FZmZlY3QubG9nRXJyb3IoZS5tZXNzYWdlKSkpO1xuY29uc3QgaGFuZGxlQ2FsbGJhY2tSZXF1ZXN0ID0gRWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgY29uc3QgeyByZXEsIHVwbG9hZGFibGUsIGFwaUtleSB9ID0geWllbGQqIFJlcXVlc3RJbnB1dDtcbiAgICBjb25zdCB2ZXJpZmllZCA9IHlpZWxkKiBFZmZlY3QudHJ5UHJvbWlzZSh7XG4gICAgICAgIHRyeTogYXN5bmMgKCk9PnZlcmlmeVNpZ25hdHVyZShhd2FpdCByZXEuY2xvbmUoKS50ZXh0KCksIHJlcS5oZWFkZXJzLmdldChcIngtdXBsb2FkdGhpbmctc2lnbmF0dXJlXCIpLCBhcGlLZXkpLFxuICAgICAgICBjYXRjaDogKCk9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHNpZ25hdHVyZVwiXG4gICAgICAgICAgICB9KVxuICAgIH0pO1xuICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJTaWduYXR1cmUgdmVyaWZpZWQ6XCIsIHZlcmlmaWVkKTtcbiAgICBpZiAoIXZlcmlmaWVkKSB7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRXJyb3IoXCJJbnZhbGlkIHNpZ25hdHVyZVwiKTtcbiAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgc2lnbmF0dXJlXCJcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcXVlc3RJbnB1dCA9IHlpZWxkKiBFZmZlY3QuZmxhdE1hcChwYXJzZVJlcXVlc3RKc29uKHJlcSksIFMuZGVjb2RlVW5rbm93bihTLlN0cnVjdCh7XG4gICAgICAgIHN0YXR1czogUy5TdHJpbmcsXG4gICAgICAgIGZpbGU6IFVwbG9hZGVkRmlsZURhdGEsXG4gICAgICAgIG1ldGFkYXRhOiBTLlJlY29yZChTLlN0cmluZywgUy5Vbmtub3duKVxuICAgIH0pKSk7XG4gICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIkhhbmRsaW5nIGNhbGxiYWNrIHJlcXVlc3Qgd2l0aCBpbnB1dDpcIiwgcmVxdWVzdElucHV0KTtcbiAgICBjb25zdCBzZXJ2ZXJEYXRhID0geWllbGQqIEVmZmVjdC50cnlQcm9taXNlKHtcbiAgICAgICAgdHJ5OiBhc3luYyAoKT0+dXBsb2FkYWJsZS5yZXNvbHZlcih7XG4gICAgICAgICAgICAgICAgZmlsZTogcmVxdWVzdElucHV0LmZpbGUsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHJlcXVlc3RJbnB1dC5tZXRhZGF0YVxuICAgICAgICAgICAgfSksXG4gICAgICAgIGNhdGNoOiAoZXJyb3IpPT5uZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgY29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBydW4gb25VcGxvYWRDb21wbGV0ZVwiLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBlcnJvclxuICAgICAgICAgICAgfSlcbiAgICB9KS5waXBlKEVmZmVjdC50YXBFcnJvcigoZXJyb3IpPT5FZmZlY3QubG9nRXJyb3IoXCJGYWlsZWQgdG8gcnVuIG9uVXBsb2FkQ29tcGxldGUuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgYmUgdGhyb3dpbmcgZXJyb3JzIGhlcmUuXCIsIGVycm9yKSkpO1xuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgIGZpbGVLZXk6IHJlcXVlc3RJbnB1dC5maWxlLmtleSxcbiAgICAgICAgY2FsbGJhY2tEYXRhOiBzZXJ2ZXJEYXRhID8/IG51bGxcbiAgICB9O1xuICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCInb25VcGxvYWRDb21wbGV0ZScgY2FsbGJhY2sgZmluaXNoZWQuIFNlbmRpbmcgcmVzcG9uc2UgdG8gVXBsb2FkVGhpbmc6XCIsIHBheWxvYWQpO1xuICAgIHlpZWxkKiBmZXRjaEVmZihnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMKFwiL3Y2L3NlcnZlckNhbGxiYWNrXCIpLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9XG4gICAgfSkucGlwZShFZmZlY3QuYW5kVGhlbihwYXJzZVJlc3BvbnNlSnNvbiksIEVmZmVjdC5hbmRUaGVuKFMuZGVjb2RlVW5rbm93bihTZXJ2ZXJDYWxsYmFja1Bvc3RSZXNwb25zZSkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBib2R5OiBudWxsXG4gICAgfTtcbn0pO1xuY29uc3QgcnVuUm91dGVNaWRkbGV3YXJlID0gKG9wdHMpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgY29uc3QgeyB1cGxvYWRhYmxlLCBtaWRkbGV3YXJlQXJncyB9ID0geWllbGQqIFJlcXVlc3RJbnB1dDtcbiAgICAgICAgY29uc3QgeyBmaWxlcywgaW5wdXQgfSA9IG9wdHM7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJSdW5uaW5nIG1pZGRsZXdhcmVcIik7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0geWllbGQqIEVmZmVjdC50cnlQcm9taXNlKHtcbiAgICAgICAgICAgIHRyeTogYXN5bmMgKCk9PnVwbG9hZGFibGUuX2RlZi5taWRkbGV3YXJlKHtcbiAgICAgICAgICAgICAgICAgICAgLi4ubWlkZGxld2FyZUFyZ3MsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgICAgICBmaWxlc1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY2F0Y2g6IChlcnJvcik9PmVycm9yIGluc3RhbmNlb2YgVXBsb2FkVGhpbmdFcnJvciA/IGVycm9yIDogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBydW4gbWlkZGxld2FyZVwiLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9KS5waXBlKEVmZmVjdC50YXBFcnJvcigoZXJyb3IpPT5FZmZlY3QubG9nRXJyb3IoXCJBbiBlcnJvciBvY2N1cmVkIGluIHlvdXIgbWlkZGxld2FyZSBmdW5jdGlvblwiLCBlcnJvcikpKTtcbiAgICAgICAgaWYgKG1ldGFkYXRhW1VURmlsZXNdICYmIG1ldGFkYXRhW1VURmlsZXNdLmxlbmd0aCAhPT0gZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBtc2cgPSBgRXhwZWN0ZWQgZmlsZXMgb3ZlcnJpZGUgdG8gaGF2ZSB0aGUgc2FtZSBsZW5ndGggYXMgb3JpZ2luYWwgZmlsZXMsIGdvdCAke21ldGFkYXRhW1VURmlsZXNdLmxlbmd0aH0gYnV0IGV4cGVjdGVkICR7ZmlsZXMubGVuZ3RofWA7XG4gICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0Vycm9yKG1zZyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJGaWxlcyBvdmVycmlkZSBtdXN0IGhhdmUgdGhlIHNhbWUgbGVuZ3RoIGFzIGZpbGVzXCIsXG4gICAgICAgICAgICAgICAgY2F1c2U6IG1zZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQXR0YWNoIGN1c3RvbUlkcyBmcm9tIG1pZGRsZXdhcmUgdG8gdGhlIGZpbGVzXG4gICAgICAgIGNvbnN0IGZpbGVzV2l0aEN1c3RvbUlkcyA9IHlpZWxkKiBFZmZlY3QuZm9yRWFjaChmaWxlcywgKGZpbGUsIGlkeCk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRoZWlycyA9IG1ldGFkYXRhW1VURmlsZXNdPy5baWR4XTtcbiAgICAgICAgICAgICAgICBpZiAodGhlaXJzICYmIHRoZWlycy5zaXplICE9PSBmaWxlLnNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dXYXJuaW5nKFwiRmlsZSBzaXplIG1pc21hdGNoLiBSZXZlcnRpbmcgdG8gb3JpZ2luYWwgc2l6ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhlaXJzPy5uYW1lID8/IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICAgICAgICAgICAgICBjdXN0b21JZDogdGhlaXJzPy5jdXN0b21JZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICAgIGZpbGVzV2l0aEN1c3RvbUlkc1xuICAgICAgICB9O1xuICAgIH0pO1xuY29uc3QgaGFuZGxlVXBsb2FkQWN0aW9uID0gRWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgY29uc3Qgb3B0cyA9IHlpZWxkKiBSZXF1ZXN0SW5wdXQ7XG4gICAgY29uc3QgeyBmaWxlcywgaW5wdXQgfSA9IHlpZWxkKiBFZmZlY3QuZmxhdE1hcChwYXJzZVJlcXVlc3RKc29uKG9wdHMucmVxKSwgUy5kZWNvZGVVbmtub3duKFVwbG9hZEFjdGlvblBheWxvYWQpKTtcbiAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiSGFuZGxpbmcgdXBsb2FkIHJlcXVlc3Qgd2l0aCBpbnB1dDpcIiwge1xuICAgICAgICBmaWxlcyxcbiAgICAgICAgaW5wdXRcbiAgICB9KTtcbiAgICAvLyB2YWxpZGF0ZSB0aGUgaW5wdXRcbiAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiUGFyc2luZyB1c2VyIGlucHV0XCIpO1xuICAgIGNvbnN0IGlucHV0UGFyc2VyID0gb3B0cy51cGxvYWRhYmxlLl9kZWYuaW5wdXRQYXJzZXI7XG4gICAgY29uc3QgcGFyc2VkSW5wdXQgPSB5aWVsZCogRWZmZWN0LnRyeVByb21pc2Uoe1xuICAgICAgICB0cnk6IGFzeW5jICgpPT5nZXRQYXJzZUZuKGlucHV0UGFyc2VyKShpbnB1dCksXG4gICAgICAgIGNhdGNoOiAoZXJyb3IpPT5uZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBpbnB1dFwiLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBlcnJvclxuICAgICAgICAgICAgfSlcbiAgICB9KS5waXBlKEVmZmVjdC50YXBFcnJvcigoZXJyb3IpPT5FZmZlY3QubG9nRXJyb3IoXCJBbiBlcnJvciBvY2N1cmVkIHRyeWluZyB0byBwYXJzZSBpbnB1dFwiLCBlcnJvcikpKTtcbiAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiSW5wdXQgcGFyc2VkIHN1Y2Nlc3NmdWxseVwiLCBwYXJzZWRJbnB1dCk7XG4gICAgY29uc3QgeyBtZXRhZGF0YSwgZmlsZXNXaXRoQ3VzdG9tSWRzIH0gPSB5aWVsZCogcnVuUm91dGVNaWRkbGV3YXJlKHtcbiAgICAgICAgaW5wdXQ6IHBhcnNlZElucHV0LFxuICAgICAgICBmaWxlc1xuICAgIH0pO1xuICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJQYXJzaW5nIHJvdXRlIGNvbmZpZ1wiLCBvcHRzLnVwbG9hZGFibGUuX2RlZi5yb3V0ZXJDb25maWcpO1xuICAgIGNvbnN0IHBhcnNlZENvbmZpZyA9IHlpZWxkKiBmaWxsSW5wdXRSb3V0ZUNvbmZpZyhvcHRzLnVwbG9hZGFibGUuX2RlZi5yb3V0ZXJDb25maWcpLnBpcGUoRWZmZWN0LmNhdGNoVGFnKFwiSW52YWxpZFJvdXRlQ29uZmlnXCIsIChlcnIpPT5uZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgY29uZmlnXCIsXG4gICAgICAgICAgICBjYXVzZTogZXJyXG4gICAgICAgIH0pKSk7XG4gICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlJvdXRlIGNvbmZpZyBwYXJzZWQgc3VjY2Vzc2Z1bGx5XCIsIHBhcnNlZENvbmZpZyk7XG4gICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlZhbGlkYXRpbmcgZmlsZXMgbWVldCB0aGUgY29uZmlnIHJlcXVpcmVtZW50c1wiLCBmaWxlcyk7XG4gICAgeWllbGQqIGFzc2VydEZpbGVzTWVldENvbmZpZyhmaWxlcywgcGFyc2VkQ29uZmlnKS5waXBlKEVmZmVjdC5tYXBFcnJvcigoZSk9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBJbnZhbGlkIGNvbmZpZzogJHtlLl90YWd9YCxcbiAgICAgICAgICAgIGNhdXNlOiBcInJlYXNvblwiIGluIGUgPyBlLnJlYXNvbiA6IGUubWVzc2FnZVxuICAgICAgICB9KSkpO1xuICAgIGNvbnN0IGNhbGxiYWNrVXJsID0geWllbGQqIHJlc29sdmVDYWxsYmFja1VybC5waXBlKEVmZmVjdC50YXBFcnJvcigoZXJyb3IpPT5FZmZlY3QubG9nRXJyb3IoXCJGYWlsZWQgdG8gcmVzb2x2ZSBjYWxsYmFjayBVUkxcIiwgZXJyb3IpKSwgRWZmZWN0LmNhdGNoVGFnKFwiSW52YWxpZFVSTFwiLCAoZXJyKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pKSk7XG4gICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlJldHJpZXZpbmcgcHJlc2lnbmVkIFVSTHMgZnJvbSBVcGxvYWRUaGluZy4gQ2FsbGJhY2sgVVJMIGlzOlwiLCBjYWxsYmFja1VybC5ocmVmKTtcbiAgICBjb25zdCBwcmVzaWduZWRVcmxzID0geWllbGQqIGZldGNoRWZmKGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwoXCIvdjYvcHJlcGFyZVVwbG9hZFwiKSwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBmaWxlczogZmlsZXNXaXRoQ3VzdG9tSWRzLFxuICAgICAgICAgICAgcm91dGVDb25maWc6IHBhcnNlZENvbmZpZyxcbiAgICAgICAgICAgIG1ldGFkYXRhLFxuICAgICAgICAgICAgY2FsbGJhY2tVcmw6IGNhbGxiYWNrVXJsLm9yaWdpbiArIGNhbGxiYWNrVXJsLnBhdGhuYW1lLFxuICAgICAgICAgICAgY2FsbGJhY2tTbHVnOiBvcHRzLnNsdWdcbiAgICAgICAgfSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH1cbiAgICB9KS5waXBlKEVmZmVjdC5hbmRUaGVuKHBhcnNlUmVzcG9uc2VKc29uKSwgRWZmZWN0LmFuZFRoZW4oUy5kZWNvZGVVbmtub3duKFByZXNpZ25lZFVSTFJlc3BvbnNlKSkpO1xuICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJVcGxvYWRUaGluZyByZXNwb25kZWQgd2l0aDpcIiwgcHJlc2lnbmVkVXJscyk7XG4gICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlNlbmRpbmcgcHJlc2lnbmVkIFVSTHMgdG8gY2xpZW50XCIpO1xuICAgIGxldCBwcm9taXNlID0gdW5kZWZpbmVkO1xuICAgIGlmIChvcHRzLmlzRGV2KSB7XG4gICAgICAgIGNvbnN0IGZldGNoQ29udGV4dCA9IHlpZWxkKiBGZXRjaENvbnRleHQ7XG4gICAgICAgIHByb21pc2UgPSBFZmZlY3QuZm9yRWFjaChwcmVzaWduZWRVcmxzLCAocHJlc2lnbmVkKT0+Y29uZGl0aW9uYWxEZXZTZXJ2ZXIocHJlc2lnbmVkLCBvcHRzLmFwaUtleSkucGlwZShFZmZlY3QuZWl0aGVyKSwge1xuICAgICAgICAgICAgY29uY3VycmVuY3k6IDEwXG4gICAgICAgIH0pLnBpcGUoRWZmZWN0LnByb3ZpZGUoQ29uc29sYUxvZ2dlciksIEVmZmVjdC5wcm92aWRlU2VydmljZShGZXRjaENvbnRleHQsIGZldGNoQ29udGV4dCksIEVmZmVjdC5ydW5Qcm9taXNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYm9keTogcHJlc2lnbmVkVXJscyxcbiAgICAgICAgY2xlYW51cDogcHJvbWlzZVxuICAgIH07XG59KTtcbmNvbnN0IGhhbmRsZU11bHRpcGFydENvbXBsZXRlQWN0aW9uID0gRWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgY29uc3Qgb3B0cyA9IHlpZWxkKiBSZXF1ZXN0SW5wdXQ7XG4gICAgY29uc3QgcmVxdWVzdElucHV0ID0geWllbGQqIEVmZmVjdC5mbGF0TWFwKHBhcnNlUmVxdWVzdEpzb24ob3B0cy5yZXEpLCBTLmRlY29kZVVua25vd24oTXVsdGlwYXJ0Q29tcGxldGVBY3Rpb25QYXlsb2FkKSk7XG4gICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIkhhbmRsaW5nIG11bHRpcGFydC1jb21wbGV0ZSByZXF1ZXN0IHdpdGggaW5wdXQ6XCIsIHJlcXVlc3RJbnB1dCk7XG4gICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIk5vdGlmeWluZyBVcGxvYWRUaGluZyB0aGF0IG11bHRpcGFydCB1cGxvYWQgaXMgY29tcGxldGVcIik7XG4gICAgY29uc3QgY29tcGxldGlvblJlc3BvbnNlID0geWllbGQqIGNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkKHtcbiAgICAgICAga2V5OiByZXF1ZXN0SW5wdXQuZmlsZUtleSxcbiAgICAgICAgdXBsb2FkSWQ6IHJlcXVlc3RJbnB1dC51cGxvYWRJZFxuICAgIH0sIHJlcXVlc3RJbnB1dC5ldGFncyk7XG4gICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlVwbG9hZFRoaW5nIHJlc3BvbmRlZCB3aXRoOlwiLCBjb21wbGV0aW9uUmVzcG9uc2UpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGJvZHk6IG51bGxcbiAgICB9O1xufSk7XG5jb25zdCBoYW5kbGVNdWx0aXBhcnRGYWlsdXJlQWN0aW9uID0gRWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgY29uc3QgeyByZXEsIHVwbG9hZGFibGUgfSA9IHlpZWxkKiBSZXF1ZXN0SW5wdXQ7XG4gICAgY29uc3QgeyBmaWxlS2V5LCB1cGxvYWRJZCB9ID0geWllbGQqIEVmZmVjdC5mbGF0TWFwKHBhcnNlUmVxdWVzdEpzb24ocmVxKSwgUy5kZWNvZGVVbmtub3duKEZhaWx1cmVBY3Rpb25QYXlsb2FkKSk7XG4gICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIkhhbmRsaW5nIGZhaWx1cmUgcmVxdWVzdCB3aXRoIGlucHV0OlwiLCB7XG4gICAgICAgIGZpbGVLZXksXG4gICAgICAgIHVwbG9hZElkXG4gICAgfSk7XG4gICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIk5vdGlmeWluZyBVcGxvYWRUaGluZyB0aGF0IHVwbG9hZCBmYWlsZWRcIik7XG4gICAgY29uc3QgZmFpbHVyZVJlc3BvbnNlID0geWllbGQqIGFib3J0TXVsdGlwYXJ0VXBsb2FkKHtcbiAgICAgICAga2V5OiBmaWxlS2V5LFxuICAgICAgICB1cGxvYWRJZFxuICAgIH0pO1xuICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJVcGxvYWRUaGluZyByZXNwb25kZWQgd2l0aDpcIiwgZmFpbHVyZVJlc3BvbnNlKTtcbiAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiUnVubmluZyAnb25VcGxvYWRFcnJvcicgY2FsbGJhY2tcIik7XG4gICAgeWllbGQqIEVmZmVjdC50cnkoe1xuICAgICAgICB0cnk6ICgpPT57XG4gICAgICAgICAgICB1cGxvYWRhYmxlLl9kZWYub25VcGxvYWRFcnJvcih7XG4gICAgICAgICAgICAgICAgZXJyb3I6IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJVUExPQURfRkFJTEVEXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBVcGxvYWQgZmFpbGVkIGZvciAke2ZpbGVLZXl9YFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGZpbGVLZXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBjYXRjaDogKGVycm9yKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcnVuIG9uVXBsb2FkRXJyb3JcIixcbiAgICAgICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICAgIH0pXG4gICAgfSkucGlwZShFZmZlY3QudGFwRXJyb3IoKGVycm9yKT0+RWZmZWN0LmxvZ0Vycm9yKFwiRmFpbGVkIHRvIHJ1biBvblVwbG9hZEVycm9yLiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGJlIHRocm93aW5nIGVycm9ycyBoZXJlLlwiLCBlcnJvcikpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBib2R5OiBudWxsXG4gICAgfTtcbn0pO1xuY29uc3QgYnVpbGRQZXJtaXNzaW9uc0luZm9IYW5kbGVyID0gKG9wdHMpPT57XG4gICAgcmV0dXJuICgpPT57XG4gICAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gb2JqZWN0S2V5cyhvcHRzLnJvdXRlcikubWFwKChzbHVnKT0+e1xuICAgICAgICAgICAgY29uc3Qgcm91dGUgPSBvcHRzLnJvdXRlcltzbHVnXTtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IEVmZmVjdC5ydW5TeW5jKGZpbGxJbnB1dFJvdXRlQ29uZmlnKHJvdXRlLl9kZWYucm91dGVyQ29uZmlnKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNsdWcsXG4gICAgICAgICAgICAgICAgY29uZmlnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBlcm1pc3Npb25zO1xuICAgIH07XG59O1xuXG5mdW5jdGlvbiBpbmNvbXBhdGlibGVOb2RlR3VhcmQoKSB7XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG4gICAgbGV0IG1ham9yO1xuICAgIGxldCBtaW5vcjtcbiAgICBjb25zdCBtYXliZU5vZGVWZXJzaW9uID0gcHJvY2Vzcy52ZXJzaW9ucz8ubm9kZT8uc3BsaXQoXCIuXCIpO1xuICAgIGlmIChtYXliZU5vZGVWZXJzaW9uKSB7XG4gICAgICAgIFttYWpvciwgbWlub3JdID0gbWF5YmVOb2RlVmVyc2lvbi5tYXAoKHYpPT5wYXJzZUludCh2LCAxMCkpO1xuICAgIH1cbiAgICBjb25zdCBtYXliZU5vZGVQYXRoID0gcHJvY2Vzcy5lbnY/Lk5PREU7XG4gICAgaWYgKCFtYWpvciAmJiBtYXliZU5vZGVQYXRoKSB7XG4gICAgICAgIGNvbnN0IG5vZGVWZXJzaW9uID0gL3YoXFxkKylcXC4oXFxkKylcXC4oXFxkKykvLmV4ZWMobWF5YmVOb2RlUGF0aCk/LlswXTtcbiAgICAgICAgaWYgKG5vZGVWZXJzaW9uKSB7XG4gICAgICAgICAgICBbbWFqb3IsIG1pbm9yXSA9IG5vZGVWZXJzaW9uLnN1YnN0cmluZygxKS5zcGxpdChcIi5cIikubWFwKCh2KT0+cGFyc2VJbnQodiwgMTApKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW1ham9yIHx8ICFtaW5vcikgcmV0dXJuO1xuICAgIC8vIFJlcXVpcmUgXjE4LjEzLjBcbiAgICBpZiAobWFqb3IgPiAxOCkgcmV0dXJuO1xuICAgIGlmIChtYWpvciA9PT0gMTggJiYgbWlub3IgPj0gMTMpIHJldHVybjtcbiAgICBFZmZlY3QucnVuU3luYyhFZmZlY3QubG9nRXJyb3IoYFlPVSBBUkUgVVNJTkcgQSBMRUdBQ1kgKCR7bWFqb3J9LiR7bWlub3J9KSBOT0RFIFZFUlNJT04gV0hJQ0ggSVNOJ1QgT0ZGSUNJQUxMWSBTVVBQT1JURUQuIFBMRUFTRSBVUEdSQURFIFRPIE5PREUgXjE4LjEzLmApKTtcbiAgICAvLyBLaWxsIHRoZSBwcm9jZXNzIGlmIGl0IGlzbid0IGdvaW5nIHRvIHdvcmsgY29ycmVjdGx5IGFueXdheVxuICAgIC8vIElmIHdlJ3ZlIGdvdHRlbiB0aGlzIGZhciB3ZSBrbm93IHdlIGhhdmUgYSBOb2RlLmpzIHJ1bnRpbWUgc28gZXhpdCBpcyBkZWZpbmVkLiBPdmVycmlkZSBzdGQtZW52IHR5cGUuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2VzcywgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsXG4gICAgcHJvY2Vzcy5leGl0Py4oMSk7XG59XG5cbmZ1bmN0aW9uIGludGVybmFsQ3JlYXRlQnVpbGRlcihpbml0RGVmID0ge30pIHtcbiAgICBjb25zdCBfZGVmID0ge1xuICAgICAgICAvLyBEZWZhdWx0IHJvdXRlciBjb25maWdcbiAgICAgICAgcm91dGVyQ29uZmlnOiB7XG4gICAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgICAgIG1heEZpbGVTaXplOiBcIjRNQlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGlucHV0UGFyc2VyOiB7XG4gICAgICAgICAgICBwYXJzZTogKCk9PnVuZGVmaW5lZCxcbiAgICAgICAgICAgIF9pbnB1dDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgX291dHB1dDogdW5kZWZpbmVkXG4gICAgICAgIH0sXG4gICAgICAgIG1pZGRsZXdhcmU6ICgpPT4oe30pLFxuICAgICAgICBvblVwbG9hZEVycm9yOiAoKT0+KHt9KSxcbiAgICAgICAgZXJyb3JGb3JtYXR0ZXI6IGluaXREZWYuZXJyb3JGb3JtYXR0ZXIgPz8gZGVmYXVsdEVycm9yRm9ybWF0dGVyLFxuICAgICAgICAvLyBPdmVybG9hZCB3aXRoIHByb3BlcnRpZXMgcGFzc2VkIGluXG4gICAgICAgIC4uLmluaXREZWZcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIGlucHV0ICh1c2VyUGFyc2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKHtcbiAgICAgICAgICAgICAgICAuLi5fZGVmLFxuICAgICAgICAgICAgICAgIGlucHV0UGFyc2VyOiB1c2VyUGFyc2VyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgbWlkZGxld2FyZSAodXNlck1pZGRsZXdhcmUpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoe1xuICAgICAgICAgICAgICAgIC4uLl9kZWYsXG4gICAgICAgICAgICAgICAgbWlkZGxld2FyZTogdXNlck1pZGRsZXdhcmVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBvblVwbG9hZENvbXBsZXRlICh1c2VyVXBsb2FkQ29tcGxldGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgX2RlZixcbiAgICAgICAgICAgICAgICByZXNvbHZlcjogdXNlclVwbG9hZENvbXBsZXRlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBvblVwbG9hZEVycm9yICh1c2VyT25VcGxvYWRFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG4gICAgICAgICAgICAgICAgLi4uX2RlZixcbiAgICAgICAgICAgICAgICBvblVwbG9hZEVycm9yOiB1c2VyT25VcGxvYWRFcnJvclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlQnVpbGRlcihvcHRzKSB7XG4gICAgcmV0dXJuIChpbnB1dCk9PntcbiAgICAgICAgcmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG4gICAgICAgICAgICByb3V0ZXJDb25maWc6IGlucHV0LFxuICAgICAgICAgICAgLi4ub3B0c1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuXG4vKipcbiAqIEV4dGVuc2lvbiBvZiB0aGUgQmxvYiBjbGFzcyB0aGF0IHNpbXBsaWZpZXMgc2V0dGluZyB0aGUgYG5hbWVgIGFuZCBgY3VzdG9tSWRgIHByb3BlcnRpZXMsXG4gKiBzaW1pbGFyIHRvIHRoZSBidWlsdC1pbiBGaWxlIGNsYXNzIGZyb20gTm9kZSA+IDIwLlxuICovIGNsYXNzIFVURmlsZSBleHRlbmRzIEJsb2Ige1xuICAgIGNvbnN0cnVjdG9yKHBhcnRzLCBuYW1lLCBvcHRpb25zKXtcbiAgICAgICAgY29uc3Qgb3B0aW9uc1dpdGhEZWZhdWx0cyA9IHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICB0eXBlOiBvcHRpb25zPy50eXBlID8/IChsb29rdXAobmFtZSkgfHwgXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIiksXG4gICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IG9wdGlvbnM/Lmxhc3RNb2RpZmllZCA/PyBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHN1cGVyKHBhcnRzLCBvcHRpb25zV2l0aERlZmF1bHRzKTtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5jdXN0b21JZCA9IG9wdGlvbnNXaXRoRGVmYXVsdHMuY3VzdG9tSWQ7XG4gICAgICAgIHRoaXMubGFzdE1vZGlmaWVkID0gb3B0aW9uc1dpdGhEZWZhdWx0cy5sYXN0TW9kaWZpZWQ7XG4gICAgfVxufVxuXG5jb25zdCB1cGxvYWRQcmVzaWduZWRQb3N0ID0gKGZpbGUsIHByZXNpZ25lZCk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKGBVcGxvYWRpbmcgZmlsZSAke2ZpbGUubmFtZX0gdXNpbmcgcHJlc2lnbmVkIFBPU1QgVVJMYCk7XG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHByZXNpZ25lZC5maWVsZHMpLmZvckVhY2goKFtrLCB2XSk9PmZvcm1EYXRhLmFwcGVuZChrLCB2KSk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZChcImZpbGVcIiwgZmlsZSk7IC8vIEZpbGUgZGF0YSAqKk1VU1QgR08gTEFTVCoqXG4gICAgICAgIGNvbnN0IHJlcyA9IHlpZWxkKiBmZXRjaEVmZihwcmVzaWduZWQudXJsLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgYm9keTogZm9ybURhdGEsXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XG4gICAgICAgICAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL3htbFwiXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KS5waXBlKEVmZmVjdC50YXBFcnJvckNhdXNlKCgpPT5mZXRjaEVmZihnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMKFwiL3Y2L2ZhaWx1cmVDYWxsYmFja1wiKSwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBmaWxlS2V5OiBwcmVzaWduZWQua2V5LFxuICAgICAgICAgICAgICAgICAgICB1cGxvYWRJZDogbnVsbFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5waXBlKEVmZmVjdC5hbmRUaGVuKHBhcnNlUmVzcG9uc2VKc29uKSwgRWZmZWN0LmFuZFRoZW4oUy5kZWNvZGVVbmtub3duKEZhaWx1cmVDYWxsYmFja1Jlc3BvbnNlKSkpKSk7XG4gICAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0geWllbGQqIEVmZmVjdC5wcm9taXNlKHJlcy50ZXh0KTtcbiAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRXJyb3IoYEZhaWxlZCB0byB1cGxvYWQgZmlsZSAke2ZpbGUubmFtZX0gdG8gcHJlc2lnbmVkIFBPU1QgVVJMLiBSZXNwb25zZTogJHt0ZXh0fWApO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgY29kZTogXCJVUExPQURfRkFJTEVEXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gdXBsb2FkIGZpbGVcIixcbiAgICAgICAgICAgICAgICBjYXVzZTogdGV4dFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIkZpbGVcIiwgZmlsZS5uYW1lLCBcInVwbG9hZGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICB9KTtcblxuZnVuY3Rpb24gZ3VhcmRTZXJ2ZXJPbmx5KCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlRoZSBgdXRhcGlgIGNhbiBvbmx5IGJlIHVzZWQgb24gdGhlIHNlcnZlci5cIlxuICAgICAgICB9KTtcbiAgICB9XG59XG5jb25zdCB1cGxvYWRGaWxlc0ludGVybmFsID0gKGlucHV0KT0+Z2V0UHJlc2lnbmVkVXJscyhpbnB1dCkucGlwZShFZmZlY3QuYW5kVGhlbigocHJlc2lnbmVkcyk9PkVmZmVjdC5mb3JFYWNoKHByZXNpZ25lZHMsIChmaWxlKT0+dXBsb2FkRmlsZShmaWxlKS5waXBlKEVmZmVjdC50YXBFcnJvcigoZXJyb3IpPT5FZmZlY3QubG9nRXJyb3IoXCJVcGxvYWQgZmFpbGVkOlwiLCBlcnJvcikpLCBFZmZlY3QubWF0Y2goe1xuICAgICAgICAgICAgICAgIG9uRmFpbHVyZTogKGVycm9yKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogVXBsb2FkVGhpbmdFcnJvci50b09iamVjdChlcnJvciBpbnN0YW5jZW9mIFVwbG9hZFRoaW5nRXJyb3IgPyBlcnJvciA6IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGxvYWQgZmlsZS5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgb25TdWNjZXNzOiAoZGF0YSk9Pih7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pKSwge1xuICAgICAgICAgICAgY29uY3VycmVuY3k6IDEwXG4gICAgICAgIH0pKSk7XG4vKipcbiAqIEZJWE1FOiBkb3dubG9hZGluZyBldmVyeXRoaW5nIGludG8gbWVtb3J5IGFuZCB0aGVuIHVwbG9hZFxuICogaXNuJ3QgdGhlIGJlc3QuIFdlIHNob3VsZCBzdXBwb3J0IHN0cmVhbXMgc28gd2UgY2FuIGRvd25sb2FkXG4gKiBqdXN0IGFzIG11Y2ggYXMgd2UgbmVlZCBhdCBhbnkgdGltZS5cbiAqLyBjb25zdCBkb3dubG9hZEZpbGVzID0gKHVybHMsIGRvd25sb2FkRXJyb3JzKT0+RWZmZWN0LmZvckVhY2godXJscywgKF91cmwsIGlkeCk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgbGV0IHVybCA9IGlzT2JqZWN0KF91cmwpID8gX3VybC51cmwgOiBfdXJsO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBzaW5jZSBkYXRhdXJscyB3aWxsIHJlc3VsdCBpbiBuYW1lIGJlaW5nIHRvbyBsb25nLCB0ZWxsIHRoZSB1c2VyXG4gICAgICAgICAgICAgICAgLy8gdG8gdXNlIHVwbG9hZEZpbGVzIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgaWYgKHVybC5zdGFydHNXaXRoKFwiZGF0YTpcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRFcnJvcnNbaWR4XSA9IFVwbG9hZFRoaW5nRXJyb3IudG9PYmplY3QobmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJQbGVhc2UgdXNlIHVwbG9hZEZpbGVzKCkgZm9yIGRhdGEgVVJMcy4gdXBsb2FkRmlsZXNGcm9tVXJsKCkgaXMgaW50ZW5kZWQgZm9yIHVzZSB3aXRoIHJlbW90ZSBVUkxzIG9ubHkuXCJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cmwgPSBuZXcgVVJMKHVybCk7XG4gICAgICAgICAgICBjb25zdCB7IG5hbWUgPSB1cmwucGF0aG5hbWUuc3BsaXQoXCIvXCIpLnBvcCgpID8/IFwidW5rbm93bi1maWxlbmFtZVwiLCBjdXN0b21JZCA9IHVuZGVmaW5lZCB9ID0gaXNPYmplY3QoX3VybCkgPyBfdXJsIDoge307XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkKiBmZXRjaEVmZih1cmwpO1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGRvd25sb2FkRXJyb3JzW2lkeF0gPSBVcGxvYWRUaGluZ0Vycm9yLnRvT2JqZWN0KG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBkb3dubG9hZCByZXF1ZXN0ZWQgZmlsZS5cIixcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geWllbGQqIEVmZmVjdC5wcm9taXNlKCgpPT5yZXNwb25zZS5ibG9iKCkpLnBpcGUoRWZmZWN0LmFuZFRoZW4oKGJsb2IpPT5uZXcgVVRGaWxlKFtcbiAgICAgICAgICAgICAgICAgICAgYmxvYlxuICAgICAgICAgICAgICAgIF0sIG5hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tSWRcbiAgICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KSwge1xuICAgICAgICBjb25jdXJyZW5jeTogMTBcbiAgICB9KTtcbmNvbnN0IGdldFByZXNpZ25lZFVybHMgPSAoaW5wdXQpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgY29uc3QgeyBmaWxlcywgbWV0YWRhdGEsIGNvbnRlbnREaXNwb3NpdGlvbiwgYWNsIH0gPSBpbnB1dDtcbiAgICAgICAgY29uc3QgZmlsZURhdGEgPSBmaWxlcy5tYXAoKGZpbGUpPT4oe1xuICAgICAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSA/PyBcInVubmFtZWQtYmxvYlwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICAgICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICAgICAgICAgICAgLi4uXCJjdXN0b21JZFwiIGluIGZpbGUgPyB7XG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbUlkOiBmaWxlLmN1c3RvbUlkXG4gICAgICAgICAgICAgICAgfSA6IHt9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJHZXR0aW5nIHByZXNpZ25lZCBVUkxzIGZvciBmaWxlc1wiLCBmaWxlRGF0YSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlU2NoZW1hID0gUy5TdHJ1Y3Qoe1xuICAgICAgICAgICAgZGF0YTogUHJlc2lnbmVkVVJMUmVzcG9uc2VcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHByZXNpZ25lZHMgPSB5aWVsZCogZmV0Y2hFZmYoZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTChcIi92Ni91cGxvYWRGaWxlc1wiKSwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgZmlsZXM6IGZpbGVEYXRhLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgICAgICAgICBhY2xcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLnBpcGUoRWZmZWN0LmFuZFRoZW4ocGFyc2VSZXNwb25zZUpzb24pLCBFZmZlY3QuYW5kVGhlbihTLmRlY29kZVVua25vd24ocmVzcG9uc2VTY2hlbWEpKSwgRWZmZWN0LmNhdGNoVGFnKFwiUGFyc2VFcnJvclwiLCAoZSk9PkVmZmVjdC5kaWUoZSkpLCBFZmZlY3QuY2F0Y2hUYWcoXCJGZXRjaEVycm9yXCIsIChlKT0+RWZmZWN0LmRpZShlKSkpO1xuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiR290IHByZXNpZ25lZCBVUkxzOlwiLCBwcmVzaWduZWRzLmRhdGEpO1xuICAgICAgICByZXR1cm4gZmlsZXMubWFwKChmaWxlLCBpKT0+KHtcbiAgICAgICAgICAgICAgICBmaWxlLFxuICAgICAgICAgICAgICAgIHByZXNpZ25lZDogcHJlc2lnbmVkcy5kYXRhW2ldXG4gICAgICAgICAgICB9KSk7XG4gICAgfSk7XG5jb25zdCB1cGxvYWRGaWxlID0gKGlucHV0KT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgIGNvbnN0IHsgZmlsZSwgcHJlc2lnbmVkIH0gPSBpbnB1dDtcbiAgICAgICAgaWYgKFwidXJsc1wiIGluIHByZXNpZ25lZCkge1xuICAgICAgICAgICAgeWllbGQqIHVwbG9hZE11bHRpcGFydChmaWxlLCBwcmVzaWduZWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgeWllbGQqIHVwbG9hZFByZXNpZ25lZFBvc3QoZmlsZSwgcHJlc2lnbmVkKTtcbiAgICAgICAgfVxuICAgICAgICB5aWVsZCogZmV0Y2hFZmYoZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTChgL3Y2L3BvbGxVcGxvYWQvJHtwcmVzaWduZWQua2V5fWApKS5waXBlKEVmZmVjdC5hbmRUaGVuKHBhcnNlUmVzcG9uc2VKc29uKSwgRWZmZWN0LmFuZFRoZW4oUy5kZWNvZGVVbmtub3duKFBvbGxVcGxvYWRSZXNwb25zZSkpLCBFZmZlY3QudGFwKEVmZmVjdC5sb2dEZWJ1ZyhcIlBvbGxlZCB1cGxvYWRcIiwgcHJlc2lnbmVkLmtleSkpLCBFZmZlY3QuYW5kVGhlbigocmVzKT0+cmVzLnN0YXR1cyA9PT0gXCJkb25lXCIgPyBFZmZlY3Quc3VjY2VlZCh1bmRlZmluZWQpIDogRWZmZWN0LmZhaWwobmV3IFJldHJ5RXJyb3IoKSkpLCBFZmZlY3QucmV0cnkoe1xuICAgICAgICAgICAgd2hpbGU6IChlcnIpPT5lcnIgaW5zdGFuY2VvZiBSZXRyeUVycm9yLFxuICAgICAgICAgICAgc2NoZWR1bGU6IFNjaGVkdWxlLmV4cG9uZW50aWFsKER1cmF0aW9uLm1pbGxpcygxMCksIDQpLnBpcGUoLy8gMTBtcywgNDBtcywgMTYwbXMsIDY0MG1zLi4uXG4gICAgICAgICAgICBTY2hlZHVsZS5hbmRUaGVuRWl0aGVyKFNjaGVkdWxlLnNwYWNlZChEdXJhdGlvbi5zZWNvbmRzKDEpKSksIFNjaGVkdWxlLmNvbXBvc2UoU2NoZWR1bGUuZWxhcHNlZCksIFNjaGVkdWxlLndoaWxlT3V0cHV0KER1cmF0aW9uLmxlc3NUaGFuT3JFcXVhbFRvKER1cmF0aW9uLm1pbnV0ZXMoMSkpKSlcbiAgICAgICAgfSksIEVmZmVjdC5jYXRjaFRhZyhcIlJldHJ5RXJyb3JcIiwgKGUpPT5FZmZlY3QuZGllKGUpKSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXk6IHByZXNpZ25lZC5rZXksXG4gICAgICAgICAgICB1cmw6IHByZXNpZ25lZC5maWxlVXJsLFxuICAgICAgICAgICAgYXBwVXJsOiBwcmVzaWduZWQuYXBwVXJsLFxuICAgICAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICAgICAgdHlwZTogZmlsZS50eXBlLFxuICAgICAgICAgICAgY3VzdG9tSWQ6IFwiY3VzdG9tSWRcIiBpbiBmaWxlID8gZmlsZS5jdXN0b21JZCA/PyBudWxsIDogbnVsbFxuICAgICAgICB9O1xuICAgIH0pO1xuZnVuY3Rpb24gcGFyc2VUaW1lVG9TZWNvbmRzKHRpbWUpIHtcbiAgICBjb25zdCBtYXRjaCA9IHRpbWUudG9TdHJpbmcoKS5zcGxpdCgvKFxcZCspLykuZmlsdGVyKEJvb2xlYW4pO1xuICAgIGNvbnN0IG51bSA9IE51bWJlcihtYXRjaFswXSk7XG4gICAgY29uc3QgdW5pdCA9IChtYXRjaFsxXSA/PyBcInNcIikudHJpbSgpLnNsaWNlKDAsIDEpO1xuICAgIGNvbnN0IG11bHRpcGxpZXIgPSB7XG4gICAgICAgIHM6IDEsXG4gICAgICAgIG06IDYwLFxuICAgICAgICBoOiAzNjAwLFxuICAgICAgICBkOiA4NjQwMFxuICAgIH1bdW5pdF07XG4gICAgcmV0dXJuIG51bSAqIG11bHRpcGxpZXI7XG59XG5cbmNsYXNzIFVUQXBpIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRzKXtcbiAgICAgICAgdGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcgPSAocGF0aG5hbWUsIGJvZHksIHJlc3BvbnNlU2NoZW1hKT0+e1xuICAgICAgICAgICAgY29uc3QgdXJsID0gZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTChwYXRobmFtZSk7XG4gICAgICAgICAgICBFZmZlY3QucnVuU3luYyhFZmZlY3QubG9nRGVidWcoXCJSZXF1ZXN0aW5nIFVwbG9hZFRoaW5nOlwiLCB7XG4gICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5kZWZhdWx0SGVhZGVyc1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKFtcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmRlZmF1bHRIZWFkZXJzKSl7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikgaGVhZGVycy5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmV0Y2hFZmYodXJsLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgIH0pLnBpcGUoRWZmZWN0LmFuZFRoZW4ocGFyc2VSZXNwb25zZUpzb24pLCBFZmZlY3QuYW5kVGhlbihTLmRlY29kZVVua25vd24ocmVzcG9uc2VTY2hlbWEpKSwgRWZmZWN0LmNhdGNoVGFnKFwiRmV0Y2hFcnJvclwiLCAoZXJyKT0+RWZmZWN0LmxvZ0Vycm9yKFwiUmVxdWVzdCBmYWlsZWQ6XCIsIGVycikucGlwZShFZmZlY3QuYW5kVGhlbigoKT0+RWZmZWN0LmRpZShlcnIpKSkpLCBFZmZlY3QuY2F0Y2hUYWcoXCJQYXJzZUVycm9yXCIsIChlcnIpPT5FZmZlY3QubG9nRXJyb3IoXCJSZXNwb25zZSBwYXJzaW5nIGZhaWxlZDpcIiwgZXJyKS5waXBlKEVmZmVjdC5hbmRUaGVuKCgpPT5FZmZlY3QuZGllKGVycikpKSksIEVmZmVjdC50YXAoKHJlcyk9PkVmZmVjdC5sb2dEZWJ1ZyhcIlVwbG9hZFRoaW5nIHJlc3BvbnNlOlwiLCByZXMpKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZXhlY3V0ZUFzeW5jID0gKHByb2dyYW0sIHNpZ25hbCk9PnByb2dyYW0ucGlwZSh3aXRoTWluaW1hbExvZ0xldmVsKHRoaXMubG9nTGV2ZWwpLCBFZmZlY3QucHJvdmlkZShDb25zb2xhTG9nZ2VyKSwgRWZmZWN0LnByb3ZpZGVTZXJ2aWNlKEZldGNoQ29udGV4dCwge1xuICAgICAgICAgICAgICAgIGZldGNoOiB0aGlzLmZldGNoLFxuICAgICAgICAgICAgICAgIGJhc2VIZWFkZXJzOiB0aGlzLmRlZmF1bHRIZWFkZXJzXG4gICAgICAgICAgICB9KSwgKGUpPT5FZmZlY3QucnVuUHJvbWlzZShlLCBzaWduYWwgPyB7XG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbFxuICAgICAgICAgICAgICAgIH0gOiB1bmRlZmluZWQpKTtcbiAgICAgICAgLyoqXG4gICAqIFJlcXVlc3QgdG8gZGVsZXRlIGZpbGVzIGZyb20gVXBsb2FkVGhpbmcgc3RvcmFnZS5cbiAgICogQHBhcmFtIHtzdHJpbmcgfCBzdHJpbmdbXX0gZmlsZUtleXNcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYXdhaXQgZGVsZXRlRmlsZXMoXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIpO1xuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBhd2FpdCBkZWxldGVGaWxlcyhbXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsXCIxNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiXSlcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYXdhaXQgZGVsZXRlRmlsZXMoXCJteUN1c3RvbUlkZW50aWZpZXJcIiwgeyBrZXlUeXBlOiBcImN1c3RvbUlkXCIgfSlcbiAgICovIHRoaXMuZGVsZXRlRmlsZXMgPSBhc3luYyAoa2V5cywgb3B0cyk9PntcbiAgICAgICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICAgICAgY29uc3QgeyBrZXlUeXBlID0gdGhpcy5kZWZhdWx0S2V5VHlwZSB9ID0gb3B0cyA/PyB7fTtcbiAgICAgICAgICAgIGNsYXNzIERlbGV0ZUZpbGVSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJEZWxldGVGaWxlUmVzcG9uc2VcIikoe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IFMuQm9vbGVhbixcbiAgICAgICAgICAgICAgICBkZWxldGVkQ291bnQ6IFMuTnVtYmVyXG4gICAgICAgICAgICB9KSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvZGVsZXRlRmlsZXNcIiwga2V5VHlwZSA9PT0gXCJmaWxlS2V5XCIgPyB7XG4gICAgICAgICAgICAgICAgZmlsZUtleXM6IGFzQXJyYXkoa2V5cylcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgY3VzdG9tSWRzOiBhc0FycmF5KGtleXMpXG4gICAgICAgICAgICB9LCBEZWxldGVGaWxlUmVzcG9uc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAqIFJlcXVlc3QgZmlsZSBVUkxzIGZyb20gVXBsb2FkVGhpbmcgc3RvcmFnZS5cbiAgICogQHBhcmFtIHtzdHJpbmcgfCBzdHJpbmdbXX0gZmlsZUtleXNcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgZGF0YSA9IGF3YWl0IGdldEZpbGVVcmxzKFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiKTtcbiAgICogY29uc29sZS5sb2coZGF0YSk7IC8vIFt7a2V5OiBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIiwgdXJsOiBcImh0dHBzOi8vdXBsb2FkdGhpbmcuY29tL2YvMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wifV1cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgZGF0YSA9IGF3YWl0IGdldEZpbGVVcmxzKFtcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIixcIjE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCJdKVxuICAgKiBjb25zb2xlLmxvZyhkYXRhKSAvLyBbe2tleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIHVybDogXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIiB9LHtrZXk6IFwiMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIiwgdXJsOiBcImh0dHBzOi8vdXBsb2FkdGhpbmcuY29tL2YvMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIn1dXG4gICAqLyB0aGlzLmdldEZpbGVVcmxzID0gYXN5bmMgKGtleXMsIG9wdHMpPT57XG4gICAgICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5VHlwZSA9IHRoaXMuZGVmYXVsdEtleVR5cGUgfSA9IG9wdHMgPz8ge307XG4gICAgICAgICAgICBjbGFzcyBHZXRGaWxlVXJsUmVzcG9uc2UgZXh0ZW5kcyBTLkNsYXNzKFwiR2V0RmlsZVVybFJlc3BvbnNlXCIpKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBTLkFycmF5KFMuU3RydWN0KHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBTLlN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBTLlN0cmluZ1xuICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgfSkge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFwiL3Y2L2dldEZpbGVVcmxcIiwga2V5VHlwZSA9PT0gXCJmaWxlS2V5XCIgPyB7XG4gICAgICAgICAgICAgICAgZmlsZUtleXM6IGtleXNcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgY3VzdG9tSWRzOiBrZXlzXG4gICAgICAgICAgICB9LCBHZXRGaWxlVXJsUmVzcG9uc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAqIFJlcXVlc3QgZmlsZSBsaXN0IGZyb20gVXBsb2FkVGhpbmcgc3RvcmFnZS5cbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdHNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9wdHMubGltaXQgVGhlIG1heGltdW0gbnVtYmVyIG9mIGZpbGVzIHRvIHJldHVyblxuICAgKiBAcGFyYW0ge251bWJlcn0gb3B0cy5vZmZzZXQgVGhlIG51bWJlciBvZiBmaWxlcyB0byBza2lwXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IGRhdGEgPSBhd2FpdCBsaXN0RmlsZXMoeyBsaW1pdDogMSB9KTtcbiAgICogY29uc29sZS5sb2coZGF0YSk7IC8vIHsga2V5OiBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIiwgaWQ6IFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4XCIgfVxuICAgKi8gdGhpcy5saXN0RmlsZXMgPSBhc3luYyAob3B0cyk9PntcbiAgICAgICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICAgICAgY2xhc3MgTGlzdEZpbGVSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJMaXN0RmlsZVJlc3BvbnNlXCIpKHtcbiAgICAgICAgICAgICAgICBoYXNNb3JlOiBTLkJvb2xlYW4sXG4gICAgICAgICAgICAgICAgZmlsZXM6IFMuQXJyYXkoUy5TdHJ1Y3Qoe1xuICAgICAgICAgICAgICAgICAgICBpZDogUy5TdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbUlkOiBTLk51bGxPcihTLlN0cmluZyksXG4gICAgICAgICAgICAgICAgICAgIGtleTogUy5TdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFMuU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFMuTGl0ZXJhbChcIkRlbGV0aW9uIFBlbmRpbmdcIiwgXCJGYWlsZWRcIiwgXCJVcGxvYWRlZFwiLCBcIlVwbG9hZGluZ1wiKVxuICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgfSkge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFwiL3Y2L2xpc3RGaWxlc1wiLCB7XG4gICAgICAgICAgICAgICAgLi4ub3B0c1xuICAgICAgICAgICAgfSwgTGlzdEZpbGVSZXNwb25zZSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlbmFtZUZpbGVzID0gYXN5bmMgKHVwZGF0ZXMpPT57XG4gICAgICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgICAgIGNsYXNzIFJlbmFtZUZpbGVSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJSZW5hbWVGaWxlUmVzcG9uc2VcIikoe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IFMuQm9vbGVhblxuICAgICAgICAgICAgfSkge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFwiL3Y2L3JlbmFtZUZpbGVzXCIsIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVzOiBhc0FycmF5KHVwZGF0ZXMpXG4gICAgICAgICAgICB9LCBSZW5hbWVGaWxlUmVzcG9uc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgcmVuYW1lRmlsZXN9IGluc3RlYWQuICovIHRoaXMucmVuYW1lRmlsZSA9IHRoaXMucmVuYW1lRmlsZXM7XG4gICAgICAgIHRoaXMuZ2V0VXNhZ2VJbmZvID0gYXN5bmMgKCk9PntcbiAgICAgICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICAgICAgY2xhc3MgR2V0VXNhZ2VJbmZvUmVzcG9uc2UgZXh0ZW5kcyBTLkNsYXNzKFwiR2V0VXNhZ2VJbmZvUmVzcG9uc2VcIikoe1xuICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXM6IFMuTnVtYmVyLFxuICAgICAgICAgICAgICAgIGFwcFRvdGFsQnl0ZXM6IFMuTnVtYmVyLFxuICAgICAgICAgICAgICAgIGZpbGVzVXBsb2FkZWQ6IFMuTnVtYmVyLFxuICAgICAgICAgICAgICAgIGxpbWl0Qnl0ZXM6IFMuTnVtYmVyXG4gICAgICAgICAgICB9KSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvZ2V0VXNhZ2VJbmZvXCIsIHt9LCBHZXRVc2FnZUluZm9SZXNwb25zZSkpO1xuICAgICAgICB9O1xuICAgICAgICAvKiogUmVxdWVzdCBhIHByZXNpZ25lZCB1cmwgZm9yIGEgcHJpdmF0ZSBmaWxlKHMpICovIHRoaXMuZ2V0U2lnbmVkVVJMID0gYXN5bmMgKGtleSwgb3B0cyk9PntcbiAgICAgICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICAgICAgY29uc3QgZXhwaXJlc0luID0gb3B0cz8uZXhwaXJlc0luID8gcGFyc2VUaW1lVG9TZWNvbmRzKG9wdHMuZXhwaXJlc0luKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5VHlwZSA9IHRoaXMuZGVmYXVsdEtleVR5cGUgfSA9IG9wdHMgPz8ge307XG4gICAgICAgICAgICBpZiAob3B0cz8uZXhwaXJlc0luICYmIGlzTmFOKGV4cGlyZXNJbikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBhIHZhbGlkIHRpbWUgc3RyaW5nLCBmb3IgZXhhbXBsZSAnMWQnLCAnMiBkYXlzJywgb3IgYSBudW1iZXIgb2Ygc2Vjb25kcy5cIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV4cGlyZXNJbiAmJiBleHBpcmVzSW4gPiA4NjQwMCAqIDcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBsZXNzIHRoYW4gNyBkYXlzICg2MDQ4MDAgc2Vjb25kcykuXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsYXNzIEdldFNpZ25lZFVybFJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkdldFNpZ25lZFVybFJlc3BvbnNlXCIpKHtcbiAgICAgICAgICAgICAgICB1cmw6IFMuU3RyaW5nXG4gICAgICAgICAgICB9KSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvcmVxdWVzdEZpbGVBY2Nlc3NcIiwga2V5VHlwZSA9PT0gXCJmaWxlS2V5XCIgPyB7XG4gICAgICAgICAgICAgICAgZmlsZUtleToga2V5LFxuICAgICAgICAgICAgICAgIGV4cGlyZXNJblxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBjdXN0b21JZDoga2V5LFxuICAgICAgICAgICAgICAgIGV4cGlyZXNJblxuICAgICAgICAgICAgfSwgR2V0U2lnbmVkVXJsUmVzcG9uc2UpKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgQUNMIG9mIGEgZmlsZSBvciBzZXQgb2YgZmlsZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIE1ha2UgYSBzaW5nbGUgZmlsZSBwdWJsaWNcbiAgICogYXdhaXQgdXRhcGkudXBkYXRlQUNMKFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLCBcInB1YmxpYy1yZWFkXCIpO1xuICAgKlxuICAgKiAvLyBNYWtlIG11bHRpcGxlIGZpbGVzIHByaXZhdGVcbiAgICogYXdhaXQgdXRhcGkudXBkYXRlQUNMKFxuICAgKiAgIFtcbiAgICogICAgIFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLFxuICAgKiAgICAgXCIxNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiLFxuICAgKiAgIF0sXG4gICAqICAgXCJwcml2YXRlXCIsXG4gICAqICk7XG4gICAqLyB0aGlzLnVwZGF0ZUFDTCA9IGFzeW5jIChrZXlzLCBhY2wsIG9wdHMpPT57XG4gICAgICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5VHlwZSA9IHRoaXMuZGVmYXVsdEtleVR5cGUgfSA9IG9wdHMgPz8ge307XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVzID0gYXNBcnJheShrZXlzKS5tYXAoKGtleSk9PntcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5VHlwZSA9PT0gXCJmaWxlS2V5XCIgPyB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVLZXk6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgYWNsXG4gICAgICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tSWQ6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgYWNsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VTY2hlbWEgPSBTLlN0cnVjdCh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogUy5Cb29sZWFuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni91cGRhdGVBQ0xcIiwge1xuICAgICAgICAgICAgICAgIHVwZGF0ZXNcbiAgICAgICAgICAgIH0sIHJlc3BvbnNlU2NoZW1hKSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIEFzc2VydCBzb21lIHN0dWZmXG4gICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICBpbmNvbXBhdGlibGVOb2RlR3VhcmQoKTtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gZ2V0QXBpS2V5T3JUaHJvdyhvcHRzPy5hcGlLZXkpO1xuICAgICAgICB0aGlzLmZldGNoID0gb3B0cz8uZmV0Y2ggPz8gZ2xvYmFsVGhpcy5mZXRjaDtcbiAgICAgICAgdGhpcy5kZWZhdWx0SGVhZGVycyA9IHtcbiAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1hcGkta2V5XCI6IGFwaUtleSxcbiAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IHZlcnNpb24sXG4gICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctYmUtYWRhcHRlclwiOiBcInNlcnZlci1zZGtcIixcbiAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1mZS1wYWNrYWdlXCI6IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlZmF1bHRLZXlUeXBlID0gb3B0cz8uZGVmYXVsdEtleVR5cGUgPz8gXCJmaWxlS2V5XCI7XG4gICAgICAgIHRoaXMubG9nTGV2ZWwgPSBvcHRzPy5sb2dMZXZlbDtcbiAgICB9XG4gICAgYXN5bmMgdXBsb2FkRmlsZXMoZmlsZXMsIG9wdHMpIHtcbiAgICAgICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgICAgIGNvbnN0IHVwbG9hZHMgPSBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyhFZmZlY3QuZmxhdE1hcCh1cGxvYWRGaWxlc0ludGVybmFsKHtcbiAgICAgICAgICAgIGZpbGVzOiBhc0FycmF5KGZpbGVzKSxcbiAgICAgICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbjogb3B0cz8uY29udGVudERpc3Bvc2l0aW9uID8/IFwiaW5saW5lXCIsXG4gICAgICAgICAgICBtZXRhZGF0YTogb3B0cz8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgICAgICBhY2w6IG9wdHM/LmFjbFxuICAgICAgICB9KSwgKHVwcyk9PkVmZmVjdC5zdWNjZWVkKEFycmF5LmlzQXJyYXkoZmlsZXMpID8gdXBzIDogdXBzWzBdKSkucGlwZShFZmZlY3QudGFwKChyZXMpPT5FZmZlY3QubG9nRGVidWcoXCJGaW5pc2hlZCB1cGxvYWRpbmc6XCIsIHJlcykpKSwgb3B0cz8uc2lnbmFsKTtcbiAgICAgICAgcmV0dXJuIHVwbG9hZHM7XG4gICAgfVxuICAgIGFzeW5jIHVwbG9hZEZpbGVzRnJvbVVybCh1cmxzLCBvcHRzKSB7XG4gICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICBjb25zdCBkb3dubG9hZEVycm9ycyA9IHt9O1xuICAgICAgICBjb25zdCB1cGxvYWRzID0gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmMoZG93bmxvYWRGaWxlcyhhc0FycmF5KHVybHMpLCBkb3dubG9hZEVycm9ycykucGlwZShFZmZlY3QuYW5kVGhlbigoZmlsZXMpPT5maWxlcy5maWx0ZXIoKGYpPT5mICE9IG51bGwpKSwgRWZmZWN0LmFuZFRoZW4oKGZpbGVzKT0+dXBsb2FkRmlsZXNJbnRlcm5hbCh7XG4gICAgICAgICAgICAgICAgZmlsZXMsXG4gICAgICAgICAgICAgICAgY29udGVudERpc3Bvc2l0aW9uOiBvcHRzPy5jb250ZW50RGlzcG9zaXRpb24gPz8gXCJpbmxpbmVcIixcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogb3B0cz8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgICAgICAgICAgYWNsOiBvcHRzPy5hY2xcbiAgICAgICAgICAgIH0pKSksIG9wdHM/LnNpZ25hbCk7XG4gICAgICAgIC8qKiBQdXQgaXQgYWxsIGJhY2sgdG9nZXRoZXIsIHByZXNlcnZlIHRoZSBvcmRlciBvZiBmaWxlcyAqLyBjb25zdCByZXNwb25zZXMgPSBhc0FycmF5KHVybHMpLm1hcCgoXywgaW5kZXgpPT57XG4gICAgICAgICAgICBpZiAoZG93bmxvYWRFcnJvcnNbaW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGRvd25sb2FkRXJyb3JzW2luZGV4XVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdXBsb2Fkcy5zaGlmdCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFJldHVybiBzaW5nbGUgb2JqZWN0IG9yIGFycmF5IGJhc2VkIG9uIGlucHV0IHVybHMgKi8gY29uc3QgdXBsb2FkRmlsZVJlc3BvbnNlID0gQXJyYXkuaXNBcnJheSh1cmxzKSA/IHJlc3BvbnNlcyA6IHJlc3BvbnNlc1swXTtcbiAgICAgICAgRWZmZWN0LnJ1blN5bmMoRWZmZWN0LmxvZ0RlYnVnKFwiRmluaXNoZWQgdXBsb2FkaW5nOlwiLCB1cGxvYWRGaWxlUmVzcG9uc2UpKTtcbiAgICAgICAgcmV0dXJuIHVwbG9hZEZpbGVSZXNwb25zZTtcbiAgICB9XG59XG5cbmNvbnN0IGNyZWF0ZVVwbG9hZHRoaW5nID0gKG9wdHMpPT5jcmVhdGVCdWlsZGVyKG9wdHMpO1xuLyoqIEBpbnRlcm5hbCAqLyBjb25zdCBJTlRFUk5BTF9ET19OT1RfVVNFX2NyZWF0ZVJvdXRlSGFuZGxlckNvcmUgPSAob3B0cywgYWRhcHRlcik9PntcbiAgICBpbmNvbXBhdGlibGVOb2RlR3VhcmQoKTtcbiAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IGJ1aWxkUmVxdWVzdEhhbmRsZXIob3B0cywgYWRhcHRlcik7XG4gICAgY29uc3QgZ2V0QnVpbGRQZXJtcyA9IGJ1aWxkUGVybWlzc2lvbnNJbmZvSGFuZGxlcihvcHRzKTtcbiAgICBjb25zdCBQT1NUID0gYXN5bmMgKHJlcXVlc3QpPT57XG4gICAgICAgIGNvbnN0IHJlcSA9IHJlcXVlc3QgaW5zdGFuY2VvZiBSZXF1ZXN0ID8gcmVxdWVzdCA6IHJlcXVlc3QucmVxdWVzdDtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBydW5SZXF1ZXN0SGFuZGxlckFzeW5jKHJlcXVlc3RIYW5kbGVyLCB7XG4gICAgICAgICAgICByZXEsXG4gICAgICAgICAgICBtaWRkbGV3YXJlQXJnczoge1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBldmVudDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHJlczogdW5kZWZpbmVkXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIG9wdHMuY29uZmlnKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbihmb3JtYXRFcnJvcihyZXNwb25zZS5lcnJvciwgb3B0cy5yb3V0ZXIpLCB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBnZXRTdGF0dXNDb2RlRnJvbUVycm9yKHJlc3BvbnNlLmVycm9yKSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IHZlcnNpb25cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXMgPSBSZXNwb25zZS5qc29uKHJlc3BvbnNlLmJvZHksIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiB2ZXJzaW9uXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gdGhpcyBpcyBhIGN1c3RvbSBwcm9wZXJ0eVxuICAgICAgICByZXMuY2xlYW51cCA9IHJlc3BvbnNlLmNsZWFudXA7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBjb25zdCBHRVQgPSAocmVxdWVzdCk9PntcbiAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oZ2V0QnVpbGRQZXJtcygpLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogdmVyc2lvblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIEdFVCxcbiAgICAgICAgUE9TVFxuICAgIH07XG59O1xuY29uc3QgY3JlYXRlUm91dGVIYW5kbGVyID0gKG9wdHMpPT5JTlRFUk5BTF9ET19OT1RfVVNFX2NyZWF0ZVJvdXRlSGFuZGxlckNvcmUob3B0cywgXCJzZXJ2ZXJcIik7XG5jb25zdCBleHRyYWN0Um91dGVyQ29uZmlnID0gKHJvdXRlcik9PmJ1aWxkUGVybWlzc2lvbnNJbmZvSGFuZGxlcih7XG4gICAgICAgIHJvdXRlclxuICAgIH0pKCk7XG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgY3JlYXRlUm91dGVIYW5kbGVyfSBpbnN0ZWFkXG4gKi8gY29uc3QgY3JlYXRlU2VydmVySGFuZGxlciA9IGNyZWF0ZVJvdXRlSGFuZGxlcjtcblxuZXhwb3J0IHsgSU5URVJOQUxfRE9fTk9UX1VTRV9jcmVhdGVSb3V0ZUhhbmRsZXJDb3JlLCBVVEFwaSwgVVRGaWxlLCBjcmVhdGVSb3V0ZUhhbmRsZXIsIGNyZWF0ZVNlcnZlckhhbmRsZXIsIGNyZWF0ZVVwbG9hZHRoaW5nLCBleHRyYWN0Um91dGVyQ29uZmlnIH07XG4iXSwibmFtZXMiOlsiVmFsaWRDb250ZW50RGlzcG9zaXRpb25zIiwiVmFsaWRBQ0xzIiwiZmV0Y2hFZmYiLCJnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMIiwicGFyc2VSZXNwb25zZUpzb24iLCJSZXRyeUVycm9yIiwiVXBsb2FkVGhpbmdFcnJvciIsInNpZ25QYXlsb2FkIiwiaXNPYmplY3QiLCJjb250ZW50RGlzcG9zaXRpb24iLCJnZXRUeXBlRnJvbUZpbGVOYW1lIiwib2JqZWN0S2V5cyIsIkludmFsaWRSb3V0ZUNvbmZpZ0Vycm9yIiwiZmlsZVNpemVUb0J5dGVzIiwiYnl0ZXNUb0ZpbGVTaXplIiwiRmV0Y2hDb250ZXh0IiwiZ2V0RnVsbEFwaVVybCIsInZlcmlmeVNpZ25hdHVyZSIsInBhcnNlUmVxdWVzdEpzb24iLCJmaWxsSW5wdXRSb3V0ZUNvbmZpZyIsImFzQXJyYXkiLCJnZXRTdGF0dXNDb2RlRnJvbUVycm9yIiwiUyIsIkVmZmVjdCIsIkR1cmF0aW9uIiwiU2NoZWR1bGUiLCJjcmVhdGVDb25zb2xhIiwiTG9nTGV2ZWxzIiwiTG9nZ2VyIiwiRWZmZWN0TG9nTGV2ZWwiLCJwcm9jZXNzIiwiaXNEZXZlbG9wbWVudCIsIkNvbnRleHQiLCJEYXRhIiwiaXNBY3Rpb25UeXBlIiwiVkFMSURfQUNUSU9OX1RZUEVTIiwiaXNVcGxvYWRUaGluZ0hvb2siLCJWQUxJRF9VVF9IT09LUyIsIlVURmlsZXMiLCJsb29rdXAiLCJ2ZXJzaW9uIiwiZGVmYXVsdEVycm9yRm9ybWF0dGVyIiwiZXJyb3IiLCJtZXNzYWdlIiwiZm9ybWF0RXJyb3IiLCJyb3V0ZXIiLCJlcnJvckZvcm1hdHRlciIsIk9iamVjdCIsImtleXMiLCJfZGVmIiwiQ29udGVudERpc3Bvc2l0aW9uU2NoZW1hIiwiTGl0ZXJhbCIsIkZpbGVVcGxvYWREYXRhIiwiQ2xhc3MiLCJuYW1lIiwiU3RyaW5nIiwic2l6ZSIsIk51bWJlciIsInR5cGUiLCJGaWxlVXBsb2FkRGF0YVdpdGhDdXN0b21JZCIsImV4dGVuZCIsImN1c3RvbUlkIiwiTnVsbE9yIiwiVXBsb2FkZWRGaWxlRGF0YSIsImtleSIsInVybCIsImFwcFVybCIsIlByZXNpZ25lZEJhc2UiLCJmaWxlTmFtZSIsImZpbGVUeXBlIiwiZmlsZVVybCIsInBvbGxpbmdKd3QiLCJwb2xsaW5nVXJsIiwiTVBVUmVzcG9uc2UiLCJ1cmxzIiwiQXJyYXkiLCJ1cGxvYWRJZCIsImNodW5rU2l6ZSIsImNodW5rQ291bnQiLCJQU1BSZXNwb25zZSIsImZpZWxkcyIsIlJlY29yZCIsIlByZXNpZ25lZFVSTFJlc3BvbnNlIiwiVW5pb24iLCJQb2xsVXBsb2FkUmVzcG9uc2UiLCJzdGF0dXMiLCJmaWxlRGF0YSIsIm9wdGlvbmFsIiwiU3RydWN0IiwiZmlsZUtleSIsImZpbGVTaXplIiwibWV0YWRhdGEiLCJjYWxsYmFja1VybCIsImNhbGxiYWNrU2x1ZyIsIkZhaWx1cmVDYWxsYmFja1Jlc3BvbnNlIiwic3VjY2VzcyIsIkJvb2xlYW4iLCJTZXJ2ZXJDYWxsYmFja1Bvc3RSZXNwb25zZSIsIlVwbG9hZEFjdGlvblBheWxvYWQiLCJmaWxlcyIsImlucHV0IiwiVW5rbm93biIsIkZhaWx1cmVBY3Rpb25QYXlsb2FkIiwic3RvcmFnZVByb3ZpZGVyRXJyb3IiLCJNdWx0aXBhcnRDb21wbGV0ZUFjdGlvblBheWxvYWQiLCJldGFncyIsInRhZyIsInBhcnROdW1iZXIiLCJpc1ZhbGlkUmVzcG9uc2UiLCJyZXNwb25zZSIsIm9rIiwiaGVhZGVycyIsImhhcyIsImNvbmRpdGlvbmFsRGV2U2VydmVyIiwicHJlc2lnbmVkIiwiYXBpS2V5IiwiZ2VuIiwiZmlsZSIsInBpcGUiLCJhbmRUaGVuIiwiZGVjb2RlVW5rbm93biIsInJlcyIsInN1Y2NlZWQiLCJmYWlsIiwicmV0cnkiLCJ3aGlsZSIsImVyciIsInNjaGVkdWxlIiwiZXhwb25lbnRpYWwiLCJ1bmlvbiIsInNwYWNlZCIsImNvbXBvc2UiLCJlbGFwc2VkIiwid2hpbGVPdXRwdXQiLCJsZXNzVGhhbk9yRXF1YWxUbyIsIm1pbnV0ZXMiLCJjYXRjaFRhZyIsImNvZGUiLCJzdGFydHNXaXRoIiwibG9nSW5mbyIsInBheWxvYWQiLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJzaWduYXR1cmUiLCJ0cnlQcm9taXNlIiwidHJ5IiwiY2F0Y2giLCJlIiwiY2F1c2UiLCJjYWxsYmFja1Jlc3BvbnNlIiwibWV0aG9kIiwiYm9keSIsIlJlc3BvbnNlIiwibG9nRXJyb3IiLCJ0cmltIiwiY29sb3JpemUiLCJzdHIiLCJsZXZlbCIsImljb25zIiwiZmF0YWwiLCJ3YXJuIiwiaW5mbyIsImxvZyIsImRlYnVnIiwidHJhY2UiLCJmb3JtYXRTdGFjayIsInN0YWNrIiwiY3dkIiwic3BsaXQiLCJzcGxpY2UiLCJtYXAiLCJsIiwicmVwbGFjZSIsImpvaW4iLCJmb3JtYXRBcmdzIiwiYXJncyIsImZtdEFyZ3MiLCJhcmciLCJsb2dnZXIiLCJyZXBvcnRlcnMiLCJsb2dPYmoiLCJkYXRlIiwiaWNvbiIsImxvZ1ByZWZpeCIsInRvTG9jYWxlVGltZVN0cmluZyIsImxpbmVzIiwiY29uc29sZSIsImRlZmF1bHRzIiwiZWZmZWN0TG9nZ2VyTGV2ZWxUb0NvbnNvbGFMZXZlbCIsIkFsbCIsIkZhdGFsIiwiRXJyb3IiLCJJbmZvIiwiRGVidWciLCJUcmFjZSIsIldhcm5pbmciLCJOb25lIiwid2l0aE1pbmltYWxMb2dMZXZlbCIsIndpdGhNaW5pbXVtTG9nTGV2ZWwiLCJzaWxlbnQiLCJ2ZXJib3NlIiwiQ29uc29sYUxvZ2dlciIsImRlZmF1bHRMb2dnZXIiLCJtYWtlIiwibG9nTGV2ZWwiLCJfdGFnIiwidXBsb2FkTXVsdGlwYXJ0IiwibG9nRGVidWciLCJsZW5ndGgiLCJmb3JFYWNoIiwiaW5kZXgiLCJvZmZzZXQiLCJlbmQiLCJNYXRoIiwibWluIiwiY2h1bmsiLCJzbGljZSIsInVwbG9hZFBhcnQiLCJjb250ZW50VHlwZSIsIm1heFJldHJpZXMiLCJldGFnIiwiZGllIiwiY29uY3VycmVuY3kiLCJjb21wbGV0ZU11bHRpcGFydFVwbG9hZCIsIm9wdHMiLCJnZXQiLCJtaWxsaXMiLCJhbmRUaGVuRWl0aGVyIiwic2Vjb25kcyIsInRpbWVzIiwidGFwRXJyb3JUYWciLCJhYm9ydE11bHRpcGFydFVwbG9hZCIsIndpdGhTcGFuIiwiYXR0cmlidXRlcyIsImdldFBhcnNlRm4iLCJwYXJzZXIiLCJnZXRBcGlLZXkiLCJlbnYiLCJVUExPQURUSElOR19TRUNSRVQiLCJ1bmRlZmluZWQiLCJnZXRBcGlLZXlPclRocm93IiwiRmlsZVNpemVNaXNtYXRjaCIsImNvbnN0cnVjdG9yIiwibWF4IiwiYWN0dWFsIiwicmVhc29uIiwiRmlsZUNvdW50TWlzbWF0Y2giLCJib3VuZHR5cGUiLCJib3VuZCIsImFzc2VydEZpbGVzTWVldENvbmZpZyIsInJvdXRlQ29uZmlnIiwiY291bnRzIiwic2l6ZUxpbWl0IiwibWF4RmlsZVNpemUiLCJzaXplTGltaXRCeXRlcyIsIl9rZXkiLCJjb25maWciLCJjb3VudCIsIm1pbkZpbGVDb3VudCIsIm1heEZpbGVDb3VudCIsIlJlcXVlc3RJbnB1dCIsIlRhZyIsInBhcnNlQW5kVmFsaWRhdGVSZXF1ZXN0IiwiYWRhcHRlciIsInJlcSIsImlzRWZmZWN0IiwiVVJMIiwicGFyYW1zIiwic2VhcmNoUGFyYW1zIiwiYWN0aW9uIiwic2x1ZyIsImhvb2siLCJ1dEZyb250ZW5kUGFja2FnZSIsImNsaWVudFZlcnNpb24iLCJ1cGxvYWR0aGluZ1NlY3JldCIsIm1zZyIsInVwbG9hZGFibGUiLCJ4IiwiY29udGV4dFZhbHVlIiwiYmFzZUhlYWRlcnMiLCJpc0RldiIsImJhc2UiLCJtaWRkbGV3YXJlQXJncyIsInJlc29sdmVDYWxsYmFja1VybCIsIlVQTE9BRFRISU5HX1VSTCIsImhvc3QiLCJpbmNsdWRlcyIsInBhcnNlZEZyb21IZWFkZXJzIiwibG9nV2FybmluZyIsInJ1blJlcXVlc3RIYW5kbGVyQXN5bmMiLCJoYW5kbGVyIiwicHJvdmlkZSIsInByb3ZpZGVTZXJ2aWNlIiwiZmV0Y2giLCJnbG9iYWxUaGlzIiwiYXNIYW5kbGVyT3V0cHV0IiwicnVuUHJvbWlzZSIsImVmZmVjdCIsImNhdGNoQWxsIiwiaGFuZGxlUmVxdWVzdCIsImhhbmRsZUNhbGxiYWNrUmVxdWVzdCIsImhhbmRsZVVwbG9hZEFjdGlvbiIsImhhbmRsZU11bHRpcGFydENvbXBsZXRlQWN0aW9uIiwiaGFuZGxlTXVsdGlwYXJ0RmFpbHVyZUFjdGlvbiIsIm91dHB1dCIsImJ1aWxkUmVxdWVzdEhhbmRsZXIiLCJwcm92aWRlU2VydmljZUVmZmVjdCIsImNhdGNoVGFncyIsIkludmFsaWRKc29uIiwiQmFkUmVxdWVzdEVycm9yIiwiZ2V0TWVzc2FnZSIsImRhdGEiLCJqc29uIiwiRmV0Y2hFcnJvciIsIlBhcnNlRXJyb3IiLCJ0YXBFcnJvciIsInZlcmlmaWVkIiwiY2xvbmUiLCJ0ZXh0IiwicmVxdWVzdElucHV0IiwiZmxhdE1hcCIsInNlcnZlckRhdGEiLCJyZXNvbHZlciIsImNhbGxiYWNrRGF0YSIsInJ1blJvdXRlTWlkZGxld2FyZSIsIm1pZGRsZXdhcmUiLCJmaWxlc1dpdGhDdXN0b21JZHMiLCJpZHgiLCJ0aGVpcnMiLCJpbnB1dFBhcnNlciIsInBhcnNlZElucHV0Iiwicm91dGVyQ29uZmlnIiwicGFyc2VkQ29uZmlnIiwibWFwRXJyb3IiLCJocmVmIiwicHJlc2lnbmVkVXJscyIsIm9yaWdpbiIsInBhdGhuYW1lIiwicHJvbWlzZSIsImZldGNoQ29udGV4dCIsImVpdGhlciIsImNsZWFudXAiLCJjb21wbGV0aW9uUmVzcG9uc2UiLCJmYWlsdXJlUmVzcG9uc2UiLCJvblVwbG9hZEVycm9yIiwiYnVpbGRQZXJtaXNzaW9uc0luZm9IYW5kbGVyIiwicGVybWlzc2lvbnMiLCJyb3V0ZSIsInJ1blN5bmMiLCJpbmNvbXBhdGlibGVOb2RlR3VhcmQiLCJtYWpvciIsIm1pbm9yIiwibWF5YmVOb2RlVmVyc2lvbiIsInZlcnNpb25zIiwibm9kZSIsInYiLCJwYXJzZUludCIsIm1heWJlTm9kZVBhdGgiLCJOT0RFIiwibm9kZVZlcnNpb24iLCJleGVjIiwic3Vic3RyaW5nIiwiZXhpdCIsImludGVybmFsQ3JlYXRlQnVpbGRlciIsImluaXREZWYiLCJpbWFnZSIsIl9pbnB1dCIsIl9vdXRwdXQiLCJ1c2VyUGFyc2VyIiwidXNlck1pZGRsZXdhcmUiLCJvblVwbG9hZENvbXBsZXRlIiwidXNlclVwbG9hZENvbXBsZXRlIiwidXNlck9uVXBsb2FkRXJyb3IiLCJjcmVhdGVCdWlsZGVyIiwiVVRGaWxlIiwiQmxvYiIsInBhcnRzIiwib3B0aW9ucyIsIm9wdGlvbnNXaXRoRGVmYXVsdHMiLCJsYXN0TW9kaWZpZWQiLCJEYXRlIiwibm93IiwidXBsb2FkUHJlc2lnbmVkUG9zdCIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJlbnRyaWVzIiwiayIsImFwcGVuZCIsIkhlYWRlcnMiLCJBY2NlcHQiLCJ0YXBFcnJvckNhdXNlIiwiZ3VhcmRTZXJ2ZXJPbmx5IiwidXBsb2FkRmlsZXNJbnRlcm5hbCIsImdldFByZXNpZ25lZFVybHMiLCJwcmVzaWduZWRzIiwidXBsb2FkRmlsZSIsIm1hdGNoIiwib25GYWlsdXJlIiwidG9PYmplY3QiLCJvblN1Y2Nlc3MiLCJkb3dubG9hZEZpbGVzIiwiZG93bmxvYWRFcnJvcnMiLCJfdXJsIiwicG9wIiwiYmxvYiIsImFjbCIsInJlc3BvbnNlU2NoZW1hIiwiY2FjaGUiLCJpIiwidGFwIiwicGFyc2VUaW1lVG9TZWNvbmRzIiwidGltZSIsInRvU3RyaW5nIiwiZmlsdGVyIiwibnVtIiwidW5pdCIsIm11bHRpcGxpZXIiLCJzIiwibSIsImgiLCJkIiwiVVRBcGkiLCJyZXF1ZXN0VXBsb2FkVGhpbmciLCJkZWZhdWx0SGVhZGVycyIsInZhbHVlIiwic2V0IiwiZXhlY3V0ZUFzeW5jIiwicHJvZ3JhbSIsInNpZ25hbCIsImRlbGV0ZUZpbGVzIiwia2V5VHlwZSIsImRlZmF1bHRLZXlUeXBlIiwiRGVsZXRlRmlsZVJlc3BvbnNlIiwiZGVsZXRlZENvdW50IiwiZmlsZUtleXMiLCJjdXN0b21JZHMiLCJnZXRGaWxlVXJscyIsIkdldEZpbGVVcmxSZXNwb25zZSIsImxpc3RGaWxlcyIsIkxpc3RGaWxlUmVzcG9uc2UiLCJoYXNNb3JlIiwiaWQiLCJyZW5hbWVGaWxlcyIsInVwZGF0ZXMiLCJSZW5hbWVGaWxlUmVzcG9uc2UiLCJyZW5hbWVGaWxlIiwiZ2V0VXNhZ2VJbmZvIiwiR2V0VXNhZ2VJbmZvUmVzcG9uc2UiLCJ0b3RhbEJ5dGVzIiwiYXBwVG90YWxCeXRlcyIsImZpbGVzVXBsb2FkZWQiLCJsaW1pdEJ5dGVzIiwiZ2V0U2lnbmVkVVJMIiwiZXhwaXJlc0luIiwiaXNOYU4iLCJHZXRTaWduZWRVcmxSZXNwb25zZSIsInVwZGF0ZUFDTCIsInVwbG9hZEZpbGVzIiwidXBsb2FkcyIsInVwcyIsImlzQXJyYXkiLCJ1cGxvYWRGaWxlc0Zyb21VcmwiLCJmIiwicmVzcG9uc2VzIiwiXyIsInNoaWZ0IiwidXBsb2FkRmlsZVJlc3BvbnNlIiwiY3JlYXRlVXBsb2FkdGhpbmciLCJJTlRFUk5BTF9ET19OT1RfVVNFX2NyZWF0ZVJvdXRlSGFuZGxlckNvcmUiLCJyZXF1ZXN0SGFuZGxlciIsImdldEJ1aWxkUGVybXMiLCJQT1NUIiwicmVxdWVzdCIsIlJlcXVlc3QiLCJldmVudCIsIkdFVCIsImNyZWF0ZVJvdXRlSGFuZGxlciIsImV4dHJhY3RSb3V0ZXJDb25maWciLCJjcmVhdGVTZXJ2ZXJIYW5kbGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/server/index.js\n");

/***/ })

};
;